[{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\eslint.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\prettier.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\App.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\components\\chronicle\\ChronicleViewer.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useMemo' is defined but never used.","line":2,"column":38,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":45},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has missing dependencies: 'chronicleViewer' and 'stableProps'. Either include them or remove the dependency array.","line":65,"column":6,"nodeType":"ArrayExpression","endLine":65,"endColumn":62,"suggestions":[{"desc":"Update the dependencies array to be: [chronicleViewer, stableProps]","fix":{"range":[2139,2195],"text":"[chronicleViewer, stableProps]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has missing dependencies: 'chronicleViewer' and 'stableProps'. Either include them or remove the dependency array.","line":70,"column":6,"nodeType":"ArrayExpression","endLine":70,"endColumn":80,"suggestions":[{"desc":"Update the dependencies array to be: [chronicleViewer, stableProps]","fix":{"range":[2376,2450],"text":"[chronicleViewer, stableProps]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// components/chronicle/ChronicleViewer.tsx\nimport React, { useState, useEffect, useMemo, useCallback } from 'react';\nimport { TerminalWindow } from '../ui/TerminalWindow';\nimport { TerminalText } from '../ui/TerminalWindow';\nimport type { Chronicle, ChronicleEntry } from '../../types/chronicle';\nimport { ChronicleService } from '../../services/ChronicleService';\nimport { useChronicleViewer, ChronicleUtils } from '../../hooks/useChronicleViewer';\nimport { useDebounce, usePerformanceMonitor, useStableObject } from '../../utils/performance';\n\ninterface ChronicleViewerProps {\n  onEntrySelect?: (entry: ChronicleEntry) => void;\n  onHeritageGenerate?: (entry: ChronicleEntry) => void;\n}\n\nexport const ChronicleViewer: React.FC<ChronicleViewerProps> = React.memo(({\n  onEntrySelect,\n  onHeritageGenerate\n}) => {\n  const [chronicle, setChronicle] = useState<Chronicle | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  // Performance monitoring\n  const { start: startRender, end: endRender } = usePerformanceMonitor('ChronicleViewer-render');\n\n  React.useLayoutEffect(() => {\n    startRender();\n    return () => {\n      endRender();\n    };\n  });\n\n  // Use custom hook for business logic\n  const chronicleViewer = useChronicleViewer(chronicle?.entries || []);\n\n  // Memoize stable event handlers\n  const stableProps = useStableObject({ onEntrySelect, onHeritageGenerate });\n\n  useEffect(() => {\n    loadChronicle();\n  }, []);\n\n  const loadChronicle = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n      const result = await ChronicleService.loadPlayerChronicle();\n\n      if (result.success) {\n        setChronicle(result.data);\n      } else {\n        setError(result.error.message);\n      }\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to load chronicle');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Optimized and memoized event handlers\n  const handleEntrySelect = useCallback((entry: ChronicleEntry) => {\n    chronicleViewer.selectEntry(entry);\n    stableProps.onEntrySelect?.(entry);\n  }, [chronicleViewer.selectEntry, stableProps.onEntrySelect]);\n\n  const handleHeritageGenerate = useCallback((entry: ChronicleEntry) => {\n    chronicleViewer.generateHeritageForEntry(entry);\n    stableProps.onHeritageGenerate?.(entry);\n  }, [chronicleViewer.generateHeritageForEntry, stableProps.onHeritageGenerate]);\n\n  // Debounced search handler to prevent excessive filtering\n  const debouncedSearch = useDebounce((...args: unknown[]) => {\n    const searchText = args[0] as string;\n    chronicleViewer.updateFilter({ searchText: searchText || undefined });\n  }, 300);\n\n  const handleExportChronicle = () => {\n    if (chronicle) {\n      const exportData = ChronicleService.exportChronicle(chronicle);\n      const blob = new Blob([exportData], { type: 'application/json' });\n      const url = URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = `chronicle-${chronicle.playerName}-${new Date().toISOString().split('T')[0]}.json`;\n      document.body.appendChild(a);\n      a.click();\n      document.body.removeChild(a);\n      URL.revokeObjectURL(url);\n    }\n  };\n\n  if (loading) {\n    return (\n      <TerminalWindow title=\"LOADING CHRONICLES\" className=\"min-h-96\">\n        <TerminalText className=\"dim\">\n          Accessing temporal databank...\n        </TerminalText>\n      </TerminalWindow>\n    );\n  }\n\n  if (error) {\n    return (\n      <TerminalWindow title=\"CHRONICLE ACCESS ERROR\" className=\"min-h-96\">\n        <TerminalText className=\"warning\">\n          ERROR: {error}\n        </TerminalText>\n        <button\n          onClick={loadChronicle}\n          className=\"mt-4 px-4 py-2 bg-yellow-600 text-black rounded hover:bg-yellow-500\"\n        >\n          RETRY ACCESS\n        </button>\n      </TerminalWindow>\n    );\n  }\n\n  if (!chronicle || chronicleViewer.isEmpty) {\n    return (\n      <TerminalWindow title=\"CHRONICLE ARCHIVE\" className=\"min-h-96\">\n        <TerminalText className=\"dim\">\n          No chronicle entries found. Begin your legacy by completing your first mission.\n        </TerminalText>\n        {onHeritageGenerate && (\n          <button\n            onClick={() => onHeritageGenerate({} as ChronicleEntry)}\n            className=\"mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-500\"\n          >\n            GENERATE TEST HERITAGE\n          </button>\n        )}\n      </TerminalWindow>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Statistics Panel */}\n      <TerminalWindow title=\"CHRONICLE STATISTICS\" className=\"mb-4\">\n        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 text-center\">\n          <div>\n            <TerminalText className=\"primary text-xl\">\n              {chronicleViewer.statistics.total}\n            </TerminalText>\n            <TerminalText className=\"dim text-sm\">Missions</TerminalText>\n          </div>\n          <div>\n            <TerminalText className=\"primary text-xl\">\n              {Math.round(chronicleViewer.statistics.successRate * 100)}%\n            </TerminalText>\n            <TerminalText className=\"dim text-sm\">Success Rate</TerminalText>\n          </div>\n          <div>\n            <TerminalText className=\"primary text-xl\">\n              {Math.round(chronicleViewer.statistics.averageDuration)}\n            </TerminalText>\n            <TerminalText className=\"dim text-sm\">Avg. Years</TerminalText>\n          </div>\n          <div>\n            <TerminalText className=\"primary text-xl\">\n              {chronicleViewer.statistics.artifactCount}\n            </TerminalText>\n            <TerminalText className=\"dim text-sm\">Artifacts</TerminalText>\n          </div>\n        </div>\n      </TerminalWindow>\n\n      {/* Filters Panel */}\n      <TerminalWindow title=\"CHRONICLE FILTERS\">\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n          <div>\n            <label className=\"block text-sm text-gray-400 mb-2\">Legacy Filter</label>\n            <select\n              value={chronicleViewer.filters.legacy || ''}\n              onChange={(e) => chronicleViewer.updateFilter({\n                legacy: e.target.value || undefined\n              })}\n              className=\"w-full bg-gray-800 border border-gray-600 text-green-400 p-2 rounded\"\n            >\n              <option value=\"\">All Legacies</option>\n              {chronicleViewer.filterOptions.legacies.map(legacy => (\n                <option key={legacy} value={legacy}>\n                  {legacy.charAt(0).toUpperCase() + legacy.slice(1)}\n                </option>\n              ))}\n            </select>\n          </div>\n\n          <div>\n            <label className=\"block text-sm text-gray-400 mb-2\">Success Level</label>\n            <select\n              value={chronicleViewer.filters.successLevel || ''}\n              onChange={(e) => chronicleViewer.updateFilter({\n                successLevel: e.target.value || undefined\n              })}\n              className=\"w-full bg-gray-800 border border-gray-600 text-green-400 p-2 rounded\"\n            >\n              <option value=\"\">All Outcomes</option>\n              {chronicleViewer.filterOptions.successLevels.map(level => (\n                <option key={level} value={level}>\n                  {ChronicleUtils.getSuccessLevelText(level)}\n                </option>\n              ))}\n            </select>\n          </div>\n\n          <div>\n            <label className=\"block text-sm text-gray-400 mb-2\">Search</label>\n            <input\n              type=\"text\"\n              value={chronicleViewer.filters.searchText || ''}\n              onChange={(e) => debouncedSearch(e.target.value)}\n              placeholder=\"Search missions...\"\n              className=\"w-full bg-gray-800 border border-gray-600 text-green-400 p-2 rounded\"\n            />\n          </div>\n        </div>\n\n        {chronicleViewer.hasFilters && (\n          <div className=\"mt-4 flex justify-between items-center\">\n            <TerminalText className=\"dim\">\n              Showing {chronicleViewer.entries.length} of {chronicle.entries.length} entries\n            </TerminalText>\n            <button\n              onClick={chronicleViewer.clearFilters}\n              className=\"px-3 py-1 bg-red-600 text-white text-sm rounded hover:bg-red-500\"\n            >\n              Clear Filters\n            </button>\n          </div>\n        )}\n      </TerminalWindow>\n\n      {/* Mission List */}\n      <TerminalWindow title=\"MISSION CHRONICLES\">\n        <div className=\"space-y-2\">\n          {chronicleViewer.entries.map((entry, index) => (\n            <div\n              key={entry.missionId || index}\n              className={`border border-gray-600 p-4 rounded cursor-pointer hover:border-green-400 transition-colors ${\n                chronicleViewer.selectedEntry?.missionId === entry.missionId ? 'border-green-400 bg-green-900/20' : ''\n              }`}\n              onClick={() => handleEntrySelect(entry)}\n            >\n              <div className=\"flex justify-between items-start\">\n                <div className=\"flex-1\">\n                  <h3 className=\"text-green-400 font-mono text-lg\">\n                    Mission {entry.missionNumber}: {entry.missionName}\n                  </h3>\n                  <div className=\"text-gray-400 text-sm mt-1\">\n                    <span>Target: {entry.targetSystem}</span>\n                    <span className=\"mx-2\">‚Ä¢</span>\n                    <span>Duration: {ChronicleUtils.formatDuration(entry.actualDuration)}</span>\n                    <span className=\"mx-2\">‚Ä¢</span>\n                    <span className={ChronicleUtils.getSuccessLevelColor(entry.successLevel)}>\n                      {ChronicleUtils.getSuccessLevelText(entry.successLevel)}\n                    </span>\n                  </div>\n                  {entry.keyDecisions.length > 0 && (\n                    <div className=\"text-gray-500 text-xs mt-2\">\n                      {entry.keyDecisions.length} key decisions recorded\n                    </div>\n                  )}\n                </div>\n                <div className=\"flex flex-col gap-2\">\n                  <button\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      handleHeritageGenerate(entry);\n                    }}\n                    className=\"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-500\"\n                  >\n                    Generate Heritage\n                  </button>\n                  <div className=\"text-right text-xs text-gray-500\">\n                    Significance: {ChronicleUtils.calculateSignificance(entry).toFixed(1)}\n                  </div>\n                </div>\n              </div>\n            </div>\n          ))}\n\n          {chronicleViewer.entries.length === 0 && (\n            <TerminalText className=\"dim text-center py-8\">\n              No missions match current filters\n            </TerminalText>\n          )}\n        </div>\n      </TerminalWindow>\n\n      {/* Selected Entry Details */}\n      {chronicleViewer.selectedEntry && (\n        <TerminalWindow title={`MISSION DETAILS: ${chronicleViewer.selectedEntry.missionName}`}>\n          <div className=\"space-y-4\">\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div>\n                <TerminalText className=\"dim\">Mission Parameters</TerminalText>\n                <div className=\"mt-2 space-y-1 text-sm\">\n                  <div>Legacy: <span className=\"text-green-400\">{chronicleViewer.selectedEntry.startingLegacy}</span></div>\n                  <div>Target: <span className=\"text-green-400\">{chronicleViewer.selectedEntry.targetSystem}</span></div>\n                  <div>Duration: <span className=\"text-green-400\">{ChronicleUtils.formatDuration(chronicleViewer.selectedEntry.actualDuration)}</span></div>\n                </div>\n              </div>\n              <div>\n                <TerminalText className=\"dim\">Mission Outcome</TerminalText>\n                <div className=\"mt-2 space-y-1 text-sm\">\n                  <div>Result: <span className={ChronicleUtils.getSuccessLevelColor(chronicleViewer.selectedEntry.successLevel)}>\n                    {ChronicleUtils.getSuccessLevelText(chronicleViewer.selectedEntry.successLevel)}\n                  </span></div>\n                  <div>Dominant Legacy: <span className=\"text-green-400\">{chronicleViewer.selectedEntry.dominantLegacy}</span></div>\n                </div>\n              </div>\n            </div>\n\n            {chronicleViewer.selectedEntry.keyDecisions.length > 0 && (\n              <div>\n                <TerminalText className=\"dim\">Key Decisions</TerminalText>\n                <div className=\"mt-2 space-y-2\">\n                  {chronicleViewer.selectedEntry.keyDecisions.map((decision, index) => (\n                    <div key={decision.id || index} className=\"border-l-2 border-yellow-600 pl-3\">\n                      <div className=\"text-sm text-yellow-400\">{decision.title}</div>\n                      <div className=\"text-xs text-gray-400\">{decision.description}</div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            )}\n\n            {chronicleViewer.selectedEntry.artifacts && chronicleViewer.selectedEntry.artifacts.length > 0 && (\n              <div>\n                <TerminalText className=\"dim\">Artifacts Discovered</TerminalText>\n                <div className=\"mt-2 space-y-2\">\n                  {chronicleViewer.selectedEntry.artifacts.map((artifact, index) => (\n                    <div key={artifact.id || index} className=\"border-l-2 border-blue-600 pl-3\">\n                      <div className=\"text-sm text-blue-400\">{artifact.name}</div>\n                      <div className=\"text-xs text-gray-400\">{artifact.description}</div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            )}\n          </div>\n        </TerminalWindow>\n      )}\n\n      {/* Actions */}\n      <div className=\"flex justify-end gap-4\">\n        <button\n          onClick={handleExportChronicle}\n          className=\"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-500\"\n        >\n          Export Chronicle\n        </button>\n      </div>\n    </div>\n  );\n}, (prevProps, nextProps) => {\n  // Custom comparison function for React.memo optimization\n  return (\n    prevProps.onEntrySelect === nextProps.onEntrySelect &&\n    prevProps.onHeritageGenerate === nextProps.onHeritageGenerate\n  );\n});","usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\components\\chronicle\\HeritageSelector.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'analyzeOptions'. Either include it or remove the dependency array.","line":48,"column":6,"nodeType":"ArrayExpression","endLine":48,"endColumn":51,"suggestions":[{"desc":"Update the dependencies array to be: [availableModifiers, targetMission, criteria, analyzeOptions]","fix":{"range":[1583,1628],"text":"[availableModifiers, targetMission, criteria, analyzeOptions]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":147,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":147,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5038,5041],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5038,5041],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// components/chronicle/HeritageSelector.tsx\nimport React, { useState, useEffect } from 'react';\nimport { TerminalWindow } from '../ui/TerminalWindow';\nimport { TerminalText } from '../ui/TerminalWindow';\nimport type {\n  HeritageModifier,\n  HeritageSelectionCriteria,\n  HeritageAnalysis,\n  HeritageConflict,\n  HeritageTier\n} from '../../types/heritage';\nimport type { GenerationalMission } from '../../types/generationalMissions';\nimport { HeritageService } from '../../services/HeritageService';\n\ninterface HeritageSelectorProps {\n  availableModifiers: HeritageModifier[];\n  targetMission?: Partial<GenerationalMission>;\n  onSelectionChange: (selectedModifiers: HeritageModifier[]) => void;\n  onApply: (selectedModifiers: HeritageModifier[]) => void;\n  maxSelections?: number;\n}\n\nexport const HeritageSelector: React.FC<HeritageSelectorProps> = ({\n  availableModifiers,\n  targetMission,\n  onSelectionChange,\n  onApply,\n  maxSelections = 5\n}) => {\n  const [selectedModifiers, setSelectedModifiers] = useState<HeritageModifier[]>([]);\n  const [analysis, setAnalysis] = useState<HeritageAnalysis | null>(null);\n  const [conflicts, setConflicts] = useState<HeritageConflict[]>([]);\n  const [criteria] = useState<HeritageSelectionCriteria>({\n    maxModifiers: maxSelections,\n    tierLimits: {\n      legendary: 1,\n      major: 2,\n      moderate: 3,\n      minor: 5\n    }\n  });\n  const [activeTab, setActiveTab] = useState<'available' | 'selected' | 'analysis'>('available');\n\n  useEffect(() => {\n    if (availableModifiers.length > 0 && targetMission) {\n      analyzeOptions();\n    }\n  }, [availableModifiers, targetMission, criteria]);\n\n  useEffect(() => {\n    const newConflicts = HeritageService.detectConflicts(selectedModifiers);\n    setConflicts(newConflicts);\n    onSelectionChange(selectedModifiers);\n  }, [selectedModifiers, onSelectionChange]);\n\n  const analyzeOptions = async () => {\n    try {\n      const result = await HeritageService.analyzeHeritageOptions(\n        availableModifiers,\n        targetMission || {},\n        criteria\n      );\n      setAnalysis(result);\n    } catch (error) {\n      console.error('Failed to analyze heritage options:', error);\n    }\n  };\n\n  const toggleModifier = (modifier: HeritageModifier) => {\n    const isSelected = selectedModifiers.some(m => m.id === modifier.id);\n\n    if (isSelected) {\n      setSelectedModifiers(prev => prev.filter(m => m.id !== modifier.id));\n    } else {\n      if (selectedModifiers.length >= maxSelections) {\n        return; // Max selections reached\n      }\n\n      // Check tier limits\n      const currentTierCount = selectedModifiers.filter(m => m.tier === modifier.tier).length;\n      const tierLimit = criteria.tierLimits?.[modifier.tier];\n      if (tierLimit && currentTierCount >= tierLimit) {\n        return; // Tier limit reached\n      }\n\n      setSelectedModifiers(prev => [...prev, modifier]);\n    }\n  };\n\n  const isModifierSelectable = (modifier: HeritageModifier): boolean => {\n    const isSelected = selectedModifiers.some(m => m.id === modifier.id);\n    if (isSelected) return true;\n\n    if (selectedModifiers.length >= maxSelections) return false;\n\n    const currentTierCount = selectedModifiers.filter(m => m.tier === modifier.tier).length;\n    const tierLimit = criteria.tierLimits?.[modifier.tier];\n    if (tierLimit && currentTierCount >= tierLimit) return false;\n\n    return true;\n  };\n\n  const getTierColor = (tier: HeritageTier): string => {\n    switch (tier) {\n      case 'legendary': return 'text-yellow-400';\n      case 'major': return 'text-purple-400';\n      case 'moderate': return 'text-blue-400';\n      case 'minor': return 'text-green-400';\n      default: return 'text-gray-400';\n    }\n  };\n\n  const getConflictSeverityColor = (severity: string): string => {\n    switch (severity) {\n      case 'critical': return 'text-red-400';\n      case 'major': return 'text-orange-400';\n      case 'minor': return 'text-yellow-400';\n      default: return 'text-gray-400';\n    }\n  };\n\n  const canApply = selectedModifiers.length > 0 && conflicts.filter(c => c.severity === 'critical').length === 0;\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <TerminalWindow title=\"Heritage Selection\" className=\"h-auto\">\n        <div className=\"space-y-4\">\n          <div className=\"flex justify-between items-center\">\n            <TerminalText className=\"text-cyan-400 text-lg font-bold\">\n              Choose Your Heritage\n            </TerminalText>\n            <TerminalText className=\"text-gray-400\">\n              {selectedModifiers.length} / {maxSelections} selected\n            </TerminalText>\n          </div>\n\n          {/* Tab Navigation */}\n          <div className=\"flex space-x-4 border-b border-gray-600\">\n            {[\n              { id: 'available', label: 'Available Modifiers' },\n              { id: 'selected', label: 'Selected' },\n              { id: 'analysis', label: 'Analysis' }\n            ].map((tab) => (\n              <button\n                key={tab.id}\n                onClick={() => setActiveTab(tab.id as any)}\n                className={`pb-2 px-1 transition-colors ${\n                  activeTab === tab.id\n                    ? 'text-cyan-400 border-b-2 border-cyan-400'\n                    : 'text-gray-400 hover:text-gray-300'\n                }`}\n              >\n                {tab.label}\n              </button>\n            ))}\n          </div>\n\n          {/* Tier Limits Display */}\n          <div className=\"grid grid-cols-4 gap-4 text-sm\">\n            {Object.entries(criteria.tierLimits || {}).map(([tier, limit]) => {\n              const currentCount = selectedModifiers.filter(m => m.tier === tier).length;\n              return (\n                <div key={tier} className=\"text-center\">\n                  <TerminalText className={getTierColor(tier as HeritageTier)}>\n                    {tier}\n                  </TerminalText>\n                  <TerminalText className=\"text-gray-400\">\n                    {currentCount} / {limit}\n                  </TerminalText>\n                </div>\n              );\n            })}\n          </div>\n        </div>\n      </TerminalWindow>\n\n      {/* Content Area */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        <TerminalWindow\n          title={\n            activeTab === 'available' ? 'Available Modifiers' :\n            activeTab === 'selected' ? 'Selected Modifiers' :\n            'Heritage Analysis'\n          }\n          className=\"h-96\"\n        >\n          <div className=\"space-y-2 overflow-y-auto\">\n            {activeTab === 'available' && (\n              <>\n                {availableModifiers.map((modifier) => {\n                  const isSelected = selectedModifiers.some(m => m.id === modifier.id);\n                  const isSelectable = isModifierSelectable(modifier);\n\n                  return (\n                    <div\n                      key={modifier.id}\n                      onClick={() => isSelectable && toggleModifier(modifier)}\n                      className={`p-3 rounded border transition-colors ${\n                        isSelected\n                          ? 'border-cyan-400 bg-cyan-900/20'\n                          : isSelectable\n                          ? 'border-gray-600 hover:border-gray-500 hover:bg-gray-800/50 cursor-pointer'\n                          : 'border-gray-700 bg-gray-900/50 opacity-50'\n                      }`}\n                    >\n                      <div className=\"flex justify-between items-start mb-2\">\n                        <TerminalText className=\"font-bold text-cyan-400\">\n                          {modifier.name}\n                        </TerminalText>\n                        <TerminalText className={`text-sm ${getTierColor(modifier.tier)}`}>\n                          {modifier.tier}\n                        </TerminalText>\n                      </div>\n\n                      <TerminalText className=\"text-gray-300 text-sm mb-2\">\n                        {modifier.description}\n                      </TerminalText>\n\n                      <div className=\"text-xs space-y-1\">\n                        <TerminalText className=\"text-blue-400\">\n                          Source: {modifier.source.sourceType} from mission #{modifier.source.missionNumber}\n                        </TerminalText>\n\n                        {modifier.resourceModifiers.length > 0 && (\n                          <TerminalText className=\"text-green-400\">\n                            Resource Effects: {modifier.resourceModifiers.length}\n                          </TerminalText>\n                        )}\n\n                        {modifier.populationModifiers.length > 0 && (\n                          <TerminalText className=\"text-yellow-400\">\n                            Population Effects: {modifier.populationModifiers.length}\n                          </TerminalText>\n                        )}\n\n                        {modifier.usageCount > 0 && (\n                          <TerminalText className=\"text-purple-400\">\n                            Used {modifier.usageCount} times ‚Ä¢ Rating: {modifier.playerRating.toFixed(1)}/5\n                          </TerminalText>\n                        )}\n                      </div>\n                    </div>\n                  );\n                })}\n\n                {availableModifiers.length === 0 && (\n                  <TerminalText className=\"text-gray-500 text-center py-8\">\n                    No heritage modifiers available. Complete missions to generate modifiers.\n                  </TerminalText>\n                )}\n              </>\n            )}\n\n            {activeTab === 'selected' && (\n              <>\n                {selectedModifiers.map((modifier) => (\n                  <div\n                    key={modifier.id}\n                    className=\"p-3 rounded border border-cyan-400 bg-cyan-900/20\"\n                  >\n                    <div className=\"flex justify-between items-start mb-2\">\n                      <TerminalText className=\"font-bold text-cyan-400\">\n                        {modifier.name}\n                      </TerminalText>\n                      <button\n                        onClick={() => toggleModifier(modifier)}\n                        className=\"text-red-400 hover:text-red-300 text-sm\"\n                      >\n                        Remove\n                      </button>\n                    </div>\n\n                    <TerminalText className=\"text-gray-300 text-sm mb-2\">\n                      {modifier.description}\n                    </TerminalText>\n\n                    {modifier.startingNarrative.length > 0 && (\n                      <TerminalText className=\"text-blue-400 text-xs italic\">\n                        \"{modifier.startingNarrative[0].text}\"\n                      </TerminalText>\n                    )}\n                  </div>\n                ))}\n\n                {selectedModifiers.length === 0 && (\n                  <TerminalText className=\"text-gray-500 text-center py-8\">\n                    No modifiers selected\n                  </TerminalText>\n                )}\n              </>\n            )}\n\n            {activeTab === 'analysis' && analysis && (\n              <div className=\"space-y-4\">\n                {analysis.recommendations.length > 0 && (\n                  <div>\n                    <TerminalText className=\"text-yellow-400 font-bold mb-2\">\n                      Recommendations\n                    </TerminalText>\n                    {analysis.recommendations.slice(0, 3).map((rec, index) => (\n                      <div key={index} className=\"p-2 border border-gray-600 rounded mb-2\">\n                        <TerminalText className=\"text-cyan-400 font-bold text-sm\">\n                          {rec.modifier.name}\n                        </TerminalText>\n                        <TerminalText className=\"text-gray-400 text-xs\">\n                          Relevance: {(rec.relevanceScore * 100).toFixed(0)}% ‚Ä¢\n                          Balance: {(rec.balanceScore * 100).toFixed(0)}% ‚Ä¢\n                          Narrative: {(rec.narrativeScore * 100).toFixed(0)}%\n                        </TerminalText>\n                        <TerminalText className=\"text-green-400 text-xs\">\n                          {rec.reasoning.join(' ‚Ä¢ ')}\n                        </TerminalText>\n                      </div>\n                    ))}\n                  </div>\n                )}\n\n                {analysis.warnings.length > 0 && (\n                  <div>\n                    <TerminalText className=\"text-orange-400 font-bold mb-2\">\n                      Warnings\n                    </TerminalText>\n                    {analysis.warnings.map((warning, index) => (\n                      <TerminalText key={index} className=\"text-orange-400 text-sm\">\n                        ‚Ä¢ {warning}\n                      </TerminalText>\n                    ))}\n                  </div>\n                )}\n\n                {analysis.narrativeSummary && (\n                  <div>\n                    <TerminalText className=\"text-purple-400 font-bold mb-2\">\n                      Narrative Summary\n                    </TerminalText>\n                    <TerminalText className=\"text-gray-300 text-sm italic\">\n                      {analysis.narrativeSummary}\n                    </TerminalText>\n                  </div>\n                )}\n              </div>\n            )}\n          </div>\n        </TerminalWindow>\n\n        {/* Conflicts and Actions */}\n        <TerminalWindow title=\"Selection Status\" className=\"h-96\">\n          <div className=\"space-y-4\">\n            {/* Conflicts */}\n            {conflicts.length > 0 && (\n              <div>\n                <TerminalText className=\"text-red-400 font-bold mb-2\">\n                  Conflicts Detected\n                </TerminalText>\n                <div className=\"space-y-2\">\n                  {conflicts.map((conflict, index) => (\n                    <div key={index} className=\"p-2 border border-red-600 rounded\">\n                      <TerminalText className={`text-sm ${getConflictSeverityColor(conflict.severity)}`}>\n                        {conflict.conflictType} ({conflict.severity})\n                      </TerminalText>\n                      <TerminalText className=\"text-gray-400 text-xs\">\n                        {conflict.resolution}\n                      </TerminalText>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            )}\n\n            {/* Selected Effects Preview */}\n            {selectedModifiers.length > 0 && (\n              <div className=\"border-t border-gray-600 pt-4\">\n                <TerminalText className=\"text-green-400 font-bold mb-2\">\n                  Combined Effects Preview\n                </TerminalText>\n                <div className=\"space-y-1 text-sm\">\n                  <TerminalText className=\"text-gray-400\">\n                    Resource Modifiers: {selectedModifiers.reduce((sum, m) => sum + m.resourceModifiers.length, 0)}\n                  </TerminalText>\n                  <TerminalText className=\"text-gray-400\">\n                    Population Effects: {selectedModifiers.reduce((sum, m) => sum + m.populationModifiers.length, 0)}\n                  </TerminalText>\n                  <TerminalText className=\"text-gray-400\">\n                    Event Modifiers: {selectedModifiers.reduce((sum, m) => sum + m.eventModifiers.length, 0)}\n                  </TerminalText>\n                </div>\n              </div>\n            )}\n\n            {/* Apply Button */}\n            <div className=\"border-t border-gray-600 pt-4\">\n              <button\n                onClick={() => onApply(selectedModifiers)}\n                disabled={!canApply}\n                className={`w-full px-4 py-3 rounded font-bold transition-colors ${\n                  canApply\n                    ? 'bg-green-900/30 border-2 border-green-400 text-green-400 hover:bg-green-800/30'\n                    : 'bg-gray-900/30 border-2 border-gray-600 text-gray-500 cursor-not-allowed'\n                }`}\n              >\n                {canApply ? 'Apply Heritage Modifiers' : 'Resolve Conflicts First'}\n              </button>\n\n              {selectedModifiers.length === 0 && (\n                <TerminalText className=\"text-gray-500 text-center text-sm mt-2\">\n                  Select at least one modifier to continue\n                </TerminalText>\n              )}\n            </div>\n          </div>\n        </TerminalWindow>\n      </div>\n    </div>\n  );\n};","usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\components\\common\\ErrorBoundary.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\components\\game\\CrewQuarters.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\components\\game\\CulturalEvolution.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":9,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":9,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[442,445],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[442,445],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport type { CulturalEvolution } from '../../types/generationalMissions';\r\nimport type { LegacyTypeType } from '../../types/enums';\r\nimport { TerminalWindow, TerminalText, TerminalButton, TerminalProgress } from '../ui/TerminalWindow';\r\n\r\ninterface CulturalEvolutionProps {\r\n  culturalEvolution: CulturalEvolution[];\r\n  currentGeneration: number;\r\n  onCulturalAction?: (action: string, parameters?: any) => void;\r\n}\r\n\r\nexport const CulturalEvolutionComponent: React.FC<CulturalEvolutionProps> = ({\r\n  culturalEvolution,\r\n  currentGeneration,\r\n  onCulturalAction\r\n}) => {\r\n  const [selectedLegacy, setSelectedLegacy] = useState<LegacyTypeType | null>(null);\r\n  const [activeTab, setActiveTab] = useState<'timeline' | 'trends' | 'analysis' | 'decisions'>('timeline');\r\n\r\n  const legacyInfo = {\r\n    preservers: {\r\n      name: 'The Preservers',\r\n      color: 'text-cyan-400',\r\n      bgColor: 'bg-gray-800',\r\n      baseline: 'Traditional Human Culture'\r\n    },\r\n    adaptors: {\r\n      name: 'The Adaptors',\r\n      color: 'text-green-400',\r\n      bgColor: 'bg-gray-800',\r\n      baseline: 'Enhanced Human Potential'\r\n    },\r\n    wanderers: {\r\n      name: 'The Wanderers',\r\n      color: 'text-amber-400',\r\n      bgColor: 'bg-gray-800',\r\n      baseline: 'Nomadic Freedom Culture'\r\n    }\r\n  };\r\n\r\n  const getDeviationColor = (deviation: number) => {\r\n    const absDeviation = Math.abs(deviation);\r\n    if (absDeviation > 75) return 'text-red-400';\r\n    if (absDeviation > 50) return 'text-orange-400';\r\n    if (absDeviation > 25) return 'text-yellow-400';\r\n    return 'text-green-400';\r\n  };\r\n\r\n  const getDeviationDescription = (deviation: number) => {\r\n    const absDeviation = Math.abs(deviation);\r\n    const direction = deviation > 0 ? 'Progressive' : 'Conservative';\r\n\r\n    if (absDeviation > 75) return `Extreme ${direction} Shift`;\r\n    if (absDeviation > 50) return `Major ${direction} Change`;\r\n    if (absDeviation > 25) return `Moderate ${direction} Drift`;\r\n    return 'Minimal Change';\r\n  };\r\n\r\n  const getImpactIcon = (impact: number) => {\r\n    if (impact > 50) return 'üåü'; // High impact\r\n    if (impact > 25) return '‚≠ê'; // Medium impact\r\n    return '‚ú®'; // Low impact\r\n  };\r\n\r\n  const renderOverview = () => (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n        {culturalEvolution.map((evolution) => {\r\n          const info = legacyInfo[evolution.legacy];\r\n          const totalChanges = evolution.majorChanges.length;\r\n          const permanentChanges = evolution.majorChanges.filter(c => c.isPermanent).length;\r\n\r\n          return (\r\n            <div\r\n              key={evolution.legacy}\r\n              className=\"cursor-pointer hover:opacity-80 transition-opacity\"\r\n              onClick={() => setSelectedLegacy(evolution.legacy)}\r\n            >\r\n              <TerminalWindow\r\n                title={`${info.name} - GEN ${currentGeneration}`}\r\n                className=\"h-full\"\r\n              >\r\n                <TerminalText className=\"mb-2 text-xs\">\r\n                  ‚îå BASELINE: {info.baseline}\r\n                </TerminalText>\r\n\r\n                <div className=\"mb-3\">\r\n                  <div className=\"flex justify-between mb-1\">\r\n                    <TerminalText className=\"text-xs\">CULTURAL DRIFT:</TerminalText>\r\n                    <TerminalText className={`text-xs font-mono ${getDeviationColor(evolution.baselineDeviation)}`}>\r\n                      {evolution.baselineDeviation > 0 ? '+' : ''}{evolution.baselineDeviation}%\r\n                    </TerminalText>\r\n                  </div>\r\n                  <TerminalProgress\r\n                    value={Math.abs(evolution.baselineDeviation)}\r\n                    max={100}\r\n                    variant={\r\n                      Math.abs(evolution.baselineDeviation) > 50 ? 'error' :\r\n                      Math.abs(evolution.baselineDeviation) > 25 ? 'warning' : 'success'\r\n                    }\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"space-y-1 mb-3\">\r\n                  <div className=\"flex justify-between\">\r\n                    <TerminalText className=\"text-xs\">‚îú TOTAL CHANGES:</TerminalText>\r\n                    <TerminalText className=\"text-xs font-mono text-amber-400\">{totalChanges}</TerminalText>\r\n                  </div>\r\n                  <div className=\"flex justify-between\">\r\n                    <TerminalText className=\"text-xs\">‚îú PERMANENT:</TerminalText>\r\n                    <TerminalText className=\"text-xs font-mono text-green-400\">{permanentChanges}</TerminalText>\r\n                  </div>\r\n                  <TerminalText className=\"text-xs text-gray-400\">\r\n                    ‚îî {getDeviationDescription(evolution.baselineDeviation)}\r\n                  </TerminalText>\r\n                </div>\r\n\r\n                {evolution.currentTrends.length > 0 && (\r\n                  <div className=\"border-t border-gray-600 pt-2\">\r\n                    <TerminalText className=\"text-xs text-cyan-400\">\r\n                      ‚ñ∂ ACTIVE: {evolution.currentTrends[0]}\r\n                    </TerminalText>\r\n                  </div>\r\n                )}\r\n              </TerminalWindow>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n\r\n      <TerminalWindow title=\"‚ü° CULTURAL EVOLUTION SUMMARY\">\r\n        <div className=\"grid grid-cols-3 gap-6 text-center\">\r\n          <div>\r\n            <TerminalText className=\"text-xl font-mono text-cyan-400\">\r\n              {culturalEvolution.reduce((sum, e) => sum + e.majorChanges.length, 0)}\r\n            </TerminalText>\r\n            <TerminalText className=\"text-xs text-gray-400\">TOTAL CHANGES</TerminalText>\r\n          </div>\r\n          <div>\r\n            <TerminalText className=\"text-xl font-mono text-green-400\">\r\n              {culturalEvolution.reduce((sum, e) => sum + e.majorChanges.filter(c => c.isPermanent).length, 0)}\r\n            </TerminalText>\r\n            <TerminalText className=\"text-xs text-gray-400\">PERMANENT ADAPTATIONS</TerminalText>\r\n          </div>\r\n          <div>\r\n            <TerminalText className=\"text-xl font-mono text-amber-400\">\r\n              {culturalEvolution.reduce((sum, e) => sum + e.currentTrends.length, 0)}\r\n            </TerminalText>\r\n            <TerminalText className=\"text-xs text-gray-400\">ACTIVE TRENDS</TerminalText>\r\n          </div>\r\n        </div>\r\n      </TerminalWindow>\r\n    </div>\r\n  );\r\n\r\n  const renderLegacyDetail = () => {\r\n    if (!selectedLegacy) return null;\r\n\r\n    const evolution = culturalEvolution.find(e => e.legacy === selectedLegacy);\r\n    if (!evolution) return null;\r\n\r\n    const info = legacyInfo[selectedLegacy];\r\n\r\n    return (\r\n      <TerminalWindow title={`${info.name} - CULTURAL EVOLUTION ANALYSIS`}>\r\n        <div className=\"flex items-center justify-between mb-4\">\r\n          <TerminalText className=\"text-cyan-400\">DETAILED ANALYSIS</TerminalText>\r\n          <TerminalButton\r\n            onClick={() => setSelectedLegacy(null)}\r\n            variant=\"warning\"\r\n            className=\"text-xs\"\r\n          >\r\n            ‚Üê BACK\r\n          </TerminalButton>\r\n        </div>\r\n\r\n        <div className=\"flex space-x-2 mb-6\">\r\n          {(['timeline', 'trends', 'analysis', 'decisions'] as const).map((tab) => (\r\n            <TerminalButton\r\n              key={tab}\r\n              onClick={() => setActiveTab(tab)}\r\n              variant={activeTab === tab ? 'primary' : 'error'}\r\n              className=\"uppercase text-xs\"\r\n            >\r\n              {tab}\r\n            </TerminalButton>\r\n          ))}\r\n        </div>\r\n\r\n        <div className=\"terminal-content\">\r\n          {renderTabContent(evolution)}\r\n        </div>\r\n      </TerminalWindow>\r\n    );\r\n  };\r\n\r\n  const renderTabContent = (evolution: CulturalEvolution) => {\r\n    switch (activeTab) {\r\n      case 'timeline':\r\n        return renderTimelineTab(evolution);\r\n      case 'trends':\r\n        return renderTrendsTab(evolution);\r\n      case 'analysis':\r\n        return renderAnalysisTab(evolution);\r\n      case 'decisions':\r\n        return renderDecisionsTab(evolution);\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  const renderTimelineTab = (evolution: CulturalEvolution) => (\r\n    <TerminalWindow title=\"CULTURAL TIMELINE\" statusLine=\"CHRONOLOGICAL ANALYSIS\">\r\n      <div className=\"space-y-3\">\r\n        {evolution.majorChanges\r\n          .sort((a, b) => a.generation - b.generation)\r\n          .map((change) => (\r\n            <div key={change.id} className=\"border-l-2 border-terminal-secondary pl-4 relative\">\r\n              <div className=\"absolute -left-2 top-1 w-3 h-3 bg-terminal-secondary rounded-full\" />\r\n              <div className=\"mb-2\">\r\n                <div className=\"flex items-center justify-between\">\r\n                  <TerminalText variant=\"primary\" className=\"font-mono\">\r\n                    {change.name.toUpperCase()}\r\n                  </TerminalText>\r\n                  <div className=\"flex items-center space-x-2\">\r\n                    <TerminalText variant=\"dim\" className=\"text-xs\">\r\n                      GEN {change.generation}\r\n                    </TerminalText>\r\n                    <TerminalText className=\"text-lg\">\r\n                      {getImpactIcon(change.impact)}\r\n                    </TerminalText>\r\n                    {change.isPermanent && (\r\n                      <TerminalText variant=\"success\" className=\"text-xs border border-terminal-success px-1\">\r\n                        [PERMANENT]\r\n                      </TerminalText>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n                <TerminalText variant=\"secondary\" className=\"text-sm mt-1\">\r\n                  {change.description}\r\n                </TerminalText>\r\n                <div className=\"mt-2\">\r\n                  <TerminalText variant=\"dim\" className=\"text-xs\">\r\n                    CULTURAL IMPACT: <span className={getDeviationColor(change.impact)}>\r\n                      {change.impact > 0 ? '+' : ''}{change.impact}%\r\n                    </span>\r\n                  </TerminalText>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n      </div>\r\n    </TerminalWindow>\r\n  );\r\n\r\n  const renderTrendsTab = (evolution: CulturalEvolution) => (\r\n    <div className=\"space-y-4\">\r\n      <TerminalWindow title=\"CURRENT TRENDS\" statusLine=\"ACTIVE MONITORING\">\r\n        {evolution.currentTrends.length > 0 ? (\r\n          <div className=\"space-y-3\">\r\n            {evolution.currentTrends.map((trend, index) => (\r\n              <div key={index} className=\"border-l-4 border-terminal-success pl-3\">\r\n                <TerminalText variant=\"primary\" className=\"font-mono mb-1\">\r\n                  ‚ñ∂ {trend.toUpperCase()}\r\n                </TerminalText>\r\n                <TerminalText variant=\"secondary\" className=\"text-sm\">\r\n                  TREND ACTIVE IN GENERATION {currentGeneration}\r\n                </TerminalText>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        ) : (\r\n          <TerminalText variant=\"dim\">NO MAJOR CULTURAL TRENDS DETECTED</TerminalText>\r\n        )}\r\n      </TerminalWindow>\r\n\r\n      <TerminalWindow title=\"TREND PREDICTIONS\" statusLine=\"PROBABILITY ANALYSIS\">\r\n        <div className=\"space-y-3\">\r\n          <div className=\"border border-terminal-border p-3\">\r\n            <TerminalText variant=\"primary\" className=\"font-mono mb-1\">\r\n              TECHNOLOGICAL INTEGRATION\r\n            </TerminalText>\r\n            <TerminalText variant=\"secondary\" className=\"text-sm\">\r\n              LIKELIHOOD: <TerminalText variant=\"warning\" className=\"inline\">75%</TerminalText> -\r\n              EXPECTED IMPACT ON HUMAN-MACHINE INTERACTION NORMS\r\n            </TerminalText>\r\n          </div>\r\n          <div className=\"border border-terminal-border p-3\">\r\n            <TerminalText variant=\"primary\" className=\"font-mono mb-1\">\r\n              GENERATIONAL VALUES SHIFT\r\n            </TerminalText>\r\n            <TerminalText variant=\"secondary\" className=\"text-sm\">\r\n              LIKELIHOOD: <TerminalText variant=\"primary\" className=\"inline\">60%</TerminalText> -\r\n              NEW GENERATION MAY DEVELOP DIFFERENT PRIORITIES\r\n            </TerminalText>\r\n          </div>\r\n          <div className=\"border border-terminal-border p-3\">\r\n            <TerminalText variant=\"primary\" className=\"font-mono mb-1\">\r\n              RESOURCE SCARCITY ADAPTATION\r\n            </TerminalText>\r\n            <TerminalText variant=\"secondary\" className=\"text-sm\">\r\n              LIKELIHOOD: <TerminalText variant=\"error\" className=\"inline\">45%</TerminalText> -\r\n              CULTURAL PRACTICES MAY EVOLVE BASED ON RESOURCES\r\n            </TerminalText>\r\n          </div>\r\n        </div>\r\n      </TerminalWindow>\r\n    </div>\r\n  );\r\n\r\n  const renderAnalysisTab = (evolution: CulturalEvolution) => {\r\n    const totalImpact = evolution.majorChanges.reduce((sum, change) => sum + Math.abs(change.impact), 0);\r\n    const averageImpact = evolution.majorChanges.length > 0 ? totalImpact / evolution.majorChanges.length : 0;\r\n\r\n    return (\r\n      <div className=\"space-y-4\">\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n          <TerminalWindow title=\"CULTURAL METRICS\" statusLine=\"STATISTICAL ANALYSIS\">\r\n            <div className=\"space-y-2\">\r\n              <div className=\"flex justify-between\">\r\n                <TerminalText variant=\"dim\">BASELINE DEVIATION:</TerminalText>\r\n                <TerminalText className={getDeviationColor(evolution.baselineDeviation)}>\r\n                  {evolution.baselineDeviation > 0 ? '+' : ''}{evolution.baselineDeviation}%\r\n                </TerminalText>\r\n              </div>\r\n              <div className=\"flex justify-between\">\r\n                <TerminalText variant=\"dim\">TOTAL CHANGES:</TerminalText>\r\n                <TerminalText variant=\"primary\">{evolution.majorChanges.length}</TerminalText>\r\n              </div>\r\n              <div className=\"flex justify-between\">\r\n                <TerminalText variant=\"dim\">AVERAGE IMPACT:</TerminalText>\r\n                <TerminalText variant=\"primary\">{averageImpact.toFixed(1)}%</TerminalText>\r\n              </div>\r\n              <div className=\"flex justify-between\">\r\n                <TerminalText variant=\"dim\">PERMANENT SHIFTS:</TerminalText>\r\n                <TerminalText variant=\"success\">\r\n                  {evolution.majorChanges.filter(c => c.isPermanent).length}\r\n                </TerminalText>\r\n              </div>\r\n            </div>\r\n          </TerminalWindow>\r\n\r\n          <TerminalWindow title=\"CULTURAL HEALTH\" statusLine=\"STABILITY MONITOR\">\r\n            <div className=\"space-y-3\">\r\n              <div>\r\n                <div className=\"flex justify-between mb-1\">\r\n                  <TerminalText variant=\"dim\">STABILITY:</TerminalText>\r\n                  <TerminalText variant={Math.abs(evolution.baselineDeviation) < 25 ? 'success' :\r\n                    Math.abs(evolution.baselineDeviation) < 50 ? 'warning' : 'error'}>\r\n                    {Math.abs(evolution.baselineDeviation) < 25 ? 'STABLE' :\r\n                     Math.abs(evolution.baselineDeviation) < 50 ? 'SHIFTING' : 'UNSTABLE'}\r\n                  </TerminalText>\r\n                </div>\r\n                <TerminalProgress\r\n                  value={Math.min(100, 100 - Math.abs(evolution.baselineDeviation))}\r\n                  max={100}\r\n                  variant={Math.abs(evolution.baselineDeviation) < 25 ? 'success' :\r\n                    Math.abs(evolution.baselineDeviation) < 50 ? 'warning' : 'error'}\r\n                  ascii={true}\r\n                />\r\n              </div>\r\n              <TerminalText variant=\"secondary\" className=\"text-sm\">\r\n                {Math.abs(evolution.baselineDeviation) < 25\r\n                  ? 'CULTURE REMAINS CLOSE TO FOUNDING PRINCIPLES'\r\n                  : Math.abs(evolution.baselineDeviation) < 50\r\n                  ? 'MODERATE DRIFT FROM ORIGINAL CULTURE'\r\n                  : 'SIGNIFICANT CULTURAL TRANSFORMATION OCCURRING'}\r\n              </TerminalText>\r\n            </div>\r\n          </TerminalWindow>\r\n        </div>\r\n\r\n        <TerminalWindow title=\"RISK ASSESSMENT\" statusLine=\"THREAT ANALYSIS\">\r\n          <div className=\"space-y-3\">\r\n            {Math.abs(evolution.baselineDeviation) > 75 && (\r\n              <div className=\"border border-terminal-error p-3 bg-terminal-error bg-opacity-10\">\r\n                <TerminalText variant=\"error\" className=\"font-mono mb-1\">\r\n                  [CRITICAL] CULTURAL DRIFT\r\n                </TerminalText>\r\n                <TerminalText variant=\"secondary\" className=\"text-sm\">\r\n                  CULTURE HAS DEVIATED SIGNIFICANTLY FROM BASELINE. RISK OF IDENTITY CRISIS.\r\n                </TerminalText>\r\n              </div>\r\n            )}\r\n            {evolution.majorChanges.filter(c => !c.isPermanent).length > 3 && (\r\n              <div className=\"border border-terminal-warning p-3 bg-terminal-warning bg-opacity-10\">\r\n                <TerminalText variant=\"warning\" className=\"font-mono mb-1\">\r\n                  [WARNING] CULTURAL INSTABILITY\r\n                </TerminalText>\r\n                <TerminalText variant=\"secondary\" className=\"text-sm\">\r\n                  MULTIPLE TEMPORARY CHANGES SUGGEST UNCERTAINTY. CONSIDER STABILIZING MEASURES.\r\n                </TerminalText>\r\n              </div>\r\n            )}\r\n            {evolution.currentTrends.length === 0 && (\r\n              <div className=\"border border-terminal-primary p-3 bg-terminal-primary bg-opacity-10\">\r\n                <TerminalText variant=\"primary\" className=\"font-mono mb-1\">\r\n                  [INFO] CULTURAL STAGNATION\r\n                </TerminalText>\r\n                <TerminalText variant=\"secondary\" className=\"text-sm\">\r\n                  NO ACTIVE CULTURAL TRENDS. SOCIETY MAY BENEFIT FROM CULTURAL INITIATIVES.\r\n                </TerminalText>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </TerminalWindow>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const renderDecisionsTab = (evolution: CulturalEvolution) => {\r\n    if (!onCulturalAction) {\r\n      return (\r\n        <TerminalWindow title=\"CULTURAL DECISIONS\" statusLine=\"SYSTEM UNAVAILABLE\">\r\n          <TerminalText variant=\"dim\" className=\"text-center py-4\">\r\n            CULTURAL DECISION SYSTEM NOT AVAILABLE\r\n          </TerminalText>\r\n        </TerminalWindow>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div className=\"space-y-4\">\r\n        <TerminalWindow title=\"CULTURAL GUIDANCE\" statusLine=\"POLICY MANAGEMENT\">\r\n          <TerminalText variant=\"secondary\" className=\"mb-4\">\r\n            SHAPE THE CULTURAL EVOLUTION OF YOUR CIVILIZATION THROUGH DELIBERATE ACTIONS\r\n          </TerminalText>\r\n          <div className=\"grid grid-cols-2 gap-3\">\r\n            <TerminalButton\r\n              onClick={() => onCulturalAction('preserve_traditions', { legacy: evolution.legacy })}\r\n              variant=\"primary\"\r\n            >\r\n              PRESERVE TRADITIONS\r\n            </TerminalButton>\r\n            <TerminalButton\r\n              onClick={() => onCulturalAction('encourage_innovation', { legacy: evolution.legacy })}\r\n              variant=\"success\"\r\n            >\r\n              ENCOURAGE INNOVATION\r\n            </TerminalButton>\r\n            <TerminalButton\r\n              onClick={() => onCulturalAction('cultural_festival', { legacy: evolution.legacy })}\r\n              variant=\"primary\"\r\n            >\r\n              CULTURAL FESTIVAL\r\n            </TerminalButton>\r\n            <TerminalButton\r\n              onClick={() => onCulturalAction('generational_dialogue', { legacy: evolution.legacy })}\r\n              variant=\"warning\"\r\n            >\r\n              GENERATIONAL DIALOGUE\r\n            </TerminalButton>\r\n          </div>\r\n        </TerminalWindow>\r\n\r\n        <TerminalWindow title=\"STABILIZATION ACTIONS\" statusLine=\"CULTURAL CONTROL\">\r\n          <div className=\"space-y-3\">\r\n            <div \r\n              className=\"border border-terminal-border p-3 cursor-pointer hover:border-terminal-primary transition-colors\"\r\n              onClick={() => onCulturalAction('cultural_census', { legacy: evolution.legacy })}\r\n            >\r\n              <TerminalText variant=\"primary\" className=\"font-mono mb-1\">\r\n                ‚ñ∂ CULTURAL CENSUS\r\n              </TerminalText>\r\n              <TerminalText variant=\"dim\" className=\"text-xs\">\r\n                ASSESS CURRENT CULTURAL STATE AND TRENDS\r\n              </TerminalText>\r\n            </div>\r\n            <div \r\n              className=\"border border-terminal-border p-3 cursor-pointer hover:border-terminal-primary transition-colors\"\r\n              onClick={() => onCulturalAction('cultural_education', { legacy: evolution.legacy })}\r\n            >\r\n              <TerminalText variant=\"primary\" className=\"font-mono mb-1\">\r\n                ‚ñ∂ CULTURAL EDUCATION PROGRAM\r\n              </TerminalText>\r\n              <TerminalText variant=\"dim\" className=\"text-xs\">\r\n                REINFORCE CORE VALUES AND BELIEFS\r\n              </TerminalText>\r\n            </div>\r\n            <div \r\n              className=\"border border-terminal-border p-3 cursor-pointer hover:border-terminal-primary transition-colors\"\r\n              onClick={() => onCulturalAction('cultural_reform', { legacy: evolution.legacy })}\r\n            >\r\n              <TerminalText variant=\"primary\" className=\"font-mono mb-1\">\r\n                ‚ñ∂ CULTURAL REFORM INITIATIVE\r\n              </TerminalText>\r\n              <TerminalText variant=\"dim\" className=\"text-xs\">\r\n                ACTIVELY GUIDE CULTURAL DEVELOPMENT\r\n              </TerminalText>\r\n            </div>\r\n          </div>\r\n        </TerminalWindow>\r\n\r\n        {Math.abs(evolution.baselineDeviation) > 50 && (\r\n          <TerminalWindow title=\"EMERGENCY MEASURES\" statusLine=\"CRITICAL ALERT\" className=\"border-terminal-error\">\r\n            <TerminalText variant=\"error\" className=\"mb-3 text-sm\">\r\n              HIGH CULTURAL DEVIATION DETECTED. CONSIDER EMERGENCY STABILIZATION MEASURES.\r\n            </TerminalText>\r\n            <div className=\"space-y-3\">\r\n              <div \r\n                className=\"border border-terminal-error p-3 cursor-pointer hover:bg-terminal-error hover:bg-opacity-10 transition-colors\"\r\n                onClick={() => onCulturalAction('cultural_restoration', { legacy: evolution.legacy })}\r\n              >\r\n                <TerminalText variant=\"error\" className=\"font-mono mb-1\">\r\n                  ‚ö† CULTURAL RESTORATION\r\n                </TerminalText>\r\n                <TerminalText variant=\"dim\" className=\"text-xs\">\r\n                  ATTEMPT TO RETURN TO BASELINE CULTURE\r\n                </TerminalText>\r\n              </div>\r\n              <div \r\n                className=\"border border-terminal-warning p-3 cursor-pointer hover:bg-terminal-warning hover:bg-opacity-10 transition-colors\"\r\n                onClick={() => onCulturalAction('accept_evolution', { legacy: evolution.legacy })}\r\n              >\r\n                <TerminalText variant=\"warning\" className=\"font-mono mb-1\">\r\n                  ‚ö° ACCEPT EVOLUTION\r\n                </TerminalText>\r\n                <TerminalText variant=\"dim\" className=\"text-xs\">\r\n                  EMBRACE THE CULTURAL CHANGE AS NEW BASELINE\r\n                </TerminalText>\r\n              </div>\r\n            </div>\r\n          </TerminalWindow>\r\n        )}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <TerminalWindow title=\"‚ü° CULTURAL EVOLUTION\">\r\n      <TerminalText className=\"mb-4\">\r\n        Track how your civilization's culture evolves and adapts across generations of space travel.\r\n      </TerminalText>\r\n\r\n      {selectedLegacy ? renderLegacyDetail() : renderOverview()}\r\n    </TerminalWindow>\r\n  );\r\n};\r\n\r\nexport default CulturalEvolutionComponent;","usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\components\\game\\Dashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\components\\game\\DynastyHall.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\components\\game\\LegacyRelations.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\components\\game\\ShipBuilder.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\components\\game\\TerminalDashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\components\\game\\crew\\CrewActions.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\components\\game\\crew\\CrewGrid.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\components\\game\\dashboard\\CrewSummary.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\components\\game\\dashboard\\EmpireOverview.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useMemo has a missing dependency: 'legacy'. Either include it or remove the dependency array.","line":18,"column":6,"nodeType":"ArrayExpression","endLine":18,"endColumn":52,"suggestions":[{"desc":"Update the dependencies array to be: [starSystems, legacy, captain?.age]","fix":{"range":[705,751],"text":"[starSystems, legacy, captain?.age]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// components/game/dashboard/EmpireOverview.tsx\r\nimport React, { useMemo } from 'react';\r\nimport { useGameStore } from '../../../stores/useGameStore';\r\nimport Card from '../../ui/Card';\r\nimport { GameEngine } from '../../../services/GameEngine';\r\nimport { UI_CONSTANTS } from '../../../constants/uiConstants';\r\n\r\nconst EmpireOverview: React.FC = React.memo(() => {\r\n  const { starSystems, legacy } = useGameStore();\r\n  const captain = useGameStore(state => state.crew.find(c => c.role === 'Captain'));\r\n\r\n  const stats = useMemo(() => {\r\n    const empireStats = GameEngine.calculateEmpireStats(starSystems, legacy);\r\n    return {\r\n      ...empireStats,\r\n      captainAge: captain?.age || 0,\r\n    };\r\n  }, [starSystems, legacy.generation, captain?.age]);\r\n\r\n  return (\r\n    <Card title=\"Empire Overview\">\r\n      <div className=\"space-y-3\">\r\n        <StatItem label=\"Systems Explored\" value={stats.exploredSystems} />\r\n        <StatItem label=\"Active Colonies\" value={stats.activeColonies} />\r\n        <StatItem label=\"Trade Routes\" value={stats.tradeRoutes} />\r\n        <StatItem label=\"Captain Age\" value={stats.captainAge} />\r\n        <StatItem label=\"Generation\" value={stats.generation} />\r\n      </div>\r\n    </Card>\r\n  );\r\n});\r\n\r\nEmpireOverview.displayName = 'EmpireOverview';\r\n\r\ninterface StatItemProps {\r\n  label: string;\r\n  value: number;\r\n}\r\n\r\nconst StatItem: React.FC<StatItemProps> = ({ label, value }) => (\r\n  <div className={`flex justify-between items-center py-2 border-b ${UI_CONSTANTS.COLORS.BORDER} last:border-b-0`}>\r\n    <span className={UI_CONSTANTS.COLORS.TEXT_SECONDARY}>{label}:</span>\r\n    <span className={`${UI_CONSTANTS.COLORS.TEXT_PRIMARY} font-semibold`}>{value}</span>\r\n  </div>\r\n);\r\n\r\nexport default EmpireOverview;","usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\components\\game\\dashboard\\ShipStatus.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\components\\game\\galaxymap\\GalaxyMap.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\components\\game\\legacy\\Legacy.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\components\\game\\market\\Market.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\components\\game\\missions\\MissionCommandCenter.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":375,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":375,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13922,13925],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13922,13925],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":376,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":376,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13949,13952],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13949,13952],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// components/game/missions/MissionCommandCenter.tsx\r\nimport React, { useState } from 'react';\r\nimport { useGenerationalMissionStore, useActiveEvents } from '../../../stores/useGenerationalMissionStore';\r\nimport { TerminalWindow, TerminalText, TerminalButton, TerminalSelect, TerminalInput, TerminalProgress, TerminalTable } from '../../ui/TerminalWindow';\r\nimport type { GenerationalMission, MissionEvent } from '../../../types/generationalMissions';\r\nimport type { LegacyTypeType, MissionObjectiveType } from '../../../types/enums';\r\n\r\ninterface MissionCommandCenterProps {\r\n  className?: string;\r\n}\r\n\r\nexport const MissionCommandCenter: React.FC<MissionCommandCenterProps> = ({ className = '' }) => {\r\n  const {\r\n    missions,\r\n    activeMissions,\r\n    selectedMission,\r\n    selectMission,\r\n    processMissionTurn,\r\n    createMission,\r\n    resolveEvent,\r\n    selectEvent,\r\n    selectedEventId\r\n  } = useGenerationalMissionStore();\r\n\r\n  const activeEvents = useActiveEvents();\r\n\r\n  const [showCreateMission, setShowCreateMission] = useState(false);\r\n  const [newMissionConfig, setNewMissionConfig] = useState({\r\n    name: '',\r\n    legacy: 'preservers' as LegacyTypeType,\r\n    objective: 'colonization' as MissionObjectiveType,\r\n    targetSystemId: 'system_1',\r\n    estimatedDuration: 200,\r\n    shipClass: 'colony',\r\n    shipSize: 'large',\r\n    populationSize: 25000\r\n  });\r\n\r\n  const activeMissionsList = missions.filter(m => activeMissions.includes(m.id));\r\n  const selectedEvent = activeEvents.find(e => e.id === selectedEventId);\r\n\r\n  const handleCreateMission = () => {\r\n    if (!newMissionConfig.name) return;\r\n\r\n    createMission(newMissionConfig);\r\n    setShowCreateMission(false);\r\n    setNewMissionConfig(prev => ({ ...prev, name: '' }));\r\n  };\r\n\r\n  const handleAdvanceTime = (years: number = 1) => {\r\n    if (!selectedMission) return;\r\n    processMissionTurn(selectedMission.id, years);\r\n  };\r\n\r\n  const handleResolveEvent = (outcomeId: string) => {\r\n    if (!selectedMission || !selectedEvent) return;\r\n    resolveEvent(selectedMission.id, selectedEvent.id, outcomeId);\r\n  };\r\n\r\n  return (\r\n    <TerminalWindow title=\"MISSION COMMAND CENTER\" statusLine=\"OPERATIONAL\" className={className}>\r\n      {/* Header */}\r\n      <div className=\"terminal-flex between mb-6\">\r\n        <TerminalText variant=\"bright\">GENERATIONAL OPERATIONS CONTROL</TerminalText>\r\n        <TerminalButton\r\n          onClick={() => setShowCreateMission(true)}\r\n          variant=\"success\"\r\n        >\r\n          LAUNCH NEW MISSION\r\n        </TerminalButton>\r\n      </div>\r\n\r\n      <div className=\"terminal-grid cols-3\">\r\n        {/* Mission List */}\r\n        <TerminalWindow title=\"ACTIVE MISSIONS\" statusLine={`${activeMissionsList.length} OPERATIONS`}>\r\n          <div className=\"terminal-space-y max-h-96 overflow-y-auto\">\r\n            {activeMissionsList.length === 0 ? (\r\n              <TerminalText variant=\"dim\">NO ACTIVE MISSIONS</TerminalText>\r\n            ) : (\r\n              activeMissionsList.map(mission => (\r\n                <TerminalMissionCard\r\n                  key={mission.id}\r\n                  mission={mission}\r\n                  isSelected={selectedMission?.id === mission.id}\r\n                  onSelect={() => selectMission(mission.id)}\r\n                />\r\n              ))\r\n            )}\r\n          </div>\r\n        </TerminalWindow>\r\n\r\n        {/* Mission Details */}\r\n        <TerminalWindow title=\"MISSION DETAILS\" statusLine={selectedMission ? \"ANALYZING\" : \"STANDBY\"}>\r\n          {selectedMission ? (\r\n            <TerminalMissionDetails\r\n              mission={selectedMission}\r\n              onAdvanceTime={handleAdvanceTime}\r\n            />\r\n          ) : (\r\n            <TerminalText variant=\"dim\">SELECT A MISSION TO VIEW DETAILS</TerminalText>\r\n          )}\r\n        </TerminalWindow>\r\n\r\n        {/* Events & Actions */}\r\n        <TerminalWindow title=\"EVENTS & ACTIONS\" statusLine={activeEvents.length > 0 ? \"ATTENTION REQUIRED\" : \"MONITORING\"}>\r\n          {selectedMission ? (\r\n            <TerminalEventsPanel\r\n              mission={selectedMission}\r\n              events={activeEvents}\r\n              selectedEvent={selectedEvent}\r\n              onSelectEvent={selectEvent}\r\n              onResolveEvent={handleResolveEvent}\r\n            />\r\n          ) : (\r\n            <TerminalText variant=\"dim\">SELECT A MISSION TO MANAGE EVENTS</TerminalText>\r\n          )}\r\n        </TerminalWindow>\r\n      </div>\r\n\r\n      {/* Create Mission Terminal */}\r\n      {showCreateMission && (\r\n        <TerminalCreateMission\r\n          config={newMissionConfig}\r\n          onChange={setNewMissionConfig}\r\n          onConfirm={handleCreateMission}\r\n          onCancel={() => setShowCreateMission(false)}\r\n        />\r\n      )}\r\n    </TerminalWindow>\r\n  );\r\n};\r\n\r\n// Terminal Mission Card Component\r\nconst TerminalMissionCard: React.FC<{\r\n  mission: GenerationalMission;\r\n  isSelected: boolean;\r\n  onSelect: () => void;\r\n}> = ({ mission, isSelected, onSelect }) => {\r\n  const progressPercentage = (mission.currentYear / mission.estimatedDuration) * 100;\r\n  const hasUrgentEvents = mission.activeEvents.some(e => e.requiresPlayerDecision);\r\n\r\n  return (\r\n    <div\r\n      onClick={onSelect}\r\n      className={`terminal-list-item selectable ${\r\n        isSelected ? 'selected' : ''\r\n      } ${\r\n        hasUrgentEvents ? 'alert' : ''\r\n      }`}\r\n      style={{ cursor: 'pointer', padding: '0.75rem', border: isSelected ? '1px solid var(--terminal-primary)' : '1px solid var(--terminal-border)' }}\r\n    >\r\n      <div className=\"terminal-flex between\">\r\n        <div className=\"flex-1\">\r\n          <TerminalText variant={isSelected ? 'bright' : 'primary'}>\r\n            {mission.name.toUpperCase()}\r\n          </TerminalText>\r\n          <div className=\"terminal-text dim\">\r\n            {mission.legacy.toUpperCase()} ‚Ä¢ {mission.objective.toUpperCase()}\r\n          </div>\r\n          <div className=\"terminal-text dim\">\r\n            YEAR {mission.currentYear}/{mission.estimatedDuration}\r\n          </div>\r\n\r\n          {/* Progress Bar */}\r\n          <TerminalProgress\r\n            value={progressPercentage}\r\n            max={100}\r\n            ascii\r\n            variant=\"primary\"\r\n          />\r\n        </div>\r\n\r\n        {hasUrgentEvents && (\r\n          <TerminalText variant=\"error\" glow>\r\n            [!]\r\n          </TerminalText>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Terminal Mission Details Component\r\nconst TerminalMissionDetails: React.FC<{\r\n  mission: GenerationalMission;\r\n  onAdvanceTime: (years: number) => void;\r\n}> = ({ mission, onAdvanceTime }) => {\r\n  const populationSurvivalRate = (mission.population.total / mission.ship.populationCapacity) * 100;\r\n\r\n  return (\r\n    <div className=\"terminal-space-y\">\r\n      {/* Key Metrics */}\r\n      <div>\r\n        <TerminalText variant=\"bright\">MISSION PARAMETERS:</TerminalText>\r\n        <TerminalTable\r\n          headers={['PARAMETER', 'VALUE', 'STATUS']}\r\n          rows={[\r\n            [\r\n              'POPULATION',\r\n              mission.population.total.toLocaleString(),\r\n              <TerminalText variant={populationSurvivalRate > 90 ? 'success' : populationSurvivalRate > 70 ? 'warning' : 'error'}>\r\n                {populationSurvivalRate.toFixed(1)}% SURVIVAL\r\n              </TerminalText>\r\n            ],\r\n            [\r\n              'MISSION PROGRESS',\r\n              `${mission.phaseProgress}%`,\r\n              <TerminalText variant=\"primary\">\r\n                {mission.currentPhase.toUpperCase()} PHASE\r\n              </TerminalText>\r\n            ],\r\n            [\r\n              'DURATION',\r\n              `${mission.currentYear}/${mission.estimatedDuration}`,\r\n              <TerminalText variant=\"primary\">\r\n                {((mission.currentYear / mission.estimatedDuration) * 100).toFixed(1)}% COMPLETE\r\n              </TerminalText>\r\n            ]\r\n          ]}\r\n        />\r\n      </div>\r\n\r\n      {/* Resource Summary */}\r\n      <div>\r\n        <TerminalText variant=\"bright\">RESOURCE STATUS:</TerminalText>\r\n        <TerminalTable\r\n          headers={['RESOURCE', 'QUANTITY', 'STATUS']}\r\n          rows={[\r\n            [\r\n              'FOOD',\r\n              mission.resources.food.toLocaleString(),\r\n              <TerminalText variant={mission.resources.food > 5000 ? 'success' : mission.resources.food > 2000 ? 'warning' : 'error'}>\r\n                {mission.resources.food > 5000 ? 'OPTIMAL' : mission.resources.food > 2000 ? 'LOW' : 'CRITICAL'}\r\n              </TerminalText>\r\n            ],\r\n            [\r\n              'ENERGY',\r\n              mission.resources.energy.toLocaleString(),\r\n              <TerminalText variant={mission.resources.energy > 8000 ? 'success' : mission.resources.energy > 4000 ? 'warning' : 'error'}>\r\n                {mission.resources.energy > 8000 ? 'OPTIMAL' : mission.resources.energy > 4000 ? 'LOW' : 'CRITICAL'}\r\n              </TerminalText>\r\n            ],\r\n            [\r\n              'HULL INTEGRITY',\r\n              `${(mission.resources.hullIntegrity * 100).toFixed(1)}%`,\r\n              <TerminalText variant={mission.resources.hullIntegrity > 0.8 ? 'success' : mission.resources.hullIntegrity > 0.5 ? 'warning' : 'error'}>\r\n                {mission.resources.hullIntegrity > 0.8 ? 'OPTIMAL' : mission.resources.hullIntegrity > 0.5 ? 'DAMAGED' : 'CRITICAL'}\r\n              </TerminalText>\r\n            ],\r\n            [\r\n              'CREW MORALE',\r\n              `${(mission.resources.morale * 100).toFixed(1)}%`,\r\n              <TerminalText variant={mission.resources.morale > 0.7 ? 'success' : mission.resources.morale > 0.4 ? 'warning' : 'error'}>\r\n                {mission.resources.morale > 0.7 ? 'HIGH' : mission.resources.morale > 0.4 ? 'MODERATE' : 'LOW'}\r\n              </TerminalText>\r\n            ]\r\n          ]}\r\n        />\r\n      </div>\r\n\r\n      {/* Time Controls */}\r\n      <div>\r\n        <TerminalText variant=\"bright\">TIME ACCELERATION:</TerminalText>\r\n        <div className=\"terminal-flex gap-2 mt-2\">\r\n          <TerminalButton\r\n            onClick={() => onAdvanceTime(1)}\r\n            variant=\"primary\"\r\n          >\r\n            +1 YEAR\r\n          </TerminalButton>\r\n          <TerminalButton\r\n            onClick={() => onAdvanceTime(5)}\r\n            variant=\"primary\"\r\n          >\r\n            +5 YEARS\r\n          </TerminalButton>\r\n          <TerminalButton\r\n            onClick={() => onAdvanceTime(10)}\r\n            variant=\"warning\"\r\n          >\r\n            +10 YEARS\r\n          </TerminalButton>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Terminal Events Panel Component\r\nconst TerminalEventsPanel: React.FC<{\r\n  mission: GenerationalMission;\r\n  events: MissionEvent[];\r\n  selectedEvent: MissionEvent | undefined;\r\n  onSelectEvent: (eventId: string | null) => void;\r\n  onResolveEvent: (outcomeId: string) => void;\r\n}> = ({ events, selectedEvent, onSelectEvent, onResolveEvent }) => {\r\n  if (events.length === 0) {\r\n    return (\r\n      <div className=\"terminal-space-y text-center\">\r\n        <TerminalText variant=\"dim\">NO ACTIVE EVENTS</TerminalText>\r\n        <TerminalText variant=\"dim\">MISSION PROCEEDING NOMINALLY</TerminalText>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"terminal-space-y\">\r\n      {/* Event List */}\r\n      <div>\r\n        <TerminalText variant=\"bright\">ACTIVE EVENTS:</TerminalText>\r\n        <div className=\"terminal-space-y-sm max-h-48 overflow-y-auto\">\r\n          {events.map(event => (\r\n            <div\r\n              key={event.id}\r\n              onClick={() => onSelectEvent(event.id)}\r\n              className={`terminal-list-item selectable ${\r\n                selectedEvent?.id === event.id ? 'selected' : ''\r\n              } ${\r\n                event.requiresPlayerDecision ? 'alert' : ''\r\n              }`}\r\n              style={{ cursor: 'pointer', padding: '0.5rem', border: selectedEvent?.id === event.id ? '1px solid var(--terminal-primary)' : '1px solid var(--terminal-border)' }}\r\n            >\r\n              <div className=\"terminal-flex between\">\r\n                <div className=\"flex-1\">\r\n                  <TerminalText variant={selectedEvent?.id === event.id ? 'bright' : 'primary'}>\r\n                    {event.title.toUpperCase()}\r\n                  </TerminalText>\r\n                  <div className=\"terminal-text dim\">\r\n                    {event.category.replace('_', ' ').toUpperCase()}\r\n                  </div>\r\n                </div>\r\n                {event.requiresPlayerDecision && (\r\n                  <TerminalText variant=\"error\" glow>\r\n                    [ACTION REQUIRED]\r\n                  </TerminalText>\r\n                )}\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Event Details */}\r\n      {selectedEvent && (\r\n        <div style={{ border: '1px solid var(--terminal-border)', padding: '1rem' }}>\r\n          <TerminalText variant=\"bright\">{selectedEvent.title.toUpperCase()}</TerminalText>\r\n          <div className=\"terminal-text mt-2 mb-4\">{selectedEvent.description}</div>\r\n\r\n          {selectedEvent.requiresPlayerDecision && (\r\n            <div className=\"terminal-space-y\">\r\n              <TerminalText variant=\"bright\">RESPONSE OPTIONS:</TerminalText>\r\n              {selectedEvent.possibleOutcomes.map(outcome => (\r\n                <TerminalButton\r\n                  key={outcome.id}\r\n                  onClick={() => onResolveEvent(outcome.id)}\r\n                  variant=\"primary\"\r\n                  fullWidth\r\n                >\r\n                  <div>\r\n                    <div className=\"font-bold\">{outcome.title.toUpperCase()}</div>\r\n                    <div className=\"text-sm opacity-75\">{outcome.description}</div>\r\n                  </div>\r\n                </TerminalButton>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n// Terminal Create Mission Component\r\nconst TerminalCreateMission: React.FC<{\r\n  config: any;\r\n  onChange: (config: any) => void;\r\n  onConfirm: () => void;\r\n  onCancel: () => void;\r\n}> = ({ config, onChange, onConfirm, onCancel }) => {\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50\">\r\n      <TerminalWindow title=\"MISSION LAUNCH PROTOCOLS\" statusLine=\"CONFIGURING\" className=\"w-96 max-w-90vw\">\r\n        <div className=\"terminal-space-y\">\r\n          <div>\r\n            <TerminalText variant=\"bright\">MISSION DESIGNATION:</TerminalText>\r\n            <TerminalInput\r\n              value={config.name}\r\n              onChange={(value) => onChange({ ...config, name: value })}\r\n              placeholder=\"ENTER MISSION NAME\"\r\n              promptPrefix=\">\"\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <TerminalText variant=\"bright\">LEGACY ASSIGNMENT:</TerminalText>\r\n            <TerminalSelect\r\n              value={config.legacy}\r\n              onChange={(value) => onChange({ ...config, legacy: value })}\r\n              options={[\r\n                { value: 'preservers', label: 'PRESERVERS' },\r\n                { value: 'adaptors', label: 'ADAPTORS' },\r\n                { value: 'wanderers', label: 'WANDERERS' }\r\n              ]}\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <TerminalText variant=\"bright\">MISSION OBJECTIVE:</TerminalText>\r\n            <TerminalSelect\r\n              value={config.objective}\r\n              onChange={(value) => onChange({ ...config, objective: value })}\r\n              options={[\r\n                { value: 'colonization', label: 'COLONIZATION' },\r\n                { value: 'mining', label: 'RESOURCE MINING' },\r\n                { value: 'exploration', label: 'DEEP SPACE EXPLORATION' },\r\n                { value: 'rescue', label: 'RESCUE OPERATION' }\r\n              ]}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"terminal-grid cols-2\">\r\n            <div>\r\n              <TerminalText variant=\"bright\">VESSEL SIZE:</TerminalText>\r\n              <TerminalSelect\r\n                value={config.shipSize}\r\n                onChange={(value) => onChange({ ...config, shipSize: value })}\r\n                options={[\r\n                  { value: 'medium', label: 'MEDIUM (15K)' },\r\n                  { value: 'large', label: 'LARGE (30K)' },\r\n                  { value: 'massive', label: 'MASSIVE (50K)' },\r\n                  { value: 'gigantic', label: 'GIGANTIC (80K)' }\r\n                ]}\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <TerminalText variant=\"bright\">DURATION (YEARS):</TerminalText>\r\n              <TerminalInput\r\n                type=\"number\"\r\n                value={config.estimatedDuration.toString()}\r\n                onChange={(value) => onChange({ ...config, estimatedDuration: parseInt(value) || 200 })}\r\n                promptPrefix=\">\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"terminal-flex gap-3 mt-6\">\r\n          <TerminalButton\r\n            onClick={onCancel}\r\n            variant=\"error\"\r\n            fullWidth\r\n          >\r\n            ABORT\r\n          </TerminalButton>\r\n          <TerminalButton\r\n            onClick={onConfirm}\r\n            disabled={!config.name}\r\n            variant=\"success\"\r\n            fullWidth\r\n          >\r\n            LAUNCH MISSION\r\n          </TerminalButton>\r\n        </div>\r\n      </TerminalWindow>\r\n    </div>\r\n  );\r\n};","usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\components\\game\\shipbuilder\\ComponentShop.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":19,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":19,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[815,818],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[815,818],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":20,"column":69,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":20,"endColumn":72,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[894,897],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[894,897],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":25,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":25,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1037,1040],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1037,1040],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":30,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":30,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1277,1280],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1277,1280],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// components/game/shipbuilder/ComponentShop.tsx\r\nimport React, { useMemo, useCallback } from 'react';\r\nimport { useGameStore } from '../../../stores/useGameStore';\r\nimport { useGameActions } from '../../../hooks/useGameActions';\r\nimport { UI_CONSTANTS } from '../../../constants/uiConstants';\r\n\r\nconst ComponentShop: React.FC = React.memo(() => {\r\n  const { shipComponents, currentComponentCategory, resources } = useGameStore();\r\n  const { handlePurchaseComponent, handleSwitchComponentCategory } = useGameActions();\r\n\r\n  const categories = useMemo(() => [\r\n    { id: 'hulls', label: 'Hulls' },\r\n    { id: 'engines', label: 'Engines' },\r\n    { id: 'weapons', label: 'Weapons' }\r\n  ] as const, []);\r\n\r\n  const currentComponents = shipComponents[currentComponentCategory];\r\n\r\n  const canAfford = useCallback((cost: any) => {\r\n    return Object.entries(cost).every(([resource, amount]: [string, any]) =>\r\n      resources[resource as keyof typeof resources] >= amount\r\n    );\r\n  }, [resources]);\r\n\r\n  const formatCost = useCallback((cost: any) => {\r\n    return Object.entries(cost).map(([resource, amount]) => `${amount} ${resource}`).join(', ');\r\n  }, []);\r\n\r\n  const handleCategorySwitch = useCallback((categoryId: string) => {\r\n    handleSwitchComponentCategory(categoryId as any);\r\n  }, [handleSwitchComponentCategory]);\r\n\r\n  const handleComponentPurchase = useCallback((componentName: string) => {\r\n    handlePurchaseComponent(currentComponentCategory, componentName);\r\n  }, [handlePurchaseComponent, currentComponentCategory]);\r\n\r\n  return (\r\n    <div className={`${UI_CONSTANTS.CARDS.BACKGROUND} ${UI_CONSTANTS.CARDS.BASE} ${UI_CONSTANTS.SPACING.CARD_PADDING} ${UI_CONSTANTS.CARDS.BORDER}`}>\r\n      <h3 className={`text-xl font-bold ${UI_CONSTANTS.COLORS.TEXT_PRIMARY} ${UI_CONSTANTS.SPACING.SECTION_MARGIN}`}>Available Components</h3>\r\n\r\n      {/* Category Tabs */}\r\n      <div className=\"flex space-x-2 mb-6\">\r\n        {categories.map(category => (\r\n          <button\r\n            key={category.id}\r\n            onClick={() => handleCategorySwitch(category.id)}\r\n            className={`px-4 py-2 rounded text-sm font-medium transition-colors ${\r\n              currentComponentCategory === category.id\r\n                ? `${UI_CONSTANTS.COLORS.BG_SUCCESS} ${UI_CONSTANTS.COLORS.TEXT_PRIMARY}`\r\n                : `${UI_CONSTANTS.COLORS.BG_SECONDARY} ${UI_CONSTANTS.COLORS.TEXT_SECONDARY} ${UI_CONSTANTS.COLORS.HOVER_BG_TERTIARY}`\r\n            }`}\r\n          >\r\n            {category.label}\r\n          </button>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Components List */}\r\n      <div className=\"space-y-3\">\r\n        {currentComponents.map(component => (\r\n          <div key={component.name} className={`${UI_CONSTANTS.COLORS.BG_SECONDARY} rounded p-4`}>\r\n            <div className=\"flex justify-between items-start mb-2\">\r\n              <h4 className={`${UI_CONSTANTS.COLORS.TEXT_PRIMARY} font-semibold`}>{component.name}</h4>\r\n              <button\r\n                onClick={() => handleComponentPurchase(component.name)}\r\n                disabled={!canAfford(component.cost)}\r\n                className={`px-3 py-1 rounded text-sm font-medium transition-colors ${\r\n                  canAfford(component.cost)\r\n                    ? `${UI_CONSTANTS.COLORS.BG_SUCCESS} hover:bg-teal-700 ${UI_CONSTANTS.COLORS.TEXT_PRIMARY}`\r\n                    : `${UI_CONSTANTS.COLORS.BG_TERTIARY} ${UI_CONSTANTS.COLORS.TEXT_MUTED} cursor-not-allowed`\r\n                }`}\r\n              >\r\n                {canAfford(component.cost) ? 'Purchase' : 'Cannot Afford'}\r\n              </button>\r\n            </div>\r\n\r\n            <div className={`text-sm ${UI_CONSTANTS.COLORS.TEXT_MUTED} mb-2`}>\r\n              Cost: {formatCost(component.cost)}\r\n            </div>\r\n\r\n            {component.stats && Object.keys(component.stats).length > 0 && (\r\n              <div className={`text-sm ${UI_CONSTANTS.COLORS.TEXT_SECONDARY}`}>\r\n                Stats: {Object.entries(component.stats).map(([stat, value]) =>\r\n                  `${stat}: +${value}`\r\n                ).join(', ')}\r\n              </div>\r\n            )}\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nComponentShop.displayName = 'ComponentShop';\r\n\r\nexport default ComponentShop;","usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\components\\game\\shipbuilder\\ShipDesign.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\components\\layout\\Header.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\components\\layout\\TabNavigation.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\components\\layout\\TerminalHeader.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\components\\layout\\TerminalTabNavigation.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":36,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":36,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1455,1458],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1455,1458],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// components/layout/TerminalTabNavigation.tsx\r\nimport React, { useMemo, useCallback } from 'react';\r\nimport { useTabNavigation } from '../../hooks/useTabNavigation';\r\nimport { generateTerminalBorder } from '../../utils/terminalBorders';\r\nimport { useGameStore } from '../../stores/useGameStore';\r\n\r\n// Memoized icon mapping to prevent recreation\r\nconst TAB_ICONS = {\r\n  'dashboard': '‚ä°',      // Console/Dashboard\r\n  'ship-builder': '‚öô',   // Engineering\r\n  'crew-quarters': '‚óà',  // Crew/Personnel\r\n  'galaxy-map': '‚Äª',     // Navigation/Map\r\n  'market': '‚üê',        // Commerce\r\n  'legacy': '‚ü°',        // Legacy/Records\r\n  'mission-command': '‚üê', // Command\r\n  'dynasty-hall': '‚¨¢',   // Dynasty\r\n  'legacy-relations': '‚óé',  // Legacy Relations\r\n  'cultural-evolution': '‚ü°', // Culture\r\n  'chronicle': '‚ü¨',      // Chronicle/History\r\n} as const;\r\n\r\nconst TerminalTabNavigation: React.FC = React.memo(() => {\r\n  // Selective subscriptions to prevent unnecessary re-renders\r\n  const currentTab = useGameStore(state => state.currentTab);\r\n  const switchTab = useGameStore(state => state.switchTab);\r\n\r\n  const { coreSystemTabs, generationalTabs } = useTabNavigation();\r\n\r\n  // Memoized icon getter\r\n  const getTabIcon = useCallback((tabId: string): string => {\r\n    return TAB_ICONS[tabId as keyof typeof TAB_ICONS] || '‚ñ´';\r\n  }, []);\r\n\r\n  // Memoized tab switch handler\r\n  const handleTabSwitch = useCallback((tabId: string) => {\r\n    switchTab(tabId as any); // Type assertion needed due to TabIdType constraints\r\n  }, [switchTab]);\r\n\r\n  // Memoized border generation to prevent recreation\r\n  const coreSystemBorder = useMemo(() => generateTerminalBorder('CORE SYSTEMS', 65), []);\r\n  const generationalBorder = useMemo(() => generateTerminalBorder('GENERATIONAL SYSTEMS', 80), []);\r\n\r\n  // Memoized style objects\r\n  const navStyles = useMemo(() => ({\r\n    navigation: { padding: '0.5rem 1rem', display: 'block' as const },\r\n    container: { display: 'flex', gap: '2rem', alignItems: 'flex-start' as const },\r\n    section: { flex: '1', maxWidth: '50%' },\r\n    header: { marginBottom: '0.25rem' },\r\n    tabContainer: { display: 'flex', flexWrap: 'wrap' as const, gap: '0.5rem', padding: '0.25rem 0.5rem' },\r\n    statusContainer: { textAlign: 'center' as const, marginTop: '0.5rem', fontSize: '0.75rem' }\r\n  }), []);\r\n\r\n  // Memoized tab button style generator\r\n  const getTabButtonStyle = useCallback((isActive: boolean, hasAlert = false) => ({\r\n    padding: '0.5rem 1rem',\r\n    border: `1px solid ${isActive ? '#FFB000' : hasAlert ? '#FF3300' : '#444444'}`,\r\n    background: isActive ? 'rgba(255, 176, 0, 0.1)' : hasAlert ? 'rgba(255, 51, 0, 0.1)' : 'transparent',\r\n    color: isActive ? '#FFB000' : hasAlert ? '#FF3300' : '#AA7700',\r\n    fontSize: '0.85rem',\r\n    fontFamily: 'monospace',\r\n    whiteSpace: 'nowrap' as const,\r\n    flex: 'none',\r\n    display: 'inline-block'\r\n  }), []);\r\n\r\n  return (\r\n    <nav className=\"terminal-navigation\" style={navStyles.navigation}>\r\n      {/* Side-by-Side Vertical Navigation */}\r\n      <div style={navStyles.container}>\r\n\r\n        {/* Core Systems - Horizontal Tabs */}\r\n        <div className=\"terminal-nav-section\" style={navStyles.section}>\r\n          <div className=\"terminal-nav-header\" style={navStyles.header}>\r\n            {coreSystemBorder.top}\r\n          </div>\r\n          <div style={navStyles.tabContainer}>\r\n            {coreSystemTabs.map((tab) => {\r\n              const isActive = currentTab === tab.id;\r\n              return (\r\n                <button\r\n                  key={tab.id}\r\n                  onClick={() => handleTabSwitch(tab.id)}\r\n                  className={`terminal-nav-item ${isActive ? 'active' : ''}`}\r\n                  style={getTabButtonStyle(isActive)}\r\n                >\r\n                  {getTabIcon(tab.id)} {tab.label}\r\n                </button>\r\n              );\r\n            })}\r\n          </div>\r\n          <div className=\"terminal-nav-footer\">\r\n            {coreSystemBorder.bottom}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Generational Systems - Horizontal Tabs */}\r\n        <div className=\"terminal-nav-section\" style={navStyles.section}>\r\n          <div className=\"terminal-nav-header\" style={navStyles.header}>\r\n            {generationalBorder.top}\r\n          </div>\r\n          <div style={navStyles.tabContainer}>\r\n            {generationalTabs.map((tab) => {\r\n              const isActive = currentTab === tab.id;\r\n              const hasAlert = tab.alert;\r\n              return (\r\n                <button\r\n                  key={tab.id}\r\n                  onClick={() => handleTabSwitch(tab.id)}\r\n                  className={`terminal-nav-item ${isActive ? 'active' : ''} ${hasAlert ? 'alert' : ''}`}\r\n                  style={getTabButtonStyle(isActive, hasAlert)}\r\n                >\r\n                  {getTabIcon(tab.id)} {tab.label} {hasAlert ? ' [!]' : ''}\r\n                </button>\r\n              );\r\n            })}\r\n          </div>\r\n          <div className=\"terminal-nav-footer\">\r\n            {generationalBorder.bottom}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Compact Command Line Indicator */}\r\n      <div style={navStyles.statusContainer}>\r\n        <div className=\"terminal-text dim\">\r\n          ACTIVE: [{currentTab.toUpperCase().replace('-', '_')}] ‚îÇ STATUS: READY\r\n        </div>\r\n      </div>\r\n    </nav>\r\n  );\r\n});\r\n\r\nTerminalTabNavigation.displayName = 'TerminalTabNavigation';\r\n\r\nexport default TerminalTabNavigation;","usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\components\\pacing\\TimeController.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":262,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":262,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10600,10603],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10600,10603],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":279,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":279,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11386,11389],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11386,11389],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":295,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":295,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12150,12153],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12150,12153],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":311,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":311,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12888,12891],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12888,12891],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// components/pacing/TimeController.tsx\nimport React, { useState } from 'react';\nimport { TerminalWindow } from '../ui/TerminalWindow';\nimport { TerminalText } from '../ui/TerminalWindow';\nimport type {\n  PacingState,\n  GamePhase,\n  PacingPreferences,\n  EngagementLevel,\n} from '../../types/pacing';\n\ninterface TimeControllerProps {\n  pacingState: PacingState;\n  onPacingChange: (newState: Partial<PacingState>) => void;\n  onPreferencesChange: (preferences: PacingPreferences) => void;\n  onEmergencyPause: () => void;\n  onForceResume: () => void;\n  isPaused?: boolean;\n}\n\nexport const TimeController: React.FC<TimeControllerProps> = ({\n  pacingState,\n  onPacingChange,\n  onPreferencesChange,\n  onEmergencyPause,\n  onForceResume,\n  isPaused = false\n}) => {\n  const [showPreferences, setShowPreferences] = useState(false);\n  const [localPreferences, setLocalPreferences] = useState<PacingPreferences>(pacingState.playerPreferences);\n\n  const getPhaseColor = (phase: GamePhase): string => {\n    switch (phase) {\n      case 'early': return 'text-green-400';\n      case 'mid': return 'text-yellow-400';\n      case 'late': return 'text-orange-400';\n      case 'arrival': return 'text-red-400';\n      case 'post-mission': return 'text-cyan-400';\n      default: return 'text-gray-400';\n    }\n  };\n\n  const getEngagementColor = (level: EngagementLevel): string => {\n    switch (level) {\n      case 'very_high': return 'text-green-400';\n      case 'high': return 'text-green-300';\n      case 'moderate': return 'text-yellow-400';\n      case 'low': return 'text-orange-400';\n      case 'very_low': return 'text-red-400';\n      default: return 'text-gray-400';\n    }\n  };\n\n  const handleAccelerationChange = (newAcceleration: number) => {\n    onPacingChange({ timeAcceleration: newAcceleration });\n  };\n\n  const handleAutomationChange = (newLevel: number) => {\n    onPacingChange({ automationLevel: newLevel });\n  };\n\n  const handlePreferencesSave = () => {\n    onPreferencesChange(localPreferences);\n    setShowPreferences(false);\n  };\n\n  const formatAcceleration = (acceleration: number): string => {\n    if (acceleration === 1) return '1x (Normal)';\n    if (acceleration < 1) return `${acceleration.toFixed(1)}x (Slower)`;\n    return `${acceleration.toFixed(1)}x (Faster)`;\n  };\n\n  const formatEngagement = (score: number): EngagementLevel => {\n    if (score >= 0.8) return 'very_high';\n    if (score >= 0.6) return 'high';\n    if (score >= 0.4) return 'moderate';\n    if (score >= 0.2) return 'low';\n    return 'very_low';\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Main Time Control */}\n      <TerminalWindow title=\"Mission Pacing Control\" className=\"h-auto\">\n        <div className=\"space-y-4\">\n          {/* Status Display */}\n          <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n            <div className=\"text-center\">\n              <TerminalText className=\"text-gray-400 text-sm\">Current Phase</TerminalText>\n              <TerminalText className={`font-bold ${getPhaseColor(pacingState.currentPhase)}`}>\n                {pacingState.currentPhase}\n              </TerminalText>\n              <div className=\"w-full bg-gray-700 rounded-full h-2 mt-1\">\n                <div\n                  className={`h-2 rounded-full ${getPhaseColor(pacingState.currentPhase).replace('text', 'bg')}`}\n                  style={{ width: `${pacingState.phaseProgress * 100}%` }}\n                />\n              </div>\n            </div>\n\n            <div className=\"text-center\">\n              <TerminalText className=\"text-gray-400 text-sm\">Time Speed</TerminalText>\n              <TerminalText className=\"font-bold text-cyan-400\">\n                {formatAcceleration(pacingState.timeAcceleration)}\n              </TerminalText>\n              <TerminalText className={`text-sm ${isPaused ? 'text-red-400' : 'text-green-400'}`}>\n                {isPaused ? 'PAUSED' : 'RUNNING'}\n              </TerminalText>\n            </div>\n\n            <div className=\"text-center\">\n              <TerminalText className=\"text-gray-400 text-sm\">Player Engagement</TerminalText>\n              <TerminalText className={`font-bold ${getEngagementColor(formatEngagement(pacingState.engagementScore))}`}>\n                {formatEngagement(pacingState.engagementScore).replace('_', ' ')}\n              </TerminalText>\n              <TerminalText className=\"text-sm text-gray-400\">\n                {(pacingState.engagementScore * 100).toFixed(0)}%\n              </TerminalText>\n            </div>\n\n            <div className=\"text-center\">\n              <TerminalText className=\"text-gray-400 text-sm\">Automation</TerminalText>\n              <TerminalText className=\"font-bold text-purple-400\">\n                {(pacingState.automationLevel * 100).toFixed(0)}%\n              </TerminalText>\n              <TerminalText className=\"text-sm text-gray-400\">\n                Active\n              </TerminalText>\n            </div>\n          </div>\n\n          {/* Controls */}\n          <div className=\"border-t border-gray-600 pt-4 space-y-4\">\n            {/* Time Acceleration Control */}\n            <div>\n              <label className=\"block text-sm text-gray-400 mb-2\">\n                Time Acceleration: {formatAcceleration(pacingState.timeAcceleration)}\n              </label>\n              <div className=\"flex items-center space-x-4\">\n                <TerminalText className=\"text-sm text-gray-400\">0.1x</TerminalText>\n                <input\n                  type=\"range\"\n                  min=\"0.1\"\n                  max=\"10\"\n                  step=\"0.1\"\n                  value={pacingState.timeAcceleration}\n                  onChange={(e) => handleAccelerationChange(parseFloat(e.target.value))}\n                  className=\"flex-1 h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer\"\n                />\n                <TerminalText className=\"text-sm text-gray-400\">10x</TerminalText>\n              </div>\n              <div className=\"flex justify-between mt-2\">\n                <button\n                  onClick={() => handleAccelerationChange(0.5)}\n                  className=\"px-3 py-1 bg-blue-900/30 border border-blue-400 text-blue-400\n                           rounded text-sm hover:bg-blue-800/30 transition-colors\"\n                >\n                  Slow\n                </button>\n                <button\n                  onClick={() => handleAccelerationChange(1.0)}\n                  className=\"px-3 py-1 bg-green-900/30 border border-green-400 text-green-400\n                           rounded text-sm hover:bg-green-800/30 transition-colors\"\n                >\n                  Normal\n                </button>\n                <button\n                  onClick={() => handleAccelerationChange(3.0)}\n                  className=\"px-3 py-1 bg-yellow-900/30 border border-yellow-400 text-yellow-400\n                           rounded text-sm hover:bg-yellow-800/30 transition-colors\"\n                >\n                  Fast\n                </button>\n              </div>\n            </div>\n\n            {/* Automation Control */}\n            <div>\n              <label className=\"block text-sm text-gray-400 mb-2\">\n                Automation Level: {(pacingState.automationLevel * 100).toFixed(0)}%\n              </label>\n              <div className=\"flex items-center space-x-4\">\n                <TerminalText className=\"text-sm text-gray-400\">Manual</TerminalText>\n                <input\n                  type=\"range\"\n                  min=\"0\"\n                  max=\"1\"\n                  step=\"0.1\"\n                  value={pacingState.automationLevel}\n                  onChange={(e) => handleAutomationChange(parseFloat(e.target.value))}\n                  className=\"flex-1 h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer\"\n                />\n                <TerminalText className=\"text-sm text-gray-400\">Auto</TerminalText>\n              </div>\n            </div>\n\n            {/* Emergency Controls */}\n            <div className=\"flex space-x-4\">\n              {isPaused ? (\n                <button\n                  onClick={onForceResume}\n                  className=\"flex-1 px-4 py-2 bg-green-900/30 border border-green-400\n                           text-green-400 rounded hover:bg-green-800/30 transition-colors\"\n                >\n                  Force Resume\n                </button>\n              ) : (\n                <button\n                  onClick={onEmergencyPause}\n                  className=\"flex-1 px-4 py-2 bg-red-900/30 border border-red-400\n                           text-red-400 rounded hover:bg-red-800/30 transition-colors\"\n                >\n                  Emergency Pause\n                </button>\n              )}\n\n              <button\n                onClick={() => setShowPreferences(!showPreferences)}\n                className=\"flex-1 px-4 py-2 bg-purple-900/30 border border-purple-400\n                         text-purple-400 rounded hover:bg-purple-800/30 transition-colors\"\n              >\n                Preferences\n              </button>\n            </div>\n          </div>\n        </div>\n      </TerminalWindow>\n\n      {/* Next Milestone */}\n      {pacingState.nextMilestone && (\n        <TerminalWindow title=\"Upcoming Milestone\" className=\"h-auto\">\n          <div className=\"space-y-2\">\n            <TerminalText className=\"text-cyan-400 font-bold\">\n              {pacingState.nextMilestone.title}\n            </TerminalText>\n            <TerminalText className=\"text-gray-300\">\n              {pacingState.nextMilestone.description}\n            </TerminalText>\n            <div className=\"flex justify-between items-center text-sm\">\n              <TerminalText className=\"text-yellow-400\">\n                Scheduled: Year {pacingState.nextMilestone.scheduledYear}\n              </TerminalText>\n              <TerminalText className=\"text-blue-400\">\n                Priority: {pacingState.nextMilestone.priority.toFixed(1)}\n              </TerminalText>\n            </div>\n          </div>\n        </TerminalWindow>\n      )}\n\n      {/* Preferences Panel */}\n      {showPreferences && (\n        <TerminalWindow title=\"Pacing Preferences\" className=\"h-auto\">\n          <div className=\"space-y-4\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div>\n                <label className=\"block text-sm text-gray-400 mb-2\">Preferred Speed</label>\n                <select\n                  value={localPreferences.preferredSpeed}\n                  onChange={(e) => setLocalPreferences({\n                    ...localPreferences,\n                    preferredSpeed: e.target.value as any\n                  })}\n                  className=\"w-full bg-gray-800 border border-gray-600 text-green-400 p-2 rounded\"\n                >\n                  <option value=\"slow\">Slow & Deliberate</option>\n                  <option value=\"medium\">Medium Pace</option>\n                  <option value=\"fast\">Fast Action</option>\n                  <option value=\"adaptive\">Adaptive</option>\n                </select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm text-gray-400 mb-2\">Crisis Handling</label>\n                <select\n                  value={localPreferences.crisisHandling}\n                  onChange={(e) => setLocalPreferences({\n                    ...localPreferences,\n                    crisisHandling: e.target.value as any\n                  })}\n                  className=\"w-full bg-gray-800 border border-gray-600 text-green-400 p-2 rounded\"\n                >\n                  <option value=\"immediate\">Always Interrupt</option>\n                  <option value=\"guided\">Guided Resolution</option>\n                  <option value=\"automated\">Automated When Possible</option>\n                </select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm text-gray-400 mb-2\">Milestone Frequency</label>\n                <select\n                  value={localPreferences.milestoneFrequency}\n                  onChange={(e) => setLocalPreferences({\n                    ...localPreferences,\n                    milestoneFrequency: e.target.value as any\n                  })}\n                  className=\"w-full bg-gray-800 border border-gray-600 text-green-400 p-2 rounded\"\n                >\n                  <option value=\"sparse\">Rare but Meaningful</option>\n                  <option value=\"moderate\">Balanced</option>\n                  <option value=\"frequent\">Rich Story Events</option>\n                </select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm text-gray-400 mb-2\">Narrative Style</label>\n                <select\n                  value={localPreferences.narrativeStyle}\n                  onChange={(e) => setLocalPreferences({\n                    ...localPreferences,\n                    narrativeStyle: e.target.value as any\n                  })}\n                  className=\"w-full bg-gray-800 border border-gray-600 text-green-400 p-2 rounded\"\n                >\n                  <option value=\"minimal\">Key Points Only</option>\n                  <option value=\"concise\">Concise Descriptions</option>\n                  <option value=\"detailed\">Rich Narrative</option>\n                </select>\n              </div>\n            </div>\n\n            <div>\n              <label className=\"block text-sm text-gray-400 mb-2\">\n                Automation Threshold: {(localPreferences.automationThreshold * 100).toFixed(0)}%\n              </label>\n              <input\n                type=\"range\"\n                min=\"0\"\n                max=\"1\"\n                step=\"0.1\"\n                value={localPreferences.automationThreshold}\n                onChange={(e) => setLocalPreferences({\n                  ...localPreferences,\n                  automationThreshold: parseFloat(e.target.value)\n                })}\n                className=\"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer\"\n              />\n              <TerminalText className=\"text-xs text-gray-500 mt-1\">\n                How quickly the game should automate decisions when you're not actively playing\n              </TerminalText>\n            </div>\n\n            <div className=\"flex space-x-4 pt-4\">\n              <button\n                onClick={handlePreferencesSave}\n                className=\"flex-1 px-4 py-2 bg-green-900/30 border border-green-400\n                         text-green-400 rounded hover:bg-green-800/30 transition-colors\"\n              >\n                Save Preferences\n              </button>\n              <button\n                onClick={() => setShowPreferences(false)}\n                className=\"flex-1 px-4 py-2 bg-gray-900/30 border border-gray-400\n                         text-gray-400 rounded hover:bg-gray-800/30 transition-colors\"\n              >\n                Cancel\n              </button>\n            </div>\n          </div>\n        </TerminalWindow>\n      )}\n    </div>\n  );\n};","usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\components\\ui\\Button.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\components\\ui\\Card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\components\\ui\\Grid.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\components\\ui\\NotificationSystem.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\components\\ui\\TerminalWindow.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":368,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":368,"endColumn":33}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// components/ui/TerminalWindow.tsx\r\nimport React, { useState, useRef, useEffect } from 'react';\r\n\r\ninterface TerminalWindowProps {\r\n  title: string;\r\n  children: React.ReactNode;\r\n  className?: string;\r\n  statusLine?: string;\r\n  isActive?: boolean;\r\n  isCollapsible?: boolean;\r\n  onClose?: () => void;\r\n  fullScreen?: boolean;\r\n}\r\n\r\nexport const TerminalWindow: React.FC<TerminalWindowProps> = ({\r\n  title,\r\n  children,\r\n  className = '',\r\n  statusLine,\r\n  isActive = true,\r\n  isCollapsible = false,\r\n  onClose,\r\n  fullScreen = false\r\n}) => {\r\n  const [isCollapsed, setIsCollapsed] = useState(false);\r\n  const [isTyping, setIsTyping] = useState(false);\r\n  const titleRef = useRef<HTMLDivElement>(null);\r\n\r\n  useEffect(() => {\r\n    if (titleRef.current && isActive) {\r\n      setIsTyping(true);\r\n      const timer = setTimeout(() => setIsTyping(false), 1000);\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [isActive, title]);\r\n\r\n  const generateBorder = (length: number) => '‚îÄ'.repeat(Math.max(0, length));\r\n  const titleLength = title.length;\r\n  const borderLength = Math.max(50, titleLength + 10);\r\n\r\n  return (\r\n    <div className={`terminal-window ${isActive ? 'active' : 'inactive'} ${fullScreen ? 'fullscreen' : ''} ${className}`}>\r\n      {/* Terminal Header */}\r\n      <div className=\"terminal-header\">\r\n        <div\r\n          ref={titleRef}\r\n          className={`terminal-title-bar ${isTyping ? 'terminal-typing' : ''}`}\r\n        >\r\n          ‚îå‚îÄ[{title.toUpperCase()}]{generateBorder(borderLength - titleLength - 4)}‚îê\r\n        </div>\r\n\r\n        {statusLine && (\r\n          <div className=\"terminal-status\">\r\n            ‚îÇ STATUS: {statusLine.toUpperCase()}\r\n            {' '.repeat(Math.max(0, borderLength - statusLine.length - 10))} ‚îÇ\r\n          </div>\r\n        )}\r\n\r\n        {/* Control Buttons */}\r\n        <div className=\"terminal-controls\">\r\n          ‚îÇ\r\n          {isCollapsible && (\r\n            <button\r\n              onClick={() => setIsCollapsed(!isCollapsed)}\r\n              className=\"terminal-control-button\"\r\n              aria-label={isCollapsed ? 'Expand window' : 'Collapse window'}\r\n            >\r\n              [{isCollapsed ? '+' : '-'}]\r\n            </button>\r\n          )}\r\n\r\n          {onClose && (\r\n            <button\r\n              onClick={onClose}\r\n              className=\"terminal-control-button terminal-control-close\"\r\n              aria-label=\"Close window\"\r\n            >\r\n              [X]\r\n            </button>\r\n          )}\r\n\r\n          {' '.repeat(Math.max(0, borderLength - 15))} ‚îÇ\r\n        </div>\r\n\r\n        <div className=\"terminal-separator\">\r\n          ‚îú{generateBorder(borderLength)}‚î§\r\n        </div>\r\n      </div>\r\n\r\n      {/* Terminal Content */}\r\n      {!isCollapsed && (\r\n        <div className=\"terminal-content\">\r\n          {children}\r\n        </div>\r\n      )}\r\n\r\n      {/* Terminal Footer */}\r\n      {!isCollapsed && (\r\n        <div className=\"terminal-footer\">\r\n          ‚îî{generateBorder(borderLength)}‚îò\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\ninterface TerminalTextProps {\r\n  children: React.ReactNode;\r\n  variant?: 'primary' | 'secondary' | 'success' | 'warning' | 'error' | 'dim' | 'bright';\r\n  className?: string;\r\n  glow?: boolean;\r\n  typing?: boolean;\r\n}\r\n\r\nexport const TerminalText: React.FC<TerminalTextProps> = ({\r\n  children,\r\n  variant = 'primary',\r\n  className = '',\r\n  glow = false,\r\n  typing = false\r\n}) => {\r\n  const classes = [\r\n    'terminal-text',\r\n    variant,\r\n    glow && 'terminal-glow-pulse',\r\n    typing && 'terminal-typing',\r\n    className\r\n  ].filter(Boolean).join(' ');\r\n\r\n  return <span className={classes}>{children}</span>;\r\n};\r\n\r\ninterface TerminalButtonProps {\r\n  children: React.ReactNode;\r\n  onClick?: () => void;\r\n  variant?: 'primary' | 'success' | 'warning' | 'error';\r\n  disabled?: boolean;\r\n  className?: string;\r\n  fullWidth?: boolean;\r\n}\r\n\r\nexport const TerminalButton: React.FC<TerminalButtonProps> = ({\r\n  children,\r\n  onClick,\r\n  variant = 'primary',\r\n  disabled = false,\r\n  className = '',\r\n  fullWidth = false\r\n}) => {\r\n  const classes = [\r\n    'terminal-button',\r\n    variant,\r\n    fullWidth && 'w-full',\r\n    className\r\n  ].filter(Boolean).join(' ');\r\n\r\n  return (\r\n    <button\r\n      className={classes}\r\n      onClick={onClick}\r\n      disabled={disabled}\r\n    >\r\n      {children}\r\n    </button>\r\n  );\r\n};\r\n\r\ninterface TerminalInputProps {\r\n  value: string;\r\n  onChange: (value: string) => void;\r\n  placeholder?: string;\r\n  type?: 'text' | 'number' | 'password';\r\n  className?: string;\r\n  disabled?: boolean;\r\n  promptPrefix?: string;\r\n}\r\n\r\nexport const TerminalInput: React.FC<TerminalInputProps> = ({\r\n  value,\r\n  onChange,\r\n  placeholder,\r\n  type = 'text',\r\n  className = '',\r\n  disabled = false,\r\n  promptPrefix = '>'\r\n}) => {\r\n  return (\r\n    <div className={`terminal-input-wrapper ${className}`}>\r\n      <span className=\"terminal-prompt\">{promptPrefix} </span>\r\n      <input\r\n        type={type}\r\n        value={value}\r\n        onChange={(e) => onChange(e.target.value)}\r\n        placeholder={placeholder}\r\n        disabled={disabled}\r\n        className=\"terminal-input\"\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\ninterface TerminalSelectProps {\r\n  value: string;\r\n  onChange: (value: string) => void;\r\n  options: { value: string; label: string }[];\r\n  className?: string;\r\n  disabled?: boolean;\r\n}\r\n\r\nexport const TerminalSelect: React.FC<TerminalSelectProps> = ({\r\n  value,\r\n  onChange,\r\n  options,\r\n  className = '',\r\n  disabled = false\r\n}) => {\r\n  return (\r\n    <select\r\n      value={value}\r\n      onChange={(e) => onChange(e.target.value)}\r\n      disabled={disabled}\r\n      className={`terminal-select ${className}`}\r\n    >\r\n      {options.map(option => (\r\n        <option key={option.value} value={option.value}>\r\n          {option.label}\r\n        </option>\r\n      ))}\r\n    </select>\r\n  );\r\n};\r\n\r\ninterface TerminalProgressProps {\r\n  value: number;\r\n  max?: number;\r\n  label?: string;\r\n  variant?: 'primary' | 'success' | 'warning' | 'error';\r\n  showText?: boolean;\r\n  ascii?: boolean;\r\n  className?: string;\r\n}\r\n\r\nexport const TerminalProgress: React.FC<TerminalProgressProps> = ({\r\n  value,\r\n  max = 100,\r\n  label,\r\n  variant = 'primary',\r\n  showText = true,\r\n  ascii = false,\r\n  className = ''\r\n}) => {\r\n  const percentage = Math.min(100, (value / max) * 100);\r\n\r\n  if (ascii) {\r\n    const barLength = 20;\r\n    const filled = Math.floor((percentage / 100) * barLength);\r\n    const empty = barLength - filled;\r\n    const bar = '‚ñà'.repeat(filled) + '‚ñë'.repeat(empty);\r\n\r\n    return (\r\n      <div className={`terminal-ascii-progress ${className}`}>\r\n        {label && <div className=\"terminal-text\">{label}:</div>}\r\n        <div className=\"terminal-text\">\r\n          [{bar}] {percentage.toFixed(1)}%\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={`terminal-progress ${variant} ${className}`}>\r\n      {label && (\r\n        <div className=\"terminal-text mb-1\">{label}</div>\r\n      )}\r\n      <div className=\"terminal-progress-container\">\r\n        <div\r\n          className={`terminal-progress-bar ${variant}`}\r\n          style={{ width: `${percentage}%` }}\r\n        />\r\n        {showText && (\r\n          <div className=\"terminal-progress-text\">\r\n            {percentage.toFixed(1)}%\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\ninterface TerminalTableProps {\r\n  headers: string[];\r\n  rows: (string | number | React.ReactNode)[][];\r\n  className?: string;\r\n  zebra?: boolean;\r\n}\r\n\r\nexport const TerminalTable: React.FC<TerminalTableProps> = ({\r\n  headers,\r\n  rows,\r\n  className = '',\r\n  zebra = false\r\n}) => {\r\n  return (\r\n    <table className={`terminal-table ${zebra ? 'zebra' : ''} ${className}`}>\r\n      <thead>\r\n        <tr>\r\n          {headers.map((header, index) => (\r\n            <th key={index}>{header}</th>\r\n          ))}\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {rows.map((row, rowIndex) => (\r\n          <tr key={rowIndex}>\r\n            {row.map((cell, cellIndex) => (\r\n              <td key={cellIndex}>{cell}</td>\r\n            ))}\r\n          </tr>\r\n        ))}\r\n      </tbody>\r\n    </table>\r\n  );\r\n};\r\n\r\ninterface TerminalListProps {\r\n  items: (string | { label: string; value?: string; onClick?: () => void })[];\r\n  className?: string;\r\n  selectable?: boolean;\r\n  selectedIndex?: number;\r\n  onItemClick?: (index: number) => void;\r\n}\r\n\r\nexport const TerminalList: React.FC<TerminalListProps> = ({\r\n  items,\r\n  className = '',\r\n  selectable = false,\r\n  selectedIndex,\r\n  onItemClick\r\n}) => {\r\n  return (\r\n    <ul className={`terminal-list ${className}`}>\r\n      {items.map((item, index) => {\r\n        const isString = typeof item === 'string';\r\n        const label = isString ? item : item.label;\r\n        const value = isString ? undefined : item.value;\r\n        const onClick = isString ? undefined : item.onClick;\r\n        const isSelected = selectedIndex === index;\r\n\r\n        return (\r\n          <li\r\n            key={index}\r\n            className={`terminal-list-item ${selectable ? 'selectable' : ''} ${isSelected ? 'selected' : ''}`}\r\n            onClick={() => {\r\n              if (onClick) onClick();\r\n              if (onItemClick) onItemClick(index);\r\n            }}\r\n          >\r\n            <span className=\"terminal-list-label\">{label}</span>\r\n            {value && <span className=\"terminal-list-value\">{value}</span>}\r\n          </li>\r\n        );\r\n      })}\r\n    </ul>\r\n  );\r\n};\r\n\r\n// ASCII Art Generator Helper\r\nexport const generateASCIIBorder = (width: number = 50, title?: string) => {\r\n  if (title) {\r\n    const titleLength = title.length + 4; // Add brackets and spaces\r\n    const remainingWidth = Math.max(0, width - titleLength);\r\n    const leftPadding = Math.floor(remainingWidth / 2);\r\n    const rightPadding = remainingWidth - leftPadding;\r\n\r\n    return {\r\n      top: `‚îå${'‚îÄ'.repeat(leftPadding)}[ ${title.toUpperCase()} ]${'‚îÄ'.repeat(rightPadding)}‚îê`,\r\n      middle: `‚îú${'‚îÄ'.repeat(width)}‚î§`,\r\n      bottom: `‚îî${'‚îÄ'.repeat(width)}‚îò`,\r\n      side: '‚îÇ'\r\n    };\r\n  }\r\n\r\n  return {\r\n    top: `‚îå${'‚îÄ'.repeat(width)}‚îê`,\r\n    middle: `‚îú${'‚îÄ'.repeat(width)}‚î§`,\r\n    bottom: `‚îî${'‚îÄ'.repeat(width)}‚îò`,\r\n    side: '‚îÇ'\r\n  };\r\n};\r\n\r\n// Terminal Screen Boot Sequence Component\r\ninterface TerminalBootProps {\r\n  onComplete?: () => void;\r\n  messages?: string[];\r\n}\r\n\r\nexport const TerminalBoot: React.FC<TerminalBootProps> = ({\r\n  onComplete,\r\n  messages = [\r\n    'STELLAR LEGACY COMMAND INTERFACE',\r\n    'INITIALIZING SHIP SYSTEMS...',\r\n    'LOADING NAVIGATION PROTOCOLS...',\r\n    'ESTABLISHING COMMUNICATION LINKS...',\r\n    'SYSTEM READY'\r\n  ]\r\n}) => {\r\n  const [currentMessage, setCurrentMessage] = useState(0);\r\n  const [isComplete, setIsComplete] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (currentMessage < messages.length) {\r\n      const timer = setTimeout(() => {\r\n        setCurrentMessage(currentMessage + 1);\r\n      }, 1000);\r\n      return () => clearTimeout(timer);\r\n    } else if (!isComplete) {\r\n      setIsComplete(true);\r\n      if (onComplete) {\r\n        setTimeout(onComplete, 1000);\r\n      }\r\n    }\r\n  }, [currentMessage, messages.length, isComplete, onComplete]);\r\n\r\n  return (\r\n    <div className=\"terminal-boot\">\r\n      <div className=\"terminal-boot-content\">\r\n        {messages.slice(0, currentMessage + 1).map((message, index) => (\r\n          <div\r\n            key={index}\r\n            className={`terminal-text ${index === currentMessage ? 'terminal-typing' : ''}`}\r\n          >\r\n            {message}\r\n          </div>\r\n        ))}\r\n\r\n        {isComplete && (\r\n          <div className=\"terminal-text success terminal-glow-pulse\">\r\n            ‚ñ∂ SYSTEM OPERATIONAL\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};","usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\config\\gameConfig.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\constants\\game-balance.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\constants\\gameConstants.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\constants\\uiConstants.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\hooks\\useChronicleViewer.ts","messages":[{"ruleId":"no-case-declarations","severity":1,"message":"Unexpected lexical declaration in case block.","line":104,"column":11,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":104,"endColumn":83,"suggestions":[{"messageId":"addBrackets","fix":{"range":[3093,3282],"text":"{ const successOrder = ['failure', 'partial', 'success', 'major_success'];\n          comparison = successOrder.indexOf(a.successLevel) - successOrder.indexOf(b.successLevel);\n          break; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'entry' is defined but never used.","line":269,"column":48,"nodeType":null,"messageId":"unusedVar","endLine":269,"endColumn":53}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// hooks/useChronicleViewer.ts\nimport { useState, useMemo, useCallback } from 'react';\nimport type { ChronicleEntry } from '../types/chronicle';\nimport type { HeritageModifier } from '../types/heritage';\n\n/**\n * Filter criteria for chronicle entries\n */\nexport interface ChronicleFilter {\n  successLevel?: string;\n  legacy?: string;\n  yearRange?: [number, number];\n  hasArtifacts?: boolean;\n  searchText?: string;\n}\n\n/**\n * Sort criteria for chronicle entries\n */\nexport interface ChronicleSortCriteria {\n  field: 'missionNumber' | 'startedAt' | 'completedAt' | 'successLevel' | 'dominantLegacy';\n  direction: 'asc' | 'desc';\n}\n\n/**\n * Custom hook for managing chronicle viewer state and business logic\n */\nexport const useChronicleViewer = (entries: ChronicleEntry[]) => {\n  const [filters, setFilters] = useState<ChronicleFilter>({});\n  const [sortCriteria, setSortCriteria] = useState<ChronicleSortCriteria>({\n    field: 'missionNumber',\n    direction: 'desc',\n  });\n  const [selectedEntry, setSelectedEntry] = useState<ChronicleEntry | null>(null);\n  const [showHeritageGenerator, setShowHeritageGenerator] = useState(false);\n\n  /**\n   * Filter chronicle entries based on current filter criteria\n   */\n  const filteredEntries = useMemo(() => {\n    return entries.filter(entry => {\n      // Success level filter\n      if (filters.successLevel && entry.successLevel !== filters.successLevel) {\n        return false;\n      }\n\n      // Legacy filter\n      if (filters.legacy && entry.startingLegacy !== filters.legacy) {\n        return false;\n      }\n\n      // Year range filter\n      if (filters.yearRange) {\n        const [minYear, maxYear] = filters.yearRange;\n        if (entry.actualDuration < minYear || entry.actualDuration > maxYear) {\n          return false;\n        }\n      }\n\n      // Artifacts filter\n      if (filters.hasArtifacts !== undefined) {\n        const hasArtifacts = entry.artifacts && entry.artifacts.length > 0;\n        if (filters.hasArtifacts !== hasArtifacts) {\n          return false;\n        }\n      }\n\n      // Search text filter\n      if (filters.searchText) {\n        const searchLower = filters.searchText.toLowerCase();\n        const searchFields = [\n          entry.missionName,\n          entry.targetSystem,\n          entry.keyDecisions.map(d => d.title).join(' '),\n        ].join(' ').toLowerCase();\n\n        if (!searchFields.includes(searchLower)) {\n          return false;\n        }\n      }\n\n      return true;\n    });\n  }, [entries, filters]);\n\n  /**\n   * Sort filtered entries based on current sort criteria\n   */\n  const sortedEntries = useMemo(() => {\n    const sorted = [...filteredEntries].sort((a, b) => {\n      let comparison = 0;\n\n      switch (sortCriteria.field) {\n        case 'missionNumber':\n          comparison = a.missionNumber - b.missionNumber;\n          break;\n        case 'startedAt':\n          comparison = a.startedAt.getTime() - b.startedAt.getTime();\n          break;\n        case 'completedAt':\n          comparison = a.completedAt.getTime() - b.completedAt.getTime();\n          break;\n        case 'successLevel':\n          const successOrder = ['failure', 'partial', 'success', 'major_success'];\n          comparison = successOrder.indexOf(a.successLevel) - successOrder.indexOf(b.successLevel);\n          break;\n        case 'dominantLegacy':\n          comparison = a.dominantLegacy.localeCompare(b.dominantLegacy);\n          break;\n      }\n\n      return sortCriteria.direction === 'asc' ? comparison : -comparison;\n    });\n\n    return sorted;\n  }, [filteredEntries, sortCriteria]);\n\n  /**\n   * Calculate statistics for the filtered entries\n   */\n  const statistics = useMemo(() => {\n    const total = filteredEntries.length;\n    if (total === 0) {\n      return {\n        total: 0,\n        successRate: 0,\n        averageDuration: 0,\n        legacyDistribution: {},\n        artifactCount: 0,\n      };\n    }\n\n    const successful = filteredEntries.filter(e => {\n      const level = e.successLevel as string;\n      return level === 'success' || level === 'major_success';\n    }).length;\n\n    const totalDuration = filteredEntries.reduce((sum, e) => sum + e.actualDuration, 0);\n\n    const legacyDistribution = filteredEntries.reduce((acc, entry) => {\n      acc[entry.dominantLegacy] = (acc[entry.dominantLegacy] || 0) + 1;\n      return acc;\n    }, {} as Record<string, number>);\n\n    const artifactCount = filteredEntries.reduce((sum, e) =>\n      sum + (e.artifacts?.length || 0), 0\n    );\n\n    return {\n      total,\n      successRate: successful / total,\n      averageDuration: totalDuration / total,\n      legacyDistribution,\n      artifactCount,\n    };\n  }, [filteredEntries]);\n\n  /**\n   * Update filter criteria\n   */\n  const updateFilter = useCallback((newFilter: Partial<ChronicleFilter>) => {\n    setFilters(prev => ({ ...prev, ...newFilter }));\n  }, []);\n\n  /**\n   * Clear all filters\n   */\n  const clearFilters = useCallback(() => {\n    setFilters({});\n  }, []);\n\n  /**\n   * Update sort criteria\n   */\n  const updateSort = useCallback((newSort: Partial<ChronicleSortCriteria>) => {\n    setSortCriteria(prev => ({ ...prev, ...newSort }));\n  }, []);\n\n  /**\n   * Toggle sort direction for current field\n   */\n  const toggleSortDirection = useCallback(() => {\n    setSortCriteria(prev => ({\n      ...prev,\n      direction: prev.direction === 'asc' ? 'desc' : 'asc',\n    }));\n  }, []);\n\n  /**\n   * Select an entry for detailed view\n   */\n  const selectEntry = useCallback((entry: ChronicleEntry | null) => {\n    setSelectedEntry(entry);\n  }, []);\n\n  /**\n   * Generate heritage modifiers for selected entry\n   */\n  const generateHeritageForEntry = useCallback((entry: ChronicleEntry) => {\n    setSelectedEntry(entry);\n    setShowHeritageGenerator(true);\n  }, []);\n\n  /**\n   * Close heritage generator\n   */\n  const closeHeritageGenerator = useCallback(() => {\n    setShowHeritageGenerator(false);\n  }, []);\n\n  /**\n   * Get available filter options based on current data\n   */\n  const filterOptions = useMemo(() => {\n    const successLevels = [...new Set(entries.map(e => e.successLevel))];\n    const legacies = [...new Set(entries.map(e => e.startingLegacy))];\n    const yearRange: [number, number] = entries.length > 0 ? [\n      Math.min(...entries.map(e => e.actualDuration)),\n      Math.max(...entries.map(e => e.actualDuration)),\n    ] : [0, 100];\n\n    return {\n      successLevels,\n      legacies,\n      yearRange,\n    };\n  }, [entries]);\n\n  return {\n    // Data\n    entries: sortedEntries,\n    selectedEntry,\n    statistics,\n    filterOptions,\n\n    // Filter state\n    filters,\n    updateFilter,\n    clearFilters,\n\n    // Sort state\n    sortCriteria,\n    updateSort,\n    toggleSortDirection,\n\n    // Selection state\n    selectEntry,\n\n    // Heritage generation\n    showHeritageGenerator,\n    generateHeritageForEntry,\n    closeHeritageGenerator,\n\n    // Derived state\n    hasFilters: Object.keys(filters).length > 0,\n    isEmpty: sortedEntries.length === 0,\n    isFiltered: filteredEntries.length < entries.length,\n  };\n};\n\n/**\n * Hook for managing heritage modifier generation UI state\n */\nexport const useHeritageGeneration = () => {\n  const [isGenerating, setIsGenerating] = useState(false);\n  const [generatedModifiers, setGeneratedModifiers] = useState<HeritageModifier[]>([]);\n  const [error, setError] = useState<string | null>(null);\n\n  const generateModifiers = useCallback(async (entry: ChronicleEntry) => {\n    setIsGenerating(true);\n    setError(null);\n\n    try {\n      // This would call the actual service\n      // const result = await ChronicleService.generateHeritageModifiers(entry);\n      // if (result.success) {\n      //   setGeneratedModifiers(result.data);\n      // } else {\n      //   setError(result.error.message);\n      // }\n\n      // Placeholder for now\n      setGeneratedModifiers([]);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Unknown error');\n    } finally {\n      setIsGenerating(false);\n    }\n  }, []);\n\n  const clearGeneration = useCallback(() => {\n    setGeneratedModifiers([]);\n    setError(null);\n  }, []);\n\n  return {\n    isGenerating,\n    generatedModifiers,\n    error,\n    generateModifiers,\n    clearGeneration,\n    hasModifiers: generatedModifiers.length > 0,\n  };\n};\n\n/**\n * Utility functions for chronicle data processing\n */\nexport const ChronicleUtils = {\n  /**\n   * Format mission duration for display\n   */\n  formatDuration: (years: number): string => {\n    if (years < 1) {\n      return `${Math.round(years * 12)} months`;\n    }\n    return `${Math.round(years)} years`;\n  },\n\n  /**\n   * Get success level display text\n   */\n  getSuccessLevelText: (level: string): string => {\n    const levels: Record<string, string> = {\n      failure: 'Mission Failed',\n      partial: 'Partial Success',\n      success: 'Mission Success',\n      major_success: 'Major Success',\n    };\n    return levels[level] || level;\n  },\n\n  /**\n   * Get success level color class\n   */\n  getSuccessLevelColor: (level: string): string => {\n    const colors: Record<string, string> = {\n      failure: 'text-red-400',\n      partial: 'text-yellow-400',\n      success: 'text-green-400',\n      major_success: 'text-blue-400',\n    };\n    return colors[level] || 'text-gray-400';\n  },\n\n  /**\n   * Calculate entry significance score\n   */\n  calculateSignificance: (entry: ChronicleEntry): number => {\n    let score = 0;\n\n    // Success level weight\n    const successWeights = { failure: 0.5, partial: 0.7, success: 1.0, major_success: 1.5 };\n    score += successWeights[entry.successLevel as keyof typeof successWeights] || 0.5;\n\n    // Decision impact weight\n    const avgDecisionWeight = entry.keyDecisions.length > 0\n      ? entry.keyDecisions.reduce((sum, d) => sum + d.chronicleWeight, 0) / entry.keyDecisions.length\n      : 0;\n    score += avgDecisionWeight;\n\n    // Artifact bonus\n    score += (entry.artifacts?.length || 0) * 0.2;\n\n    // Duration factor (longer missions are more significant)\n    score += Math.min(entry.actualDuration / 100, 1) * 0.5;\n\n    return Math.min(score, 3); // Cap at 3.0\n  },\n\n  /**\n   * Group entries by time period\n   */\n  groupByPeriod: (entries: ChronicleEntry[], periodYears: number = 50): Record<string, ChronicleEntry[]> => {\n    return entries.reduce((groups, entry) => {\n      const period = Math.floor(entry.missionNumber / (periodYears / 10)) * (periodYears / 10);\n      const key = `Years ${period}-${period + periodYears - 1}`;\n      groups[key] = groups[key] || [];\n      groups[key].push(entry);\n      return groups;\n    }, {} as Record<string, ChronicleEntry[]>);\n  },\n};","usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\hooks\\useGameActions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\hooks\\useTabNavigation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\hooks\\useTradeActions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\main.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\services\\AutomationService.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_legacy' is defined but never used.","line":143,"column":44,"nodeType":null,"messageId":"unusedVar","endLine":143,"endColumn":51},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_automationConfig' is defined but never used.","line":222,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":222,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_timeElapsed' is defined but never used.","line":328,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":328,"endColumn":17},{"ruleId":"prefer-const","severity":1,"message":"'success' is never reassigned. Use 'const' instead.","line":453,"column":9,"nodeType":"Identifier","messageId":"useConst","endLine":453,"endColumn":16,"fix":{"range":[14479,14498],"text":"const success = true;"}}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":1,"source":"// services/AutomationService.ts\r\nimport type {\r\n  AutomationConfig,\r\n  CouncilMember,\r\n  DelegationRule,\r\n  MissionEvent,\r\n  Dynasty,\r\n  PopulationCohort,\r\n  AIDecision,\r\n  GenerationalMission\r\n} from '../types/generationalMissions';\r\nimport type { LegacyTypeType } from '../types/enums';\r\nimport { DynastyService } from './DynastyService';\r\nimport Logger from '../utils/logger';\r\n\r\nexport class AutomationService {\r\n  // Initialize Default Automation Config for New Mission\r\n  static createDefaultAutomationConfig(legacy: LegacyTypeType): AutomationConfig {\r\n    return {\r\n      resourceThresholds: this.getDefaultResourceThresholds(legacy),\r\n      crisisEscalationRules: this.getDefaultEscalationRules(legacy),\r\n      councilMembers: [], // Will be populated when dynasties are assigned\r\n      delegationRules: this.getDefaultDelegationRules(legacy),\r\n      emergencyProtocols: this.getDefaultEmergencyProtocols(legacy)\r\n    };\r\n  }\r\n\r\n  // Default Resource Thresholds by Sect\r\n  private static getDefaultResourceThresholds(legacy: LegacyTypeType): Record<string, number> {\r\n    const baseThresholds = {\r\n      credits: 1000,\r\n      energy: 500,\r\n      minerals: 300,\r\n      food: 200,\r\n      fuel: 100,\r\n      hullIntegrity: 0.7,\r\n      lifeSupport: 0.8,\r\n      morale: 0.6,\r\n      unity: 0.5\r\n    };\r\n\r\n    // Legacy-specific adjustments\r\n    switch (legacy) {\r\n      case 'preservers':\r\n        return {\r\n          ...baseThresholds,\r\n          food: 400, // More conservative food reserves\r\n          hullIntegrity: 0.8, // Higher safety standards\r\n          unity: 0.7 // Value social cohesion more\r\n        };\r\n\r\n      case 'adaptors':\r\n        return {\r\n          ...baseThresholds,\r\n          energy: 800, // Higher energy needs for modifications\r\n          lifeSupport: 0.6, // More tolerant of system variations\r\n          morale: 0.4 // Accept lower traditional morale\r\n        };\r\n\r\n      case 'wanderers':\r\n        return {\r\n          ...baseThresholds,\r\n          fuel: 200, // Critical for constant travel\r\n          credits: 500, // Lower credit dependency\r\n          food: 150, // Efficient consumption\r\n          unity: 0.3 // Used to fragmentation\r\n        };\r\n\r\n      default:\r\n        return baseThresholds;\r\n    }\r\n  }\r\n\r\n  // Default Crisis Escalation Rules\r\n  private static getDefaultEscalationRules(legacy: LegacyTypeType): DelegationRule[] {\r\n    const rules: DelegationRule[] = [\r\n      {\r\n        id: 'critical_resources',\r\n        category: 'resources',\r\n        condition: 'any_resource < critical_threshold',\r\n        action: 'escalate_to_player',\r\n        isActive: true,\r\n        dynastyResponsible: null\r\n      },\r\n      {\r\n        id: 'system_failure',\r\n        category: 'systems',\r\n        condition: 'hull_integrity < 0.5 OR life_support < 0.5',\r\n        action: 'immediate_escalation',\r\n        isActive: true,\r\n        dynastyResponsible: null\r\n      },\r\n      {\r\n        id: 'population_crisis',\r\n        category: 'population',\r\n        condition: 'morale < 0.3 OR unity < 0.2',\r\n        action: 'escalate_to_player',\r\n        isActive: true,\r\n        dynastyResponsible: null\r\n      }\r\n    ];\r\n\r\n    // Add legacy-specific escalation rules\r\n    switch (legacy) {\r\n      case 'preservers':\r\n        rules.push({\r\n          id: 'cultural_drift',\r\n          category: 'culture',\r\n          condition: 'cultural_drift > 0.5',\r\n          action: 'escalate_to_player',\r\n          isActive: true,\r\n          dynastyResponsible: null\r\n        });\r\n        break;\r\n\r\n      case 'adaptors':\r\n        rules.push({\r\n          id: 'mutation_crisis',\r\n          category: 'evolution',\r\n          condition: 'failed_mutations > 3',\r\n          action: 'immediate_escalation',\r\n          isActive: true,\r\n          dynastyResponsible: null\r\n        });\r\n        break;\r\n\r\n      case 'wanderers':\r\n        rules.push({\r\n          id: 'fleet_separation',\r\n          category: 'fleet',\r\n          condition: 'ships_lost > 1',\r\n          action: 'escalate_to_player',\r\n          isActive: true,\r\n          dynastyResponsible: null\r\n        });\r\n        break;\r\n    }\r\n\r\n    return rules;\r\n  }\r\n\r\n  // Default Delegation Rules\r\n  private static getDefaultDelegationRules(_legacy: LegacyTypeType): DelegationRule[] {\r\n    return [\r\n      {\r\n        id: 'routine_maintenance',\r\n        category: 'maintenance',\r\n        condition: 'no_critical_issues',\r\n        action: 'auto_approve_maintenance',\r\n        isActive: true,\r\n        dynastyResponsible: 'Engineering'\r\n      },\r\n      {\r\n        id: 'food_production',\r\n        category: 'resources',\r\n        condition: 'food_level_stable',\r\n        action: 'auto_manage_agriculture',\r\n        isActive: true,\r\n        dynastyResponsible: 'Agriculture'\r\n      },\r\n      {\r\n        id: 'education_continuity',\r\n        category: 'population',\r\n        condition: 'stable_population',\r\n        action: 'auto_manage_education',\r\n        isActive: true,\r\n        dynastyResponsible: 'Leadership'\r\n      },\r\n      {\r\n        id: 'security_patrols',\r\n        category: 'security',\r\n        condition: 'no_threats_detected',\r\n        action: 'auto_security_operations',\r\n        isActive: true,\r\n        dynastyResponsible: 'Security'\r\n      }\r\n    ];\r\n  }\r\n\r\n  // Default Emergency Protocols\r\n  private static getDefaultEmergencyProtocols(legacy: LegacyTypeType): Record<string, string> {\r\n    const baseProtocols = {\r\n      'hull_breach': 'seal_compartments_evacuate_affected_areas',\r\n      'life_support_failure': 'activate_emergency_systems_reduce_population_activity',\r\n      'food_shortage': 'implement_rationing_activate_emergency_reserves',\r\n      'energy_crisis': 'power_down_non_essential_systems',\r\n      'population_unrest': 'deploy_security_open_communication_channels',\r\n      'system_cascade_failure': 'activate_all_emergency_protocols_wake_leadership'\r\n    };\r\n\r\n    // Add legacy-specific protocols\r\n    switch (legacy) {\r\n      case 'preservers':\r\n        return {\r\n          ...baseProtocols,\r\n          'cultural_crisis': 'convene_elder_council_review_traditions',\r\n          'tradition_violation': 'cultural_mediation_committee'\r\n        };\r\n\r\n      case 'adaptors':\r\n        return {\r\n          ...baseProtocols,\r\n          'mutation_outbreak': 'quarantine_affected_isolate_cause',\r\n          'enhancement_failure': 'medical_intervention_genetic_counseling'\r\n        };\r\n\r\n      case 'wanderers':\r\n        return {\r\n          ...baseProtocols,\r\n          'fleet_separation': 'activate_emergency_beacons_coordinate_rendezvous',\r\n          'resource_depletion': 'implement_survival_protocols_seek_opportunities'\r\n        };\r\n\r\n      default:\r\n        return baseProtocols;\r\n    }\r\n  }\r\n\r\n  // Assign Dynasties to Council Positions\r\n  static assignCouncilPositions(\r\n    dynasties: Dynasty[],\r\n    _automationConfig: AutomationConfig\r\n  ): CouncilMember[] {\r\n    const councilPositions = [\r\n      { role: 'Chief Administrator', authority: ['resources', 'population', 'general'], priority: 'leadership' },\r\n      { role: 'Engineering Director', authority: ['systems', 'maintenance', 'construction'], priority: 'engineering' },\r\n      { role: 'Life Support Manager', authority: ['agriculture', 'health', 'environment'], priority: 'agriculture' },\r\n      { role: 'Security Chief', authority: ['security', 'emergency', 'defense'], priority: 'security' },\r\n      { role: 'Cultural Coordinator', authority: ['education', 'culture', 'morale'], priority: 'diplomacy' }\r\n    ];\r\n\r\n    const councilMembers: CouncilMember[] = [];\r\n\r\n    councilPositions.forEach(position => {\r\n      // Find best dynasty for this role\r\n      const suitableDynasties = dynasties\r\n        .filter(d => this.isDynastyQualified(d, position.priority))\r\n        .sort((a, b) => this.calculateDynastyFitness(b, position.priority) -\r\n                        this.calculateDynastyFitness(a, position.priority));\r\n\r\n      if (suitableDynasties.length > 0) {\r\n        const chosenDynasty = suitableDynasties[0];\r\n        councilMembers.push({\r\n          dynastyId: chosenDynasty.id,\r\n          role: position.role,\r\n          authority: position.authority,\r\n          performance: 0.7, // Starting performance\r\n          autonomyLevel: 0.8 // High autonomy for routine decisions\r\n        });\r\n      }\r\n    });\r\n\r\n    return councilMembers;\r\n  }\r\n\r\n  // Check if Dynasty is Qualified for Role\r\n  private static isDynastyQualified(dynasty: Dynasty, priority: string): boolean {\r\n    const specialization = dynasty.specialization.toLowerCase();\r\n    const influence = dynasty.influence;\r\n\r\n    // Minimum influence requirement\r\n    if (influence < 30) return false;\r\n\r\n    // Check specialization match\r\n    const specializationMatches: Record<string, string[]> = {\r\n      'leadership': ['leadership', 'diplomacy'],\r\n      'engineering': ['engineering', 'research'],\r\n      'agriculture': ['agriculture', 'medicine'],\r\n      'security': ['security'],\r\n      'diplomacy': ['diplomacy', 'trade', 'culture']\r\n    };\r\n\r\n    return specializationMatches[priority]?.some(spec =>\r\n      specialization.includes(spec)\r\n    ) || false;\r\n  }\r\n\r\n  // Calculate Dynasty Fitness for Role\r\n  private static calculateDynastyFitness(dynasty: Dynasty, priority: string): number {\r\n    let fitness = dynasty.influence; // Base fitness from influence\r\n\r\n    // Add leader skill bonus\r\n    const leader = dynasty.currentLeader;\r\n    switch (priority) {\r\n      case 'leadership':\r\n        fitness += leader.skills.leadership * 10;\r\n        break;\r\n      case 'engineering':\r\n        fitness += leader.skills.technical * 10;\r\n        break;\r\n      case 'agriculture':\r\n        fitness += (leader.skills.technical + leader.skills.survival) * 5;\r\n        break;\r\n      case 'security':\r\n        fitness += leader.skills.survival * 10;\r\n        break;\r\n      case 'diplomacy':\r\n        fitness += leader.skills.social * 10;\r\n        break;\r\n    }\r\n\r\n    // Add trait bonuses\r\n    leader.traits.forEach(trait => {\r\n      if (this.isRelevantTrait(trait, priority)) {\r\n        fitness += 15;\r\n      }\r\n    });\r\n\r\n    return fitness;\r\n  }\r\n\r\n  // Check if Trait is Relevant to Role\r\n  private static isRelevantTrait(trait: string, priority: string): boolean {\r\n    const traitRelevance: Record<string, string[]> = {\r\n      'leadership': ['Natural Leader', 'Strategic Thinker', 'Inspiring Presence'],\r\n      'engineering': ['Technical Genius', 'System Optimizer', 'Problem Solver'],\r\n      'agriculture': ['Life Cultivator', 'Resource Manager', 'Ecosystem Guardian'],\r\n      'security': ['Threat Assessor', 'Tactical Thinker', 'Guardian Spirit'],\r\n      'diplomacy': ['Negotiator', 'Cultural Bridge', 'Conflict Resolver']\r\n    };\r\n\r\n    return traitRelevance[priority]?.includes(trait) || false;\r\n  }\r\n\r\n  // Process Automated Decision Making\r\n  static processAutomatedDecisions(\r\n    mission: GenerationalMission,\r\n    _timeElapsed: number\r\n  ): AIDecision[] {\r\n    const decisions: AIDecision[] = [];\r\n    const config = mission.automationConfig;\r\n\r\n    // Check each council member's domain\r\n    config.councilMembers.forEach(councilMember => {\r\n      const dynasty = mission.population.dynasties.find(d => d.id === councilMember.dynastyId);\r\n      if (!dynasty) return;\r\n\r\n      // Evaluate if automated action is needed\r\n      const needsAction = this.evaluateNeedsAction(\r\n        mission,\r\n        councilMember.authority,\r\n        config.resourceThresholds\r\n      );\r\n\r\n      if (needsAction) {\r\n        const decision = DynastyService.makeAutomatedDecision(dynasty, {\r\n          availableResources: mission.resources,\r\n          populationNeeds: this.assessPopulationNeeds(mission.population.cohorts)\r\n        });\r\n\r\n        decisions.push(decision);\r\n      }\r\n    });\r\n\r\n    return decisions;\r\n  }\r\n\r\n  // Evaluate if Automated Action is Needed\r\n  private static evaluateNeedsAction(\r\n    mission: GenerationalMission,\r\n    authority: string[],\r\n    thresholds: Record<string, number>\r\n  ): boolean {\r\n    const resources = mission.resources;\r\n\r\n    // Check resource thresholds\r\n    if (authority.includes('resources')) {\r\n      if (resources.credits < thresholds.credits ||\r\n          resources.energy < thresholds.energy ||\r\n          resources.food < thresholds.food) {\r\n        return true;\r\n      }\r\n    }\r\n\r\n    // Check system thresholds\r\n    if (authority.includes('systems')) {\r\n      if (resources.hullIntegrity < thresholds.hullIntegrity ||\r\n          resources.lifeSupport < thresholds.lifeSupport) {\r\n        return true;\r\n      }\r\n    }\r\n\r\n    // Check population thresholds\r\n    if (authority.includes('population')) {\r\n      if (resources.morale < thresholds.morale ||\r\n          resources.unity < thresholds.unity) {\r\n        return true;\r\n      }\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  // Assess Population Needs\r\n  private static assessPopulationNeeds(cohorts: PopulationCohort[]): string[] {\r\n    const needs: string[] = [];\r\n\r\n    cohorts.forEach(cohort => {\r\n      if (cohort.effectiveness < 0.6) {\r\n        needs.push(`${cohort.type}_support`);\r\n      }\r\n      if (cohort.morale < 0.5) {\r\n        needs.push(`${cohort.type}_morale`);\r\n      }\r\n    });\r\n\r\n    return needs;\r\n  }\r\n\r\n  // Check if Event Should Escalate to Player\r\n  static shouldEscalateEvent(\r\n    event: MissionEvent,\r\n    config: AutomationConfig\r\n  ): boolean {\r\n    // Always escalate if event specifically requires player decision\r\n    if (event.requiresPlayerDecision) return true;\r\n\r\n    // Check escalation rules\r\n    return config.crisisEscalationRules.some(rule => {\r\n      if (!rule.isActive) return false;\r\n\r\n      // Simple rule evaluation (would be more sophisticated in production)\r\n      if (event.category === 'immediate_crisis' && rule.condition.includes('immediate')) {\r\n        return true;\r\n      }\r\n\r\n      if (event.title.toLowerCase().includes('critical') &&\r\n          rule.condition.includes('critical_threshold')) {\r\n        return true;\r\n      }\r\n\r\n      return false;\r\n    });\r\n  }\r\n\r\n  // Apply Emergency Protocol\r\n  static applyEmergencyProtocol(\r\n    protocolName: string,\r\n    mission: GenerationalMission\r\n  ): { success: boolean; effects: string[]; message: string } {\r\n    const protocol = mission.automationConfig.emergencyProtocols[protocolName];\r\n\r\n    if (!protocol) {\r\n      return {\r\n        success: false,\r\n        effects: [],\r\n        message: `Unknown emergency protocol: ${protocolName}`\r\n      };\r\n    }\r\n\r\n    // Simulate protocol effects (would be more detailed in production)\r\n    const effects: string[] = [];\r\n    let success = true;\r\n\r\n    switch (protocolName) {\r\n      case 'hull_breach':\r\n        effects.push('Sealed compartments', 'Evacuated affected areas');\r\n        mission.resources.hullIntegrity = Math.max(0.3, mission.resources.hullIntegrity);\r\n        break;\r\n\r\n      case 'life_support_failure':\r\n        effects.push('Activated emergency systems', 'Reduced population activity');\r\n        mission.resources.lifeSupport = Math.max(0.4, mission.resources.lifeSupport);\r\n        break;\r\n\r\n      case 'food_shortage':\r\n        effects.push('Implemented rationing', 'Activated emergency reserves');\r\n        mission.resources.food = Math.max(50, mission.resources.food + 100);\r\n        break;\r\n\r\n      case 'energy_crisis':\r\n        effects.push('Powered down non-essential systems');\r\n        mission.resources.energy = Math.max(100, mission.resources.energy + 200);\r\n        break;\r\n\r\n      default:\r\n        effects.push(`Applied protocol: ${protocol}`);\r\n    }\r\n\r\n    Logger.info(`Emergency protocol applied: ${protocolName}`, {\r\n      effects,\r\n      missionId: mission.id\r\n    });\r\n\r\n    return {\r\n      success,\r\n      effects,\r\n      message: `Emergency protocol \"${protocolName}\" executed successfully`\r\n    };\r\n  }\r\n\r\n  // Update Council Performance\r\n  static updateCouncilPerformance(\r\n    councilMember: CouncilMember,\r\n    outcomeSuccess: boolean\r\n  ): void {\r\n    const performanceDelta = outcomeSuccess ? 0.05 : -0.1;\r\n    councilMember.performance = Math.max(0.1, Math.min(1.0,\r\n      councilMember.performance + performanceDelta\r\n    ));\r\n\r\n    // Adjust autonomy based on performance\r\n    if (councilMember.performance > 0.8) {\r\n      councilMember.autonomyLevel = Math.min(0.95, councilMember.autonomyLevel + 0.02);\r\n    } else if (councilMember.performance < 0.4) {\r\n      councilMember.autonomyLevel = Math.max(0.3, councilMember.autonomyLevel - 0.05);\r\n    }\r\n  }\r\n}","usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\services\\ChronicleService.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'SuccessLevel' is defined but never used.","line":10,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":15},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":413,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":413,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12955,12958],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12955,12958],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":430,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":430,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13538,13541],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13538,13541],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":444,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":444,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13964,13967],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13964,13967],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'targetVersion' is defined but never used.","line":444,"column":53,"nodeType":null,"messageId":"unusedVar","endLine":444,"endColumn":66},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'mission' is defined but never used.","line":484,"column":38,"nodeType":null,"messageId":"unusedVar","endLine":484,"endColumn":45},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'mission' is defined but never used.","line":490,"column":43,"nodeType":null,"messageId":"unusedVar","endLine":490,"endColumn":50},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":490,"column":74,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":490,"endColumn":77,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15758,15761],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15758,15761],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":504,"column":74,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":504,"endColumn":77,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16077,16080],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16077,16080],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'mission' is defined but never used.","line":520,"column":41,"nodeType":null,"messageId":"unusedVar","endLine":520,"endColumn":48},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":520,"column":72,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":520,"endColumn":75,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16573,16576],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16573,16576],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'mission' is defined but never used.","line":531,"column":36,"nodeType":null,"messageId":"unusedVar","endLine":531,"endColumn":43},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":531,"column":67,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":531,"endColumn":70,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16865,16868],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16865,16868],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'mission' is defined but never used.","line":536,"column":37,"nodeType":null,"messageId":"unusedVar","endLine":536,"endColumn":44},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":536,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":536,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[17032,17035],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[17032,17035],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'mission' is defined but never used.","line":541,"column":43,"nodeType":null,"messageId":"unusedVar","endLine":541,"endColumn":50},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":541,"column":74,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":541,"endColumn":77,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[17181,17184],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[17181,17184],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'mission' is defined but never used.","line":546,"column":45,"nodeType":null,"messageId":"unusedVar","endLine":546,"endColumn":52},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":546,"column":76,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":546,"endColumn":79,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[17341,17344],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[17341,17344],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'mission' is defined but never used.","line":558,"column":41,"nodeType":null,"messageId":"unusedVar","endLine":558,"endColumn":48},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":558,"column":72,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":558,"endColumn":75,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[17644,17647],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[17644,17647],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'decision' is defined but never used.","line":575,"column":45,"nodeType":null,"messageId":"unusedVar","endLine":575,"endColumn":53},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'entry' is defined but never used.","line":575,"column":74,"nodeType":null,"messageId":"unusedVar","endLine":575,"endColumn":79},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'artifact' is defined but never used.","line":581,"column":45,"nodeType":null,"messageId":"unusedVar","endLine":581,"endColumn":53},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":581,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":581,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[18455,18458],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[18455,18458],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'entry' is defined but never used.","line":581,"column":60,"nodeType":null,"messageId":"unusedVar","endLine":581,"endColumn":65},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'entry' is defined but never used.","line":586,"column":54,"nodeType":null,"messageId":"unusedVar","endLine":586,"endColumn":59}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":27,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// services/ChronicleService.ts\nimport type {\n  Chronicle,\n  ChronicleEntry,\n  ChronicleDecision,\n  ChronicleValidationResult,\n  ChronicleExportData,\n  ChronicleSearchCriteria,\n  ChronicleStatistics,\n  SuccessLevel,\n  PopulationOutcome\n} from '../types/chronicle';\nimport type { HeritageModifier } from '../types/heritage';\nimport type { GenerationalMission } from '../types/generationalMissions';\nimport type { LegacyTypeType } from '../types/enums';\nimport type { Result } from '../utils/result';\nimport { ResultHelpers, ERROR_CODES } from '../utils/result';\nimport { validate } from '../utils/validation';\nimport { GAME_BALANCE } from '../constants/game-balance';\nimport Logger from '../utils/logger';\n\nexport class ChronicleService {\n  private static readonly STORAGE_KEY = 'stellar-legacy-chronicles';\n  private static readonly VERSION = '1.0.0';\n\n  /**\n   * Create a new chronicle entry from a completed mission\n   */\n  static createChronicleEntry(mission: GenerationalMission): ChronicleEntry {\n    const startedAt = new Date(Date.now() - (mission.currentYear * 24 * 60 * 60 * 1000)); // Approximate\n    const completedAt = new Date();\n\n    const entry: ChronicleEntry = {\n      missionId: mission.id,\n      missionName: mission.name,\n      missionNumber: this.getNextMissionNumber(),\n      startedAt,\n      completedAt,\n      realDuration: (completedAt.getTime() - startedAt.getTime()) / (1000 * 60 * 60), // hours\n\n      // Mission Parameters\n      startingLegacy: mission.legacy,\n      targetSystem: mission.targetSystemId,\n      estimatedDuration: mission.estimatedDuration,\n      actualDuration: mission.currentYear,\n\n      // Mission Outcome\n      successLevel: mission.successLevel || 'partial',\n      dominantLegacy: this.calculateDominantLegacy(mission),\n      populationOutcome: this.calculatePopulationOutcome(mission),\n      settlementResult: null, // Would be calculated based on mission outcome\n\n      // Player Choices\n      keyDecisions: this.extractKeyDecisions(mission),\n      decisionMetrics: this.calculateDecisionMetrics(mission),\n\n      // Final State\n      finalResources: { ...mission.resources },\n      finalPopulation: this.createPopulationSnapshot(mission),\n      culturalState: this.createCulturalSnapshot(mission),\n      legacyRelationships: [], // Would come from mission state\n\n      // Generated Artifacts\n      artifacts: this.generateArtifacts(mission),\n      discoveries: this.extractDiscoveries(mission),\n      legacyEvolution: this.calculateLegacyEvolution(mission),\n\n      // Performance Metrics\n      playerEngagement: this.calculateEngagementMetrics(mission),\n      aiPerformance: this.calculateAIPerformance(mission)\n    };\n\n    Logger.info('Created chronicle entry', {\n      missionId: mission.id,\n      successLevel: entry.successLevel,\n      actualDuration: entry.actualDuration\n    });\n\n    return entry;\n  }\n\n  /**\n   * Save a chronicle entry to storage\n   */\n  static async saveChronicleEntry(entry: ChronicleEntry): Promise<Result<void>> {\n    try {\n      // Validate input\n      validate.chronicleEntry(entry);\n\n      const chronicleResult = await this.loadPlayerChronicle();\n      if (!chronicleResult.success) {\n        return chronicleResult;\n      }\n\n      let chronicle = chronicleResult.data;\n      if (!chronicle) {\n        chronicle = this.createNewChronicle();\n      }\n\n      // Validate chronicle doesn't exceed maximum entries\n      if (chronicle.entries.length >= GAME_BALANCE.CHRONICLE.MAX_ENTRIES_PER_MISSION) {\n        return ResultHelpers.error(\n          'Chronicle has reached maximum entries',\n          ERROR_CODES.CHRONICLE_GENERATION_FAILED,\n          { maxEntries: GAME_BALANCE.CHRONICLE.MAX_ENTRIES_PER_MISSION, currentCount: chronicle.entries.length }\n        );\n      }\n\n      // Add entry to chronicle\n      chronicle.entries.push(entry);\n      chronicle.lastUpdated = new Date();\n\n      // Update galaxy state based on entry\n      this.updateGalaxyState(chronicle, entry);\n\n      // Save to storage\n      await this.saveChronicle(chronicle);\n\n      Logger.info('Saved chronicle entry', {\n        chronicleId: chronicle.id,\n        entryCount: chronicle.entries.length\n      });\n\n      return ResultHelpers.success(undefined);\n    } catch (error) {\n      Logger.error('Failed to save chronicle entry', error);\n      return ResultHelpers.error(\n        'Failed to save chronicle entry',\n        ERROR_CODES.CHRONICLE_GENERATION_FAILED,\n        { entry },\n        error instanceof Error ? error : new Error(String(error))\n      );\n    }\n  }\n\n  /**\n   * Generate heritage modifiers from a chronicle entry\n   */\n  static generateHeritageModifiers(entry: ChronicleEntry): Result<HeritageModifier[]> {\n    try {\n      // Validate input\n      validate.chronicleEntry(entry);\n\n      const modifiers: HeritageModifier[] = [];\n\n      // Generate modifiers based on key decisions\n      for (const decision of entry.keyDecisions) {\n        if (decision.chronicleWeight > GAME_BALANCE.CHRONICLE.HIGH_IMPACT_THRESHOLD) {\n          const modifier = this.createModifierFromDecision(decision, entry);\n          if (modifier) {\n            modifiers.push(modifier);\n          }\n        }\n      }\n\n    // Generate modifiers based on artifacts\n    for (const artifact of entry.artifacts) {\n      const modifier = this.createModifierFromArtifact(artifact, entry);\n      if (modifier) {\n        modifiers.push(modifier);\n      }\n    }\n\n    // Generate modifiers based on population outcome\n    if (entry.populationOutcome !== 'survived') {\n      const modifier = this.createModifierFromPopulationOutcome(entry);\n      if (modifier) {\n        modifiers.push(modifier);\n      }\n    }\n\n      Logger.info('Generated heritage modifiers', {\n        missionId: entry.missionId,\n        modifierCount: modifiers.length\n      });\n\n      return ResultHelpers.success(modifiers);\n    } catch (error) {\n      Logger.error('Failed to generate heritage modifiers', error);\n      return ResultHelpers.error(\n        'Failed to generate heritage modifiers',\n        ERROR_CODES.HERITAGE_GENERATION_FAILED,\n        { entry },\n        error instanceof Error ? error : new Error(String(error))\n      );\n    }\n  }\n\n  /**\n   * Load the player's main chronicle\n   */\n  static async loadPlayerChronicle(): Promise<Result<Chronicle | null>> {\n    return ResultHelpers.fromThrowable(() => {\n      const stored = localStorage.getItem(this.STORAGE_KEY);\n      if (!stored) return null;\n\n      const data = JSON.parse(stored);\n\n      // Validate and migrate if necessary\n      const validation = this.validateChronicleData(data);\n      if (!validation.isValid) {\n        Logger.warn('Invalid chronicle data found', validation.errors);\n        throw new Error(`Invalid chronicle data: ${validation.errors.join(', ')}`);\n      }\n\n      return this.migrateChronicleVersion(data, this.VERSION);\n    }, { operation: 'loadPlayerChronicle' });\n  }\n\n  /**\n   * Export chronicle data for sharing\n   */\n  static exportChronicle(chronicle: Chronicle): string {\n    const exportData: ChronicleExportData = {\n      chronicle,\n      metadata: {\n        exportedAt: new Date(),\n        version: this.VERSION,\n        checksum: this.calculateChecksum(chronicle)\n      }\n    };\n\n    return JSON.stringify(exportData, null, 2);\n  }\n\n  /**\n   * Import chronicle data from external source\n   */\n  static async importChronicle(data: string): Promise<Chronicle> {\n    try {\n      const parsed = JSON.parse(data) as ChronicleExportData;\n\n      // Validate import data\n      if (!parsed.chronicle || !parsed.metadata) {\n        throw new Error('Invalid chronicle export format');\n      }\n\n      // Verify checksum\n      const calculatedChecksum = this.calculateChecksum(parsed.chronicle);\n      if (calculatedChecksum !== parsed.metadata.checksum) {\n        throw new Error('Chronicle data integrity check failed');\n      }\n\n      // Validate chronicle structure\n      const validation = this.validateChronicleData(parsed.chronicle);\n      if (!validation.isValid) {\n        throw new Error(`Invalid chronicle data: ${validation.errors.join(', ')}`);\n      }\n\n      // Migrate to current version if needed\n      return this.migrateChronicleVersion(parsed.chronicle, this.VERSION);\n    } catch (error) {\n      Logger.error('Failed to import chronicle', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Search chronicle entries based on criteria\n   */\n  static searchChronicleEntries(\n    chronicle: Chronicle,\n    criteria: ChronicleSearchCriteria\n  ): ChronicleEntry[] {\n    let entries = [...chronicle.entries];\n\n    // Apply filters\n    if (criteria.legacyFilter?.length) {\n      entries = entries.filter(entry =>\n        criteria.legacyFilter!.includes(entry.startingLegacy) ||\n        criteria.legacyFilter!.includes(entry.dominantLegacy)\n      );\n    }\n\n    if (criteria.successLevelFilter?.length) {\n      entries = entries.filter(entry =>\n        criteria.successLevelFilter!.includes(entry.successLevel)\n      );\n    }\n\n    if (criteria.timeRangeFilter) {\n      entries = entries.filter(entry =>\n        entry.completedAt >= criteria.timeRangeFilter!.startDate &&\n        entry.completedAt <= criteria.timeRangeFilter!.endDate\n      );\n    }\n\n    if (criteria.textSearch) {\n      const searchTerm = criteria.textSearch.toLowerCase();\n      entries = entries.filter(entry =>\n        entry.missionName.toLowerCase().includes(searchTerm) ||\n        entry.targetSystem.toLowerCase().includes(searchTerm) ||\n        entry.keyDecisions.some(decision =>\n          decision.title.toLowerCase().includes(searchTerm) ||\n          decision.description.toLowerCase().includes(searchTerm)\n        )\n      );\n    }\n\n    if (criteria.minimumDuration !== undefined) {\n      entries = entries.filter(entry => entry.actualDuration >= criteria.minimumDuration!);\n    }\n\n    if (criteria.maximumDuration !== undefined) {\n      entries = entries.filter(entry => entry.actualDuration <= criteria.maximumDuration!);\n    }\n\n    return entries;\n  }\n\n  /**\n   * Calculate comprehensive chronicle statistics\n   */\n  static calculateChronicleStatistics(chronicle: Chronicle): ChronicleStatistics {\n    const entries = chronicle.entries;\n\n    if (entries.length === 0) {\n      return this.getEmptyStatistics();\n    }\n\n    const totalPlayTime = entries.reduce((sum, entry) => sum + entry.realDuration, 0);\n    const successfulMissions = entries.filter(entry =>\n      entry.successLevel === 'complete' || entry.successLevel === 'partial'\n    ).length;\n\n    const legacyDistribution: Record<LegacyTypeType, number> = {\n      preservers: 0,\n      adaptors: 0,\n      wanderers: 0\n    };\n\n    // Calculate legacy distribution\n    entries.forEach(entry => {\n      legacyDistribution[entry.startingLegacy]++;\n    });\n\n    // Extract decision patterns\n    const decisionPatterns: Record<string, number> = {};\n    entries.forEach(entry => {\n      entry.keyDecisions.forEach(decision => {\n        const pattern = `${decision.category}_${decision.urgency}`;\n        decisionPatterns[pattern] = (decisionPatterns[pattern] || 0) + 1;\n      });\n    });\n\n    return {\n      totalMissions: entries.length,\n      totalPlayTime,\n      successRate: successfulMissions / entries.length,\n      favoriteSpaces: this.extractFavoriteSpaces(entries),\n      mostUsedChoices: this.extractMostUsedChoices(entries),\n      legacyDistribution,\n      averageMissionDuration: entries.reduce((sum, entry) => sum + entry.actualDuration, 0) / entries.length,\n      decisionPatterns\n    };\n  }\n\n  // Private helper methods\n  private static createNewChronicle(): Chronicle {\n    return {\n      id: this.generateId(),\n      version: this.VERSION,\n      playerName: 'Unknown Explorer',\n      createdAt: new Date(),\n      lastUpdated: new Date(),\n      entries: [],\n      galaxyState: {\n        exploredSystems: [],\n        establishedColonies: [],\n        knownThreats: [],\n        diplomaticRelations: {},\n        sharedKnowledge: []\n      },\n      playerLegacy: {\n        preferredLegacy: 'preservers',\n        legacyExperience: {\n          preservers: 0,\n          adaptors: 0,\n          wanderers: 0\n        },\n        characteristicChoices: [],\n        narrativePreferences: {\n          preferredComplexity: 'moderate',\n          decisionSpeed: 'moderate',\n          riskTolerance: 'balanced',\n          contentFocus: {\n            exploration: 0.5,\n            diplomacy: 0.5,\n            technology: 0.5,\n            culture: 0.5,\n            survival: 0.5\n          }\n        }\n      }\n    };\n  }\n\n  private static async saveChronicle(chronicle: Chronicle): Promise<void> {\n    try {\n      const serialized = JSON.stringify(chronicle);\n      localStorage.setItem(this.STORAGE_KEY, serialized);\n\n      Logger.info('Chronicle saved successfully', {\n        chronicleId: chronicle.id,\n        entryCount: chronicle.entries.length\n      });\n    } catch (error) {\n      Logger.error('Failed to save chronicle to storage', error);\n      throw error;\n    }\n  }\n\n  private static validateChronicleData(data: any): ChronicleValidationResult {\n    const errors: string[] = [];\n    const warnings: string[] = [];\n\n    if (!data) {\n      errors.push('Chronicle data is null or undefined');\n      return { isValid: false, errors, warnings };\n    }\n\n    if (!data.id) errors.push('Chronicle missing required ID');\n    if (!data.version) warnings.push('Chronicle missing version information');\n    if (!data.entries || !Array.isArray(data.entries)) {\n      errors.push('Chronicle entries must be an array');\n    }\n\n    // Validate entries\n    if (data.entries) {\n      data.entries.forEach((entry: any, index: number) => {\n        if (!entry.missionId) errors.push(`Entry ${index} missing missionId`);\n        if (!entry.missionName) errors.push(`Entry ${index} missing missionName`);\n        if (!entry.successLevel) errors.push(`Entry ${index} missing successLevel`);\n      });\n    }\n\n    return {\n      isValid: errors.length === 0,\n      errors,\n      warnings\n    };\n  }\n\n  private static migrateChronicleVersion(data: any, targetVersion: string): Chronicle {\n    // For now, just return the data as-is since we're on version 1.0.0\n    // Future versions would implement migration logic here\n    return data as Chronicle;\n  }\n\n  private static calculateChecksum(chronicle: Chronicle): string {\n    // Simple checksum calculation - in production would use a proper hash\n    const str = JSON.stringify(chronicle);\n    let hash = 0;\n    for (let i = 0; i < str.length; i++) {\n      const char = str.charCodeAt(i);\n      hash = ((hash << 5) - hash) + char;\n      hash = hash & hash; // Convert to 32-bit integer\n    }\n    return hash.toString(16);\n  }\n\n  private static getNextMissionNumber(): number {\n    // This would query existing chronicles to determine the next mission number\n    // For now, just return 1\n    return 1;\n  }\n\n  private static calculateDominantLegacy(mission: GenerationalMission): LegacyTypeType {\n    // Analyze mission decisions and outcomes to determine dominant legacy\n    // For now, just return the starting legacy\n    return mission.legacy;\n  }\n\n  private static calculatePopulationOutcome(mission: GenerationalMission): PopulationOutcome {\n    const populationRatio = mission.population.total / 10000; // Assuming 10k starting population\n\n    if (populationRatio > 1.5) return 'thrived';\n    if (populationRatio > 1.0) return 'survived';\n    if (populationRatio > 0.5) return 'diminished';\n    if (populationRatio > 0.1) return 'transformed';\n    return 'extinct';\n  }\n\n  private static extractKeyDecisions(mission: GenerationalMission): ChronicleDecision[] {\n    // Extract significant decisions from mission history\n    // This would analyze the mission's event history and decision points\n    return [];\n  }\n\n  private static calculateDecisionMetrics(mission: GenerationalMission): any {\n    return {\n      totalDecisions: 0,\n      averageDecisionTime: 30,\n      consensusRate: 0.5,\n      innovationRate: 0.3,\n      legacyConsistency: {\n        preservers: 0.7,\n        adaptors: 0.3,\n        wanderers: 0.2\n      }\n    };\n  }\n\n  private static createPopulationSnapshot(mission: GenerationalMission): any {\n    return {\n      total: mission.population.total,\n      byLegacy: {\n        preservers: mission.population.total * 0.4,\n        adaptors: mission.population.total * 0.3,\n        wanderers: mission.population.total * 0.3\n      },\n      byCohort: {},\n      averageAge: 35,\n      morale: mission.population.morale,\n      unity: mission.population.unity,\n      culturalDrift: mission.population.culturalDrift\n    };\n  }\n\n  private static createCulturalSnapshot(mission: GenerationalMission): any {\n    return {\n      dominantValues: ['exploration', 'preservation'],\n      emergentTraditions: [],\n      languageEvolution: [],\n      artStyles: [],\n      religiousBeliefs: [],\n      technicalPhilosophies: []\n    };\n  }\n\n  private static generateArtifacts(mission: GenerationalMission): any[] {\n    // Generate artifacts based on mission achievements and discoveries\n    return [];\n  }\n\n  private static extractDiscoveries(mission: GenerationalMission): any[] {\n    // Extract discoveries from mission history\n    return [];\n  }\n\n  private static calculateLegacyEvolution(mission: GenerationalMission): any[] {\n    // Calculate how legacies evolved during the mission\n    return [];\n  }\n\n  private static calculateEngagementMetrics(mission: GenerationalMission): any {\n    return {\n      totalPlayTime: 10,\n      activeDecisionTime: 3,\n      automationUsage: 0.3,\n      eventsTriggered: 50,\n      eventsResolved: 45,\n      playerInitiatedActions: 100,\n      averageSessionLength: 45\n    };\n  }\n\n  private static calculateAIPerformance(mission: GenerationalMission): any {\n    return {\n      decisionsAutomated: 30,\n      playerOverrides: 5,\n      successfulPredictions: 25,\n      averageConfidence: 0.75,\n      learningProgress: 0.6\n    };\n  }\n\n  private static updateGalaxyState(chronicle: Chronicle, entry: ChronicleEntry): void {\n    // Update galaxy state based on the new entry\n    if (!chronicle.galaxyState.exploredSystems.includes(entry.targetSystem)) {\n      chronicle.galaxyState.exploredSystems.push(entry.targetSystem);\n    }\n  }\n\n  private static createModifierFromDecision(decision: ChronicleDecision, entry: ChronicleEntry): HeritageModifier | null {\n    // Create heritage modifier based on significant decision\n    // This would be a complex algorithm analyzing the decision's impact\n    return null;\n  }\n\n  private static createModifierFromArtifact(artifact: any, entry: ChronicleEntry): HeritageModifier | null {\n    // Create heritage modifier based on discovered artifact\n    return null;\n  }\n\n  private static createModifierFromPopulationOutcome(entry: ChronicleEntry): HeritageModifier | null {\n    // Create heritage modifier based on population outcome\n    return null;\n  }\n\n  private static getEmptyStatistics(): ChronicleStatistics {\n    return {\n      totalMissions: 0,\n      totalPlayTime: 0,\n      successRate: 0,\n      favoriteSpaces: [],\n      mostUsedChoices: [],\n      legacyDistribution: { preservers: 0, adaptors: 0, wanderers: 0 },\n      averageMissionDuration: 0,\n      decisionPatterns: {}\n    };\n  }\n\n  private static extractFavoriteSpaces(entries: ChronicleEntry[]): string[] {\n    const spaceCounts: Record<string, number> = {};\n    entries.forEach(entry => {\n      spaceCounts[entry.targetSystem] = (spaceCounts[entry.targetSystem] || 0) + 1;\n    });\n\n    return Object.entries(spaceCounts)\n      .sort(([, a], [, b]) => b - a)\n      .slice(0, 5)\n      .map(([space]) => space);\n  }\n\n  private static extractMostUsedChoices(entries: ChronicleEntry[]): string[] {\n    const choiceCounts: Record<string, number> = {};\n    entries.forEach(entry => {\n      entry.keyDecisions.forEach(decision => {\n        choiceCounts[decision.choice] = (choiceCounts[decision.choice] || 0) + 1;\n      });\n    });\n\n    return Object.entries(choiceCounts)\n      .sort(([, a], [, b]) => b - a)\n      .slice(0, 10)\n      .map(([choice]) => choice);\n  }\n\n  private static generateId(): string {\n    return `chronicle_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n  }\n}","usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\services\\DecisionTrackingService.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'actualCount' is assigned a value but never used.","line":377,"column":15,"nodeType":null,"messageId":"unusedVar","endLine":377,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'mission' is defined but never used.","line":549,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":549,"endColumn":12}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// services/DecisionTrackingService.ts\nimport type {\n  ChronicleDecision,\n  LongTermEffect,\n  DecisionCategory,\n  DecisionUrgency,\n  DecisionScope,\n  ImmediateConsequence\n} from '../types/chronicle';\nimport type { GenerationalMission } from '../types/generationalMissions';\nimport type { LegacyTypeType } from '../types/enums';\nimport Logger from '../utils/logger';\n\nexport interface DecisionInput {\n  title: string;\n  description: string;\n  context: string;\n  category: DecisionCategory;\n  choice: string;\n  alternatives: string[];\n  urgency: DecisionUrgency;\n  scope: DecisionScope;\n  immediateConsequences: ImmediateConsequence[];\n  predictedLongTermEffects: string[];\n}\n\nexport interface DecisionLedger {\n  entries: DecisionEntry[];\n  consequenceChains: ConsequenceChain[];\n  playerReflections: PlayerReflection[];\n}\n\nexport interface DecisionEntry {\n  id: string;\n  year: number;\n  generation: number;\n  decision: ChronicleDecision;\n  context: string;\n  alternativeChoices: string[];\n\n  // Immediate Effects\n  immediateConsequences: string[];\n  resourceChanges: Record<string, number>;\n\n  // Long-term Tracking\n  longTermConsequences: LongTermEffect[];\n  chronicleImpact: number; // How much this decision shapes the chronicle\n}\n\nexport interface ConsequenceChain {\n  originDecisionId: string;\n  chainEvents: ChainEvent[];\n  stillActive: boolean;\n  finalOutcome: string | null;\n}\n\nexport interface ChainEvent {\n  year: number;\n  description: string;\n  severity: 'minor' | 'moderate' | 'major' | 'civilization-defining';\n  references: string[]; // References to original decision\n}\n\nexport interface PlayerReflection {\n  decisionId: string;\n  reflectionText: string;\n  timestamp: Date;\n  satisfaction: number; // 1-5 rating\n  wouldChooseDifferently: boolean;\n  lessons: string[];\n}\n\nexport interface DecisionFilter {\n  categories?: DecisionCategory[];\n  urgencyLevels?: DecisionUrgency[];\n  scopes?: DecisionScope[];\n  timeRange?: {\n    startYear: number;\n    endYear: number;\n  };\n  legacyFilter?: LegacyTypeType[];\n  impactThreshold?: number;\n  textSearch?: string;\n}\n\nexport interface DecisionPattern {\n  pattern: string;\n  frequency: number;\n  outcomes: string[];\n  averageImpact: number;\n  playerSatisfaction: number;\n}\n\nexport interface DecisionAnalytics {\n  totalDecisions: number;\n  decisionsByCategory: Record<DecisionCategory, number>;\n  decisionsByUrgency: Record<DecisionUrgency, number>;\n  decisionsByScope: Record<DecisionScope, number>;\n  averageImpact: number;\n  averageSatisfaction: number;\n  commonPatterns: DecisionPattern[];\n  consequenceAccuracy: number; // How often predictions matched reality\n}\n\nexport class DecisionTrackingService {\n  private static readonly DECISION_STORAGE_KEY = 'stellar-legacy-decision-ledger';\n  private static currentLedger: DecisionLedger | null = null;\n\n  /**\n   * Record a new decision made by the player\n   */\n  static recordDecision(\n    decision: DecisionInput,\n    mission: GenerationalMission\n  ): DecisionEntry {\n    try {\n      const chronicleDecision: ChronicleDecision = {\n        id: this.generateDecisionId(),\n        title: decision.title,\n        description: decision.description,\n        context: decision.context,\n        year: mission.currentYear,\n        generation: Math.floor(mission.currentYear / 25), // Assuming 25 years per generation\n        phase: mission.currentPhase,\n        category: decision.category,\n        choice: decision.choice,\n        alternatives: decision.alternatives,\n        urgency: decision.urgency,\n        scope: decision.scope,\n        immediateConsequences: decision.immediateConsequences,\n        predictedLongTermEffects: decision.predictedLongTermEffects,\n        actualLongTermEffects: [],\n        referencedDecisions: this.findReferencedDecisions(decision, mission),\n        chronicleWeight: this.calculateChronicleWeight(decision, mission),\n        legacyAlignment: this.calculateLegacyAlignment(decision, mission)\n      };\n\n      const entry: DecisionEntry = {\n        id: chronicleDecision.id,\n        year: mission.currentYear,\n        generation: Math.floor(mission.currentYear / 25),\n        decision: chronicleDecision,\n        context: this.generateDecisionContext(decision, mission),\n        alternativeChoices: decision.alternatives,\n        immediateConsequences: decision.immediateConsequences.map(c => c.description),\n        resourceChanges: this.extractResourceChanges(decision.immediateConsequences),\n        longTermConsequences: [],\n        chronicleImpact: chronicleDecision.chronicleWeight\n      };\n\n      // Add to ledger\n      this.addToLedger(entry);\n\n      // Start tracking consequence chains\n      this.initializeConsequenceChain(entry);\n\n      Logger.info('Decision recorded', {\n        decisionId: entry.id,\n        title: decision.title,\n        category: decision.category,\n        chronicleWeight: chronicleDecision.chronicleWeight\n      });\n\n      return entry;\n    } catch (error) {\n      Logger.error('Failed to record decision', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Track the manifestation of a long-term effect\n   */\n  static trackConsequence(\n    decisionId: string,\n    consequence: LongTermEffect,\n    mission: GenerationalMission\n  ): void {\n    try {\n      const ledger = this.getLedger();\n      const entry = ledger.entries.find(e => e.id === decisionId);\n\n      if (!entry) {\n        Logger.warn('Decision not found for consequence tracking', { decisionId });\n        return;\n      }\n\n      // Add to decision's long-term consequences\n      entry.longTermConsequences.push(consequence);\n\n      // Update consequence chain\n      const chain = ledger.consequenceChains.find(c => c.originDecisionId === decisionId);\n      if (chain) {\n        chain.chainEvents.push({\n          year: mission.currentYear,\n          description: consequence.description,\n          severity: consequence.severity,\n          references: [decisionId]\n        });\n\n        // Check if this is a final outcome\n        if (consequence.severity === 'civilization-defining') {\n          chain.stillActive = false;\n          chain.finalOutcome = consequence.description;\n        }\n      }\n\n      // Update chronicle weight based on actual impact\n      this.updateChronicleWeight(entry, consequence);\n\n      // Save updated ledger\n      this.saveLedger(ledger);\n\n      Logger.info('Consequence tracked', {\n        decisionId,\n        consequenceYear: consequence.manifestYear,\n        severity: consequence.severity\n      });\n    } catch (error) {\n      Logger.error('Failed to track consequence', error);\n    }\n  }\n\n  /**\n   * Review decision history with filters\n   */\n  static reviewDecisionHistory(filters: DecisionFilter): DecisionEntry[] {\n    try {\n      const ledger = this.getLedger();\n      let entries = [...ledger.entries];\n\n      // Apply filters\n      if (filters.categories?.length) {\n        entries = entries.filter(entry => filters.categories!.includes(entry.decision.category));\n      }\n\n      if (filters.urgencyLevels?.length) {\n        entries = entries.filter(entry => filters.urgencyLevels!.includes(entry.decision.urgency));\n      }\n\n      if (filters.scopes?.length) {\n        entries = entries.filter(entry => filters.scopes!.includes(entry.decision.scope));\n      }\n\n      if (filters.timeRange) {\n        entries = entries.filter(entry =>\n          entry.year >= filters.timeRange!.startYear &&\n          entry.year <= filters.timeRange!.endYear\n        );\n      }\n\n      if (filters.legacyFilter?.length) {\n        entries = entries.filter(entry => {\n          return filters.legacyFilter!.some(legacy =>\n            Object.keys(entry.decision.legacyAlignment).includes(legacy) &&\n            entry.decision.legacyAlignment[legacy] > 0\n          );\n        });\n      }\n\n      if (filters.impactThreshold !== undefined) {\n        entries = entries.filter(entry => entry.chronicleImpact >= filters.impactThreshold!);\n      }\n\n      if (filters.textSearch) {\n        const searchTerm = filters.textSearch.toLowerCase();\n        entries = entries.filter(entry =>\n          entry.decision.title.toLowerCase().includes(searchTerm) ||\n          entry.decision.description.toLowerCase().includes(searchTerm) ||\n          entry.decision.choice.toLowerCase().includes(searchTerm)\n        );\n      }\n\n      // Sort by year (most recent first)\n      entries.sort((a, b) => b.year - a.year);\n\n      Logger.info('Decision history reviewed', {\n        totalEntries: ledger.entries.length,\n        filteredEntries: entries.length\n      });\n\n      return entries;\n    } catch (error) {\n      Logger.error('Failed to review decision history', error);\n      return [];\n    }\n  }\n\n  /**\n   * Add player reflection on a decision\n   */\n  static addPlayerReflection(\n    decisionId: string,\n    reflectionText: string,\n    satisfaction: number,\n    wouldChooseDifferently: boolean,\n    lessons: string[]\n  ): void {\n    try {\n      const reflection: PlayerReflection = {\n        decisionId,\n        reflectionText,\n        timestamp: new Date(),\n        satisfaction,\n        wouldChooseDifferently,\n        lessons\n      };\n\n      const ledger = this.getLedger();\n      ledger.playerReflections.push(reflection);\n      this.saveLedger(ledger);\n\n      Logger.info('Player reflection added', {\n        decisionId,\n        satisfaction,\n        wouldChooseDifferently\n      });\n    } catch (error) {\n      Logger.error('Failed to add player reflection', error);\n    }\n  }\n\n  /**\n   * Analyze decision patterns and provide insights\n   */\n  static analyzeDecisionPatterns(): DecisionAnalytics {\n    try {\n      const ledger = this.getLedger();\n      const entries = ledger.entries;\n\n      if (entries.length === 0) {\n        return this.getEmptyAnalytics();\n      }\n\n      // Count decisions by category\n      const decisionsByCategory: Record<DecisionCategory, number> = {\n        resource: 0,\n        population: 0,\n        cultural: 0,\n        diplomatic: 0,\n        crisis: 0,\n        exploration: 0,\n        legacy: 0\n      };\n\n      // Count decisions by urgency\n      const decisionsByUrgency: Record<DecisionUrgency, number> = {\n        immediate: 0,\n        urgent: 0,\n        moderate: 0,\n        routine: 0\n      };\n\n      // Count decisions by scope\n      const decisionsByScope: Record<DecisionScope, number> = {\n        individual: 0,\n        cohort: 0,\n        dynasty: 0,\n        legacy: 0,\n        civilization: 0\n      };\n\n      let totalImpact = 0;\n      let totalSatisfaction = 0;\n      let satisfactionCount = 0;\n      let correctPredictions = 0;\n      let totalPredictions = 0;\n\n      entries.forEach(entry => {\n        decisionsByCategory[entry.decision.category]++;\n        decisionsByUrgency[entry.decision.urgency]++;\n        decisionsByScope[entry.decision.scope]++;\n        totalImpact += entry.chronicleImpact;\n\n        // Check prediction accuracy\n        const predictedCount = entry.decision.predictedLongTermEffects.length;\n        const actualCount = entry.longTermConsequences.length;\n\n        if (predictedCount > 0) {\n          totalPredictions += predictedCount;\n          // Simple accuracy check - in reality would be more sophisticated\n          const matchingPredictions = entry.decision.predictedLongTermEffects.filter(prediction =>\n            entry.longTermConsequences.some(actual =>\n              actual.description.toLowerCase().includes(prediction.toLowerCase())\n            )\n          ).length;\n          correctPredictions += matchingPredictions;\n        }\n      });\n\n      // Calculate satisfaction from reflections\n      ledger.playerReflections.forEach(reflection => {\n        totalSatisfaction += reflection.satisfaction;\n        satisfactionCount++;\n      });\n\n      // Identify common patterns\n      const commonPatterns = this.identifyDecisionPatterns(entries);\n\n      return {\n        totalDecisions: entries.length,\n        decisionsByCategory,\n        decisionsByUrgency,\n        decisionsByScope,\n        averageImpact: totalImpact / entries.length,\n        averageSatisfaction: satisfactionCount > 0 ? totalSatisfaction / satisfactionCount : 0,\n        commonPatterns,\n        consequenceAccuracy: totalPredictions > 0 ? correctPredictions / totalPredictions : 0\n      };\n    } catch (error) {\n      Logger.error('Failed to analyze decision patterns', error);\n      return this.getEmptyAnalytics();\n    }\n  }\n\n  /**\n   * Generate narrative references to past decisions\n   */\n  static generateDecisionReferences(\n    currentContext: string,\n    mission: GenerationalMission\n  ): string[] {\n    try {\n      const ledger = this.getLedger();\n      const relevantDecisions = this.findRelevantDecisions(currentContext, ledger.entries);\n\n      return relevantDecisions.map(entry => {\n        const timeAgo = mission.currentYear - entry.year;\n        const generationAgo = Math.floor(timeAgo / 25);\n\n        if (generationAgo === 0) {\n          return `The recent decision to ${entry.decision.choice} still influences current events.`;\n        } else if (generationAgo === 1) {\n          return `The previous generation's choice to ${entry.decision.choice} echoes in today's challenges.`;\n        } else {\n          return `${generationAgo} generations ago, ancestors chose to ${entry.decision.choice}, setting the stage for current circumstances.`;\n        }\n      });\n    } catch (error) {\n      Logger.error('Failed to generate decision references', error);\n      return [];\n    }\n  }\n\n  /**\n   * Get consequence chain for a specific decision\n   */\n  static getConsequenceChain(decisionId: string): ConsequenceChain | null {\n    try {\n      const ledger = this.getLedger();\n      return ledger.consequenceChains.find(chain => chain.originDecisionId === decisionId) || null;\n    } catch (error) {\n      Logger.error('Failed to get consequence chain', error);\n      return null;\n    }\n  }\n\n  /**\n   * Export decision ledger for chronicle\n   */\n  static exportDecisionLedger(): DecisionLedger {\n    return this.getLedger();\n  }\n\n  /**\n   * Import decision ledger from chronicle\n   */\n  static importDecisionLedger(ledger: DecisionLedger): void {\n    try {\n      this.saveLedger(ledger);\n      this.currentLedger = ledger;\n\n      Logger.info('Decision ledger imported', {\n        entryCount: ledger.entries.length,\n        chainCount: ledger.consequenceChains.length\n      });\n    } catch (error) {\n      Logger.error('Failed to import decision ledger', error);\n      throw error;\n    }\n  }\n\n  // Private helper methods\n\n  private static getLedger(): DecisionLedger {\n    if (!this.currentLedger) {\n      this.currentLedger = this.loadLedger();\n    }\n    return this.currentLedger;\n  }\n\n  private static loadLedger(): DecisionLedger {\n    try {\n      const stored = localStorage.getItem(this.DECISION_STORAGE_KEY);\n      if (stored) {\n        return JSON.parse(stored);\n      }\n    } catch (error) {\n      Logger.error('Failed to load decision ledger', error);\n    }\n\n    return {\n      entries: [],\n      consequenceChains: [],\n      playerReflections: []\n    };\n  }\n\n  private static saveLedger(ledger: DecisionLedger): void {\n    try {\n      localStorage.setItem(this.DECISION_STORAGE_KEY, JSON.stringify(ledger));\n      this.currentLedger = ledger;\n    } catch (error) {\n      Logger.error('Failed to save decision ledger', error);\n      throw error;\n    }\n  }\n\n  private static addToLedger(entry: DecisionEntry): void {\n    const ledger = this.getLedger();\n    ledger.entries.push(entry);\n    this.saveLedger(ledger);\n  }\n\n  private static findReferencedDecisions(\n    decision: DecisionInput,\n    mission: GenerationalMission\n  ): string[] {\n    const ledger = this.getLedger();\n    const references: string[] = [];\n\n    // Find decisions in the same category within recent years\n    const recentDecisions = ledger.entries.filter(entry =>\n      entry.decision.category === decision.category &&\n      mission.currentYear - entry.year <= 50 // Within 50 years\n    );\n\n    // Add the most impactful recent decision as a reference\n    const mostImpactful = recentDecisions.sort((a, b) => b.chronicleImpact - a.chronicleImpact)[0];\n    if (mostImpactful) {\n      references.push(mostImpactful.id);\n    }\n\n    return references;\n  }\n\n  private static calculateChronicleWeight(\n    decision: DecisionInput,\n    mission: GenerationalMission\n  ): number {\n    let weight = 0.5; // Base weight\n\n    // Increase weight based on urgency\n    switch (decision.urgency) {\n      case 'immediate': weight += 0.3; break;\n      case 'urgent': weight += 0.2; break;\n      case 'moderate': weight += 0.1; break;\n      case 'routine': break;\n    }\n\n    // Increase weight based on scope\n    switch (decision.scope) {\n      case 'civilization': weight += 0.4; break;\n      case 'legacy': weight += 0.3; break;\n      case 'dynasty': weight += 0.2; break;\n      case 'cohort': weight += 0.1; break;\n      case 'individual': break;\n    }\n\n    // Increase weight based on number of predicted long-term effects\n    weight += decision.predictedLongTermEffects.length * 0.05;\n\n    // Increase weight if it affects multiple resource types\n    const resourceTypes = decision.immediateConsequences\n      .filter(c => c.type === 'resource')\n      .map(c => c.affectedTargets)\n      .flat();\n    weight += new Set(resourceTypes).size * 0.02;\n\n    return Math.min(1.0, weight);\n  }\n\n  private static calculateLegacyAlignment(\n    decision: DecisionInput,\n    mission: GenerationalMission\n  ): Record<LegacyTypeType, number> {\n    const alignment: Record<LegacyTypeType, number> = {\n      preservers: 0,\n      adaptors: 0,\n      wanderers: 0\n    };\n\n    // Simple alignment calculation based on decision category and choice\n    // In a real implementation, this would be more sophisticated\n    switch (decision.category) {\n      case 'cultural':\n        alignment.preservers = 0.8;\n        alignment.adaptors = -0.2;\n        break;\n      case 'exploration':\n        alignment.wanderers = 0.8;\n        alignment.preservers = -0.2;\n        break;\n      case 'resource':\n        alignment.adaptors = 0.6;\n        break;\n    }\n\n    // Adjust based on mission's current legacy\n    const currentLegacy = mission.legacy;\n    alignment[currentLegacy] += 0.3;\n\n    return alignment;\n  }\n\n  private static generateDecisionContext(\n    decision: DecisionInput,\n    mission: GenerationalMission\n  ): string {\n    return `During ${mission.currentPhase} phase of year ${mission.currentYear}, facing ${decision.urgency} ${decision.category} decision affecting ${decision.scope} level.`;\n  }\n\n  private static extractResourceChanges(consequences: ImmediateConsequence[]): Record<string, number> {\n    const changes: Record<string, number> = {};\n\n    consequences\n      .filter(c => c.type === 'resource')\n      .forEach(c => {\n        c.affectedTargets.forEach(target => {\n          changes[target] = (changes[target] || 0) + (c.magnitude * 100); // Scale magnitude\n        });\n      });\n\n    return changes;\n  }\n\n  private static initializeConsequenceChain(entry: DecisionEntry): void {\n    const ledger = this.getLedger();\n\n    const chain: ConsequenceChain = {\n      originDecisionId: entry.id,\n      chainEvents: [{\n        year: entry.year,\n        description: `Decision made: ${entry.decision.choice}`,\n        severity: 'minor',\n        references: [entry.id]\n      }],\n      stillActive: true,\n      finalOutcome: null\n    };\n\n    ledger.consequenceChains.push(chain);\n    this.saveLedger(ledger);\n  }\n\n  private static updateChronicleWeight(entry: DecisionEntry, consequence: LongTermEffect): void {\n    // Increase chronicle weight based on the severity of actual consequences\n    const weightIncrease = {\n      'minor': 0.05,\n      'moderate': 0.1,\n      'major': 0.2,\n      'civilization-defining': 0.4\n    }[consequence.severity];\n\n    entry.chronicleImpact = Math.min(1.0, entry.chronicleImpact + weightIncrease);\n    entry.decision.chronicleWeight = entry.chronicleImpact;\n  }\n\n  private static identifyDecisionPatterns(entries: DecisionEntry[]): DecisionPattern[] {\n    const patterns: Map<string, DecisionPattern> = new Map();\n\n    entries.forEach(entry => {\n      const patternKey = `${entry.decision.category}_${entry.decision.urgency}`;\n\n      if (!patterns.has(patternKey)) {\n        patterns.set(patternKey, {\n          pattern: `${entry.decision.category} decisions with ${entry.decision.urgency} urgency`,\n          frequency: 0,\n          outcomes: [],\n          averageImpact: 0,\n          playerSatisfaction: 0\n        });\n      }\n\n      const pattern = patterns.get(patternKey)!;\n      pattern.frequency++;\n      pattern.outcomes.push(entry.decision.choice);\n      pattern.averageImpact += entry.chronicleImpact;\n    });\n\n    // Convert to array and calculate averages\n    return Array.from(patterns.values()).map(pattern => ({\n      ...pattern,\n      averageImpact: pattern.averageImpact / pattern.frequency,\n      // Player satisfaction would be calculated from reflections in a real implementation\n      playerSatisfaction: 3.5 // Placeholder\n    })).sort((a, b) => b.frequency - a.frequency);\n  }\n\n  private static findRelevantDecisions(context: string, entries: DecisionEntry[]): DecisionEntry[] {\n    const contextLower = context.toLowerCase();\n\n    // Find decisions with similar context or category keywords\n    const relevant = entries.filter(entry => {\n      const entryContext = `${entry.decision.title} ${entry.decision.description} ${entry.decision.category}`.toLowerCase();\n      return entryContext.split(' ').some(word => contextLower.includes(word) && word.length > 3);\n    });\n\n    // Sort by impact and recency\n    return relevant\n      .sort((a, b) => (b.chronicleImpact + (100 - b.year) / 1000) - (a.chronicleImpact + (100 - a.year) / 1000))\n      .slice(0, 3); // Return top 3 most relevant\n  }\n\n  private static getEmptyAnalytics(): DecisionAnalytics {\n    return {\n      totalDecisions: 0,\n      decisionsByCategory: {\n        resource: 0,\n        population: 0,\n        cultural: 0,\n        diplomatic: 0,\n        crisis: 0,\n        exploration: 0,\n        legacy: 0\n      },\n      decisionsByUrgency: {\n        immediate: 0,\n        urgent: 0,\n        moderate: 0,\n        routine: 0\n      },\n      decisionsByScope: {\n        individual: 0,\n        cohort: 0,\n        dynasty: 0,\n        legacy: 0,\n        civilization: 0\n      },\n      averageImpact: 0,\n      averageSatisfaction: 0,\n      commonPatterns: [],\n      consequenceAccuracy: 0\n    };\n  }\n\n  private static generateDecisionId(): string {\n    return `decision_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n  }\n}","usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\services\\DynastyService.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":259,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":259,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9545,9548],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9545,9548],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":288,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":288,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10351,10354],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10351,10354],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// services/DynastyService.ts\r\nimport type {\r\n  Dynasty,\r\n  DynastyMember,\r\n  StoryThread,\r\n  PopulationCohort,\r\n  AIDecision,\r\n  MissionEvent\r\n} from '../types/generationalMissions';\r\nimport type { LegacyTypeType, CohortTypeType } from '../types/enums';\r\nimport Logger from '../utils/logger';\r\n\r\nexport class DynastyService {\r\n  private static readonly DYNASTY_NAMES = {\r\n    preservers: [\r\n      'Chen', 'Rodriguez', 'Anderson', 'Kim', 'Okafor', 'Singh',\r\n      'Mueller', 'Yamamoto', 'Santos', 'Petrov'\r\n    ],\r\n    adaptors: [\r\n      'Helix', 'Strand', 'Nexus', 'Prime', 'Vex', 'Zara',\r\n      'Kaine', 'Flux', 'Nova', 'Arc'\r\n    ],\r\n    wanderers: [\r\n      'Drift', 'Void', 'Star', 'Wind', 'Path', 'Journey',\r\n      'Horizon', 'Nomad', 'Traverse', 'Wander'\r\n    ]\r\n  };\r\n\r\n  private static readonly SPECIALIZATIONS = [\r\n    'Engineering', 'Agriculture', 'Research', 'Security', 'Diplomacy',\r\n    'Medicine', 'Navigation', 'Trade', 'Culture', 'Education'\r\n  ];\r\n\r\n  private static readonly TRAITS = {\r\n    preservers: [\r\n      'Traditional Wisdom', 'Cultural Guardian', 'Historical Memory',\r\n      'Steady Leadership', 'Heritage Keeper'\r\n    ],\r\n    adaptors: [\r\n      'Genetic Innovation', 'Adaptive Thinking', 'Evolution Mastery',\r\n      'Biological Enhancement', 'Mutation Resistance'\r\n    ],\r\n    wanderers: [\r\n      'Deep Space Intuition', 'Resource Conservation', 'Survival Instinct',\r\n      'Fleet Coordination', 'Void Navigation'\r\n    ]\r\n  };\r\n\r\n  // Generate Initial Dynasties for a Mission\r\n  static generateInitialDynasties(\r\n    legacy: LegacyTypeType,\r\n    populationSize: number\r\n  ): Dynasty[] {\r\n    const dynastyCount = Math.min(8, Math.max(5, Math.floor(populationSize / 5000)));\r\n    const dynasties: Dynasty[] = [];\r\n\r\n    for (let i = 0; i < dynastyCount; i++) {\r\n      const dynasty = this.createDynasty(legacy, i === 0); // First dynasty starts as leaders\r\n      dynasties.push(dynasty);\r\n    }\r\n\r\n    return dynasties;\r\n  }\r\n\r\n  // Create a Single Dynasty\r\n  private static createDynasty(legacy: LegacyTypeType, isLeadership: boolean = false): Dynasty {\r\n    const names = this.DYNASTY_NAMES[legacy];\r\n    const traits = this.TRAITS[legacy];\r\n    const name = names[Math.floor(Math.random() * names.length)];\r\n    const specialization = isLeadership ?\r\n      'Leadership' :\r\n      this.SPECIALIZATIONS[Math.floor(Math.random() * this.SPECIALIZATIONS.length)];\r\n\r\n    const leader = this.generateDynastyMember(name, specialization, true, legacy);\r\n\r\n    const dynasty: Dynasty = {\r\n      id: `dynasty_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\r\n      name: `House ${name}`,\r\n      familyLine: name,\r\n      currentLeader: leader,\r\n      members: [leader],\r\n      influence: isLeadership ? 85 : Math.floor(Math.random() * 40) + 20,\r\n      specialization,\r\n      legacyTraits: [traits[Math.floor(Math.random() * traits.length)]],\r\n      storyThreads: this.generateInitialStoryThreads(name, specialization),\r\n      generationsActive: 1\r\n    };\r\n\r\n    // Add 2-4 additional family members\r\n    const memberCount = Math.floor(Math.random() * 3) + 2;\r\n    for (let i = 0; i < memberCount; i++) {\r\n      const member = this.generateDynastyMember(name, specialization, false, legacy);\r\n      dynasty.members.push(member);\r\n    }\r\n\r\n    return dynasty;\r\n  }\r\n\r\n  // Generate Dynasty Member\r\n  private static generateDynastyMember(\r\n    familyName: string,\r\n    specialization: string,\r\n    isLeader: boolean,\r\n    legacy: LegacyTypeType\r\n  ): DynastyMember {\r\n    const firstNames = [\r\n      'Alex', 'Morgan', 'Casey', 'Jordan', 'Taylor', 'Riley',\r\n      'Avery', 'Cameron', 'Quinn', 'Sage', 'River', 'Phoenix'\r\n    ];\r\n\r\n    const firstName = firstNames[Math.floor(Math.random() * firstNames.length)];\r\n    const age = isLeader ? Math.floor(Math.random() * 20) + 35 : Math.floor(Math.random() * 40) + 20;\r\n\r\n    const member: DynastyMember = {\r\n      id: `member_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\r\n      name: `${firstName} ${familyName}`,\r\n      age,\r\n      role: isLeader ? 'Dynasty Head' : this.getRandomRole(specialization),\r\n      skills: this.generateSkills(specialization, isLeader),\r\n      traits: this.generateMemberTraits(legacy, specialization),\r\n      isLeader\r\n    };\r\n\r\n    return member;\r\n  }\r\n\r\n  // Generate Skills Based on Specialization\r\n  private static generateSkills(specialization: string, isLeader: boolean): Record<string, number> {\r\n    const baseSkill = isLeader ? 6 : 4;\r\n    const skills = {\r\n      leadership: baseSkill + (isLeader ? 3 : 0),\r\n      technical: baseSkill,\r\n      social: baseSkill,\r\n      survival: baseSkill,\r\n      innovation: baseSkill\r\n    };\r\n\r\n    // Boost skills based on specialization\r\n    switch (specialization) {\r\n      case 'Engineering':\r\n      case 'Research':\r\n        skills.technical += 3;\r\n        skills.innovation += 2;\r\n        break;\r\n      case 'Agriculture':\r\n      case 'Medicine':\r\n        skills.technical += 2;\r\n        skills.survival += 2;\r\n        break;\r\n      case 'Security':\r\n      case 'Navigation':\r\n        skills.survival += 3;\r\n        skills.leadership += 1;\r\n        break;\r\n      case 'Diplomacy':\r\n      case 'Trade':\r\n        skills.social += 3;\r\n        skills.leadership += 1;\r\n        break;\r\n      case 'Leadership':\r\n        skills.leadership += 2;\r\n        skills.social += 2;\r\n        break;\r\n    }\r\n\r\n    // Add some randomization\r\n    Object.keys(skills).forEach(skill => {\r\n      skills[skill as keyof typeof skills] += Math.floor(Math.random() * 3) - 1;\r\n      skills[skill as keyof typeof skills] = Math.max(1, Math.min(10, skills[skill as keyof typeof skills]));\r\n    });\r\n\r\n    return skills;\r\n  }\r\n\r\n  // Generate Member Traits\r\n  private static generateMemberTraits(legacy: LegacyTypeType, specialization: string): string[] {\r\n    const legacyTraits = this.TRAITS[legacy];\r\n    const traits: string[] = [];\r\n\r\n    // Add one legacy-specific trait\r\n    traits.push(legacyTraits[Math.floor(Math.random() * legacyTraits.length)]);\r\n\r\n    // Add specialization trait\r\n    const specializationTraits: Record<string, string[]> = {\r\n      'Engineering': ['Technical Genius', 'System Optimizer', 'Problem Solver'],\r\n      'Agriculture': ['Life Cultivator', 'Resource Manager', 'Ecosystem Guardian'],\r\n      'Research': ['Knowledge Seeker', 'Data Analyst', 'Theory Crafter'],\r\n      'Security': ['Threat Assessor', 'Tactical Thinker', 'Guardian Spirit'],\r\n      'Diplomacy': ['Negotiator', 'Cultural Bridge', 'Conflict Resolver'],\r\n      'Medicine': ['Life Saver', 'Compassionate Healer', 'Biological Expert'],\r\n      'Navigation': ['Star Reader', 'Path Finder', 'Void Walker'],\r\n      'Trade': ['Market Analyst', 'Resource Optimizer', 'Deal Maker'],\r\n      'Leadership': ['Natural Leader', 'Strategic Thinker', 'Inspiring Presence']\r\n    };\r\n\r\n    const specTraits = specializationTraits[specialization] || ['Dedicated Professional'];\r\n    traits.push(specTraits[Math.floor(Math.random() * specTraits.length)]);\r\n\r\n    return traits;\r\n  }\r\n\r\n  // Generate Random Role\r\n  private static getRandomRole(specialization: string): string {\r\n    const roles: Record<string, string[]> = {\r\n      'Engineering': ['Chief Engineer', 'Systems Specialist', 'Maintenance Lead'],\r\n      'Agriculture': ['Food Production Manager', 'Hydroponics Specialist', 'Nutrition Officer'],\r\n      'Research': ['Senior Researcher', 'Data Analyst', 'Laboratory Director'],\r\n      'Security': ['Security Chief', 'Defense Coordinator', 'Safety Officer'],\r\n      'Diplomacy': ['Cultural Liaison', 'Negotiator', 'Community Relations'],\r\n      'Medicine': ['Chief Medical Officer', 'Health Coordinator', 'Medical Specialist'],\r\n      'Navigation': ['Navigation Officer', 'Stellar Cartographer', 'Pilot Coordinator'],\r\n      'Trade': ['Resource Manager', 'Supply Chain Coordinator', 'Economic Advisor'],\r\n      'Leadership': ['Department Head', 'Council Member', 'Administrative Officer']\r\n    };\r\n\r\n    const roleOptions = roles[specialization] || ['Specialist', 'Coordinator', 'Officer'];\r\n    return roleOptions[Math.floor(Math.random() * roleOptions.length)];\r\n  }\r\n\r\n  // Generate Initial Story Threads\r\n  private static generateInitialStoryThreads(familyName: string, specialization: string): StoryThread[] {\r\n    const threads: StoryThread[] = [];\r\n\r\n    // Family origin story\r\n    threads.push({\r\n      id: `story_origin_${Date.now()}`,\r\n      title: `The ${familyName} Legacy`,\r\n      description: `How House ${familyName} rose to prominence in ${specialization}`,\r\n      isActive: true,\r\n      generationsActive: 1\r\n    });\r\n\r\n    // Specialization challenge\r\n    const challenges: Record<string, string> = {\r\n      'Engineering': 'The Great Breakdown - Can they keep the ship systems running?',\r\n      'Agriculture': 'The Hunger Crisis - Will they solve the food shortage?',\r\n      'Research': 'The Unknown Discovery - What secrets will they uncover?',\r\n      'Security': 'The Silent Threat - Can they protect the mission?',\r\n      'Leadership': 'The Unity Challenge - Will they hold the community together?'\r\n    };\r\n\r\n    const challenge = challenges[specialization] || 'The Professional Challenge - Will they excel in their field?';\r\n\r\n    threads.push({\r\n      id: `story_challenge_${Date.now()}`,\r\n      title: challenge.split(' - ')[0],\r\n      description: challenge,\r\n      isActive: true,\r\n      generationsActive: 1\r\n    });\r\n\r\n    return threads;\r\n  }\r\n\r\n  // AI Decision Making for Dynasty Management\r\n  static makeAutomatedDecision(\r\n    dynasty: Dynasty,\r\n    context: {\r\n      availableResources: any;\r\n      currentCrisis?: MissionEvent;\r\n      populationNeeds: string[];\r\n    }\r\n  ): AIDecision {\r\n    const decision = this.evaluateDecisionOptions(dynasty, context);\r\n\r\n    const aiDecision: AIDecision = {\r\n      id: `ai_decision_${Date.now()}`,\r\n      category: dynasty.specialization,\r\n      decision: decision.action,\r\n      reasoning: decision.reasoning,\r\n      confidence: decision.confidence,\r\n      timestamp: Date.now(),\r\n      wasOverridden: false,\r\n      outcome: null\r\n    };\r\n\r\n    Logger.info(`AI Decision by ${dynasty.name}: ${decision.action}`, {\r\n      reasoning: decision.reasoning,\r\n      confidence: decision.confidence\r\n    });\r\n\r\n    return aiDecision;\r\n  }\r\n\r\n  // Evaluate Decision Options for AI\r\n  private static evaluateDecisionOptions(\r\n    dynasty: Dynasty,\r\n    context: any\r\n  ): { action: string; reasoning: string; confidence: number } {\r\n    const specialization = dynasty.specialization;\r\n\r\n    // Simple AI decision logic based on specialization and current context\r\n    switch (specialization) {\r\n      case 'Engineering':\r\n        if (context.currentCrisis?.title.includes('System')) {\r\n          return {\r\n            action: 'Emergency Repairs',\r\n            reasoning: 'System crisis detected, applying engineering expertise',\r\n            confidence: 0.85\r\n          };\r\n        }\r\n        return {\r\n          action: 'Routine Maintenance',\r\n          reasoning: 'No immediate crisis, performing preventive maintenance',\r\n          confidence: 0.7\r\n        };\r\n\r\n      case 'Agriculture':\r\n        if (context.populationNeeds.includes('food')) {\r\n          return {\r\n            action: 'Increase Food Production',\r\n            reasoning: 'Food shortage detected, boosting agricultural output',\r\n            confidence: 0.9\r\n          };\r\n        }\r\n        return {\r\n          action: 'Optimize Crop Cycles',\r\n          reasoning: 'Steady state, improving efficiency',\r\n          confidence: 0.75\r\n        };\r\n\r\n      case 'Security':\r\n        if (context.currentCrisis?.category === 'immediate_crisis') {\r\n          return {\r\n            action: 'Implement Security Protocols',\r\n            reasoning: 'Crisis situation requires enhanced security measures',\r\n            confidence: 0.8\r\n          };\r\n        }\r\n        return {\r\n          action: 'Regular Security Patrols',\r\n          reasoning: 'Maintaining security awareness',\r\n          confidence: 0.65\r\n        };\r\n\r\n      default:\r\n        return {\r\n          action: 'Standard Operations',\r\n          reasoning: `Continuing ${specialization} duties as normal`,\r\n          confidence: 0.6\r\n        };\r\n    }\r\n  }\r\n\r\n  // Advance Dynasty Through Generation\r\n  static advanceGeneration(dynasty: Dynasty): Dynasty {\r\n    const updatedDynasty = { ...dynasty };\r\n\r\n    // Age all members\r\n    updatedDynasty.members = dynasty.members.map(member => ({\r\n      ...member,\r\n      age: member.age + 25 // Average generation length\r\n    }));\r\n\r\n    // Check if leader needs succession\r\n    if (updatedDynasty.currentLeader.age > 70) {\r\n      const successors = updatedDynasty.members.filter(m =>\r\n        m.age >= 30 && m.age <= 50 && !m.isLeader\r\n      );\r\n\r\n      if (successors.length > 0) {\r\n        // Choose successor with highest leadership skill\r\n        const newLeader = successors.reduce((best, current) =>\r\n          current.skills.leadership > best.skills.leadership ? current : best\r\n        );\r\n\r\n        updatedDynasty.currentLeader = { ...newLeader, isLeader: true };\r\n        updatedDynasty.members = updatedDynasty.members.map(m => ({\r\n          ...m,\r\n          isLeader: m.id === newLeader.id\r\n        }));\r\n      }\r\n    }\r\n\r\n    // Add new generation members\r\n    const newMemberCount = Math.floor(Math.random() * 3) + 1;\r\n    for (let i = 0; i < newMemberCount; i++) {\r\n      const newMember = this.generateDynastyMember(\r\n        dynasty.familyLine,\r\n        dynasty.specialization,\r\n        false,\r\n        'preservers' as LegacyTypeType // Default legacy, should be passed in\r\n      );\r\n      newMember.age = Math.floor(Math.random() * 25) + 18; // Young adults\r\n      updatedDynasty.members.push(newMember);\r\n    }\r\n\r\n    updatedDynasty.generationsActive += 1;\r\n\r\n    return updatedDynasty;\r\n  }\r\n\r\n  // Manage Cohort Assignment\r\n  static assignDynasTiesToCohorts(\r\n    dynasties: Dynasty[],\r\n    cohorts: PopulationCohort[]\r\n  ): PopulationCohort[] {\r\n    return cohorts.map(cohort => {\r\n      const relevantDynasty = dynasties.find(d =>\r\n        this.isRelevantSpecialization(d.specialization, cohort.type)\r\n      );\r\n\r\n      if (relevantDynasty) {\r\n        const leaderEffectiveness = relevantDynasty.currentLeader.skills.leadership / 10;\r\n        const influenceBonus = relevantDynasty.influence / 100;\r\n\r\n        return {\r\n          ...cohort,\r\n          effectiveness: Math.min(1.0, cohort.effectiveness + leaderEffectiveness + influenceBonus)\r\n        };\r\n      }\r\n\r\n      return cohort;\r\n    });\r\n  }\r\n\r\n  // Check if Dynasty Specialization is Relevant to Cohort\r\n  private static isRelevantSpecialization(specialization: string, cohortType: CohortTypeType): boolean {\r\n    const relevanceMap: Record<string, CohortTypeType[]> = {\r\n      'Engineering': ['engineers'],\r\n      'Agriculture': ['farmers'],\r\n      'Research': ['scholars'],\r\n      'Security': ['security'],\r\n      'Leadership': ['leaders', 'general'],\r\n      'Medicine': ['general'],\r\n      'Navigation': ['general'],\r\n      'Trade': ['general'],\r\n      'Diplomacy': ['leaders']\r\n    };\r\n\r\n    return relevanceMap[specialization]?.includes(cohortType) || false;\r\n  }\r\n\r\n  // Track AI Performance\r\n  static updateAIPerformance(\r\n    decision: AIDecision,\r\n    outcome: 'success' | 'failure' | 'neutral'\r\n  ): void {\r\n    decision.outcome = outcome;\r\n\r\n    // In a real implementation, this would update performance metrics\r\n    Logger.info(`AI Decision outcome: ${outcome}`, {\r\n      decisionId: decision.id,\r\n      category: decision.category\r\n    });\r\n  }\r\n}","usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\services\\EventService.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":331,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":331,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10534,10537],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10534,10537],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":333,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":333,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10644,10647],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10644,10647],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// services/EventService.ts\r\nimport type {\r\n  MissionEvent,\r\n  EventOutcome,\r\n  PopulationEffect,\r\n  GenerationalMission,\r\n  PopulationCohort\r\n} from '../types/generationalMissions';\r\nimport type {\r\n  EventCategoryType,\r\n  LegacyTypeType,\r\n  MissionPhaseType,\r\n  CohortTypeType\r\n} from '../types/enums';\r\nimport { AutomationService } from './AutomationService';\r\nimport Logger from '../utils/logger';\r\n\r\nexport class EventService {\r\n  // Generate Event Based on Mission Context\r\n  static generateEvent(\r\n    mission: GenerationalMission,\r\n    forceCategory?: EventCategoryType\r\n  ): MissionEvent | null {\r\n    const eventCategory = forceCategory || this.selectEventCategory(mission);\r\n    const eventTemplate = this.selectEventTemplate(eventCategory, mission.legacy, mission.currentPhase);\r\n\r\n    if (!eventTemplate) return null;\r\n\r\n    const event = this.createEventFromTemplate(eventTemplate, mission);\r\n\r\n    // Determine if this event requires player intervention\r\n    event.requiresPlayerDecision = this.shouldRequirePlayerDecision(event, mission);\r\n\r\n    Logger.info(`Generated event: ${event.title}`, {\r\n      category: event.category,\r\n      requiresPlayer: event.requiresPlayerDecision,\r\n      missionId: mission.id\r\n    });\r\n\r\n    return event;\r\n  }\r\n\r\n  // Select Event Category Based on Mission State\r\n  private static selectEventCategory(mission: GenerationalMission): EventCategoryType {\r\n    const weights = {\r\n      'immediate_crisis': this.calculateCrisisWeight(mission),\r\n      'generational_challenge': 0.3,\r\n      'mission_milestone': this.calculateMilestoneWeight(mission),\r\n      'legacy_moment': this.calculateLegacyWeight(mission)\r\n    };\r\n\r\n    // Weighted random selection\r\n    const totalWeight = Object.values(weights).reduce((sum, weight) => sum + weight, 0);\r\n    let random = Math.random() * totalWeight;\r\n\r\n    for (const [category, weight] of Object.entries(weights)) {\r\n      random -= weight;\r\n      if (random <= 0) {\r\n        return category as EventCategoryType;\r\n      }\r\n    }\r\n\r\n    return 'generational_challenge';\r\n  }\r\n\r\n  // Calculate Crisis Weight Based on Current Conditions\r\n  private static calculateCrisisWeight(mission: GenerationalMission): number {\r\n    let weight = 0.2; // Base crisis chance\r\n\r\n    const resources = mission.resources;\r\n\r\n    // Resource scarcity increases crisis chance\r\n    if (resources.food < 500) weight += 0.3;\r\n    if (resources.energy < 1000) weight += 0.2;\r\n    if (resources.hullIntegrity < 0.7) weight += 0.4;\r\n    if (resources.lifeSupport < 0.8) weight += 0.5;\r\n\r\n    // Population issues increase crisis chance\r\n    if (resources.morale < 0.5) weight += 0.3;\r\n    if (resources.unity < 0.4) weight += 0.4;\r\n\r\n    // Mission duration increases crisis chance\r\n    const yearsFactor = mission.currentYear / mission.estimatedDuration;\r\n    weight += yearsFactor * 0.2;\r\n\r\n    return Math.min(weight, 0.8); // Cap at 80%\r\n  }\r\n\r\n  // Calculate Milestone Weight\r\n  private static calculateMilestoneWeight(mission: GenerationalMission): number {\r\n    const progress = mission.phaseProgress / 100;\r\n\r\n    // Higher chance near phase transitions\r\n    if (progress > 0.8 || progress < 0.2) {\r\n      return 0.4;\r\n    }\r\n\r\n    return 0.15;\r\n  }\r\n\r\n  // Calculate Legacy Weight\r\n  private static calculateLegacyWeight(mission: GenerationalMission): number {\r\n    const generationCount = Math.floor(mission.currentYear / 25);\r\n\r\n    // Legacy moments more likely in later generations\r\n    return Math.min(0.1 + (generationCount * 0.05), 0.3);\r\n  }\r\n\r\n  // Select Event Template\r\n  private static selectEventTemplate(\r\n    category: EventCategoryType,\r\n    legacy: LegacyTypeType,\r\n    phase: MissionPhaseType\r\n  ): EventTemplate | null {\r\n    const templates = this.getEventTemplates(category, legacy, phase);\r\n\r\n    if (templates.length === 0) return null;\r\n\r\n    return templates[Math.floor(Math.random() * templates.length)];\r\n  }\r\n\r\n  // Get Event Templates by Category and Context\r\n  private static getEventTemplates(\r\n    category: EventCategoryType,\r\n    legacy: LegacyTypeType,\r\n    phase: MissionPhaseType\r\n  ): EventTemplate[] {\r\n    const allTemplates = this.getAllEventTemplates();\r\n\r\n    return allTemplates.filter(template =>\r\n      template.category === category &&\r\n      (template.legacySpecific === null || template.legacySpecific === legacy) &&\r\n      template.validPhases.includes(phase)\r\n    );\r\n  }\r\n\r\n  // Create Event from Template\r\n  private static createEventFromTemplate(\r\n    template: EventTemplate,\r\n    mission: GenerationalMission\r\n  ): MissionEvent {\r\n    const event: MissionEvent = {\r\n      id: `event_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\r\n      title: template.title,\r\n      description: this.processTemplateVariables(template.description, mission),\r\n      category: template.category,\r\n      requiresPlayerDecision: false, // Will be set later\r\n      autoResolutionDelay: template.autoResolutionDelay,\r\n      possibleOutcomes: template.outcomes.map(outcome => ({\r\n        ...outcome,\r\n        description: this.processTemplateVariables(outcome.description, mission)\r\n      })),\r\n      affectedCohorts: template.affectedCohorts,\r\n      affectedDynasties: template.affectedDynasties,\r\n      legacySpecific: template.legacySpecific,\r\n      triggeredAt: Date.now(),\r\n      resolvedAt: null,\r\n      generation: Math.floor(mission.currentYear / 25) + 1\r\n    };\r\n\r\n    return event;\r\n  }\r\n\r\n  // Process Template Variables\r\n  private static processTemplateVariables(text: string, mission: GenerationalMission): string {\r\n    const variables: Record<string, string> = {\r\n      '{SHIP_NAME}': mission.ship.name,\r\n      '{YEAR}': mission.currentYear.toString(),\r\n      '{GENERATION}': (Math.floor(mission.currentYear / 25) + 1).toString(),\r\n      '{POPULATION}': mission.population.total.toString(),\r\n      '{SECT}': mission.legacy,\r\n      '{PHASE}': mission.currentPhase\r\n    };\r\n\r\n    let result = text;\r\n    Object.entries(variables).forEach(([key, value]) => {\r\n      result = result.replace(new RegExp(key, 'g'), value);\r\n    });\r\n\r\n    return result;\r\n  }\r\n\r\n  // Determine if Event Requires Player Decision\r\n  private static shouldRequirePlayerDecision(\r\n    event: MissionEvent,\r\n    mission: GenerationalMission\r\n  ): boolean {\r\n    // Always escalate certain categories\r\n    if (event.category === 'legacy_moment') return true;\r\n\r\n    // Check automation config\r\n    if (AutomationService.shouldEscalateEvent(event, mission.automationConfig)) {\r\n      return true;\r\n    }\r\n\r\n    // High impact events require player attention\r\n    const hasHighImpact = event.possibleOutcomes.some(outcome =>\r\n      Math.abs(outcome.resourceChanges.population || 0) > 1000 ||\r\n      Math.abs(outcome.resourceChanges.hullIntegrity || 0) > 0.2 ||\r\n      outcome.longTermConsequences.length > 0\r\n    );\r\n\r\n    if (hasHighImpact) return true;\r\n\r\n    // Some random events escalate regardless\r\n    return Math.random() < 0.2;\r\n  }\r\n\r\n  // Resolve Event Automatically\r\n  static resolveEventAutomatically(\r\n    event: MissionEvent,\r\n    mission: GenerationalMission\r\n  ): EventResolution {\r\n    if (event.possibleOutcomes.length === 0) {\r\n      return {\r\n        outcome: null,\r\n        success: false,\r\n        message: 'No resolution options available'\r\n      };\r\n    }\r\n\r\n    // AI chooses best outcome based on mission state\r\n    const chosenOutcome = this.selectBestOutcome(event.possibleOutcomes, mission);\r\n    const resolution = this.applyEventOutcome(chosenOutcome, mission);\r\n\r\n    event.resolvedAt = Date.now();\r\n\r\n    Logger.info(`Auto-resolved event: ${event.title}`, {\r\n      outcome: chosenOutcome.title,\r\n      missionId: mission.id\r\n    });\r\n\r\n    return resolution;\r\n  }\r\n\r\n  // Resolve Event with Player Choice\r\n  static resolveEventWithChoice(\r\n    event: MissionEvent,\r\n    outcomeId: string,\r\n    mission: GenerationalMission\r\n  ): EventResolution {\r\n    const chosenOutcome = event.possibleOutcomes.find(o => o.id === outcomeId);\r\n\r\n    if (!chosenOutcome) {\r\n      return {\r\n        outcome: null,\r\n        success: false,\r\n        message: 'Invalid outcome choice'\r\n      };\r\n    }\r\n\r\n    const resolution = this.applyEventOutcome(chosenOutcome, mission);\r\n    event.resolvedAt = Date.now();\r\n\r\n    Logger.info(`Player resolved event: ${event.title}`, {\r\n      outcome: chosenOutcome.title,\r\n      missionId: mission.id\r\n    });\r\n\r\n    return resolution;\r\n  }\r\n\r\n  // Select Best Outcome for AI Resolution\r\n  private static selectBestOutcome(\r\n    outcomes: EventOutcome[],\r\n    mission: GenerationalMission\r\n  ): EventOutcome {\r\n    let bestOutcome = outcomes[0];\r\n    let bestScore = -Infinity;\r\n\r\n    outcomes.forEach(outcome => {\r\n      const score = this.evaluateOutcomeScore(outcome, mission);\r\n      if (score > bestScore) {\r\n        bestScore = score;\r\n        bestOutcome = outcome;\r\n      }\r\n    });\r\n\r\n    return bestOutcome;\r\n  }\r\n\r\n  // Evaluate Outcome Score for AI Decision Making\r\n  private static evaluateOutcomeScore(\r\n    outcome: EventOutcome,\r\n    mission: GenerationalMission\r\n  ): number {\r\n    let score = 0;\r\n\r\n    // Evaluate resource changes\r\n    const resourceChanges = outcome.resourceChanges;\r\n    const currentResources = mission.resources;\r\n\r\n    // Prioritize critical resources\r\n    if (currentResources.food < 500) {\r\n      score += (resourceChanges.food || 0) * 2;\r\n    }\r\n    if (currentResources.hullIntegrity < 0.7) {\r\n      score += (resourceChanges.hullIntegrity || 0) * 1000;\r\n    }\r\n    if (currentResources.lifeSupport < 0.8) {\r\n      score += (resourceChanges.lifeSupport || 0) * 1000;\r\n    }\r\n\r\n    // General resource value\r\n    score += (resourceChanges.credits || 0) * 0.1;\r\n    score += (resourceChanges.energy || 0) * 0.2;\r\n    score += (resourceChanges.minerals || 0) * 0.3;\r\n    score += (resourceChanges.morale || 0) * 500;\r\n    score += (resourceChanges.unity || 0) * 600;\r\n\r\n    // Penalize long-term negative consequences\r\n    score -= outcome.longTermConsequences.length * 100;\r\n\r\n    // Sect-specific bonuses\r\n    const sectBonus = outcome.legacyModifiers[mission.legacy] || 0;\r\n    score += sectBonus * 200;\r\n\r\n    return score;\r\n  }\r\n\r\n  // Apply Event Outcome to Mission\r\n  private static applyEventOutcome(\r\n    outcome: EventOutcome,\r\n    mission: GenerationalMission\r\n  ): EventResolution {\r\n    const effects: string[] = [];\r\n\r\n    // Apply resource changes\r\n    Object.entries(outcome.resourceChanges).forEach(([resource, change]) => {\r\n      if (change !== undefined && change !== 0) {\r\n        const oldValue = (mission.resources as any)[resource] || 0;\r\n        const newValue = Math.max(0, oldValue + change);\r\n        (mission.resources as any)[resource] = newValue;\r\n\r\n        effects.push(`${resource}: ${oldValue} ‚Üí ${newValue}`);\r\n      }\r\n    });\r\n\r\n    // Apply population effects\r\n    outcome.populationEffects.forEach(effect => {\r\n      const cohort = mission.population.cohorts.find(c => c.type === effect.cohortType);\r\n      if (cohort) {\r\n        this.applyPopulationEffect(cohort, effect);\r\n        effects.push(`${effect.cohortType} ${effect.effectType}: ${effect.description}`);\r\n      }\r\n    });\r\n\r\n    // Record long-term consequences\r\n    if (outcome.longTermConsequences.length > 0) {\r\n      // In a full implementation, these would be stored and affect future events\r\n      effects.push(`Long-term effects: ${outcome.longTermConsequences.join(', ')}`);\r\n    }\r\n\r\n    return {\r\n      outcome,\r\n      success: true,\r\n      message: `Event resolved: ${outcome.title}`,\r\n      effects\r\n    };\r\n  }\r\n\r\n  // Apply Population Effect to Cohort\r\n  private static applyPopulationEffect(\r\n    cohort: PopulationCohort,\r\n    effect: PopulationEffect\r\n  ): void {\r\n    switch (effect.effectType) {\r\n      case 'count':\r\n        cohort.count = Math.max(0, cohort.count + effect.magnitude);\r\n        break;\r\n      case 'effectiveness':\r\n        cohort.effectiveness = Math.max(0, Math.min(1, cohort.effectiveness + effect.magnitude));\r\n        break;\r\n      case 'morale':\r\n        cohort.morale = Math.max(0, Math.min(100, cohort.morale + effect.magnitude));\r\n        break;\r\n      case 'traits':\r\n        // Add trait effect (would be more sophisticated in production)\r\n        cohort.specialTraits.push(effect.description);\r\n        break;\r\n    }\r\n  }\r\n\r\n  // Get All Event Templates\r\n  private static getAllEventTemplates(): EventTemplate[] {\r\n    return [\r\n      // Immediate Crisis Events\r\n      {\r\n        id: 'system_failure',\r\n        title: 'Critical System Failure',\r\n        description: 'Multiple ship systems are failing simultaneously. Immediate action required.',\r\n        category: 'immediate_crisis',\r\n        legacySpecific: null,\r\n        validPhases: ['travel', 'operation'],\r\n        autoResolutionDelay: 2, // 2 hours\r\n        affectedCohorts: ['engineers', 'general'],\r\n        affectedDynasties: ['Engineering'],\r\n        outcomes: [\r\n          {\r\n            id: 'emergency_repairs',\r\n            title: 'Emergency Repairs',\r\n            description: 'Focus all engineering efforts on critical repairs',\r\n            resourceChanges: {\r\n              hullIntegrity: 0.2,\r\n              energy: -500,\r\n              spareParts: -200\r\n            },\r\n            populationEffects: [],\r\n            longTermConsequences: [],\r\n            requirements: [],\r\n            legacyModifiers: { preservers: 0.1, adaptors: 0.2, wanderers: 0.0 }\r\n          },\r\n          {\r\n            id: 'jury_rig_solution',\r\n            title: 'Jury-Rig Solution',\r\n            description: 'Improvise temporary fixes to keep systems running',\r\n            resourceChanges: {\r\n              hullIntegrity: 0.1,\r\n              energy: -200,\r\n              spareParts: -50\r\n            },\r\n            populationEffects: [],\r\n            longTermConsequences: ['Increased system instability'],\r\n            requirements: [],\r\n            legacyModifiers: { preservers: -0.1, adaptors: 0.0, wanderers: 0.3 }\r\n          }\r\n        ]\r\n      },\r\n\r\n      // Generational Challenge Events\r\n      {\r\n        id: 'population_growth',\r\n        title: 'Population Boom',\r\n        description: 'Birth rates have increased significantly. Resources are being strained.',\r\n        category: 'generational_challenge',\r\n        legacySpecific: null,\r\n        validPhases: ['travel', 'operation'],\r\n        autoResolutionDelay: 24, // 24 hours for long-term planning\r\n        affectedCohorts: ['general'],\r\n        affectedDynasties: ['Leadership'],\r\n        outcomes: [\r\n          {\r\n            id: 'expand_facilities',\r\n            title: 'Expand Living Facilities',\r\n            description: 'Build new habitation areas to accommodate growth',\r\n            resourceChanges: {\r\n              population: 1000,\r\n              energy: -800,\r\n              minerals: -400,\r\n              food: -200\r\n            },\r\n            populationEffects: [{\r\n              cohortType: 'general',\r\n              effectType: 'morale',\r\n              magnitude: 10,\r\n              description: 'Better living conditions'\r\n            }],\r\n            longTermConsequences: [],\r\n            requirements: [],\r\n            legacyModifiers: { preservers: 0.2, adaptors: 0.1, wanderers: -0.1 }\r\n          },\r\n          {\r\n            id: 'population_control',\r\n            title: 'Implement Population Controls',\r\n            description: 'Establish policies to manage population growth',\r\n            resourceChanges: {\r\n              population: 200,\r\n              unity: -0.1\r\n            },\r\n            populationEffects: [{\r\n              cohortType: 'general',\r\n              effectType: 'morale',\r\n              magnitude: -15,\r\n              description: 'Restrictive policies'\r\n            }],\r\n            longTermConsequences: ['Social tension over reproductive rights'],\r\n            requirements: [],\r\n            legacyModifiers: { preservers: -0.2, adaptors: 0.1, wanderers: 0.0 }\r\n          }\r\n        ]\r\n      },\r\n\r\n      // Mission Milestone Events\r\n      {\r\n        id: 'arrival_at_target',\r\n        title: 'Arrival at Target System',\r\n        description: 'After {YEAR} years of travel, we have reached our destination.',\r\n        category: 'mission_milestone',\r\n        legacySpecific: null,\r\n        validPhases: ['travel'],\r\n        autoResolutionDelay: 6,\r\n        affectedCohorts: ['general'],\r\n        affectedDynasties: [],\r\n        outcomes: [\r\n          {\r\n            id: 'immediate_survey',\r\n            title: 'Begin Immediate Survey',\r\n            description: 'Deploy all available resources to survey the system',\r\n            resourceChanges: {\r\n              missionProgress: 15,\r\n              energy: -300,\r\n              researchData: 500\r\n            },\r\n            populationEffects: [{\r\n              cohortType: 'scholars',\r\n              effectType: 'morale',\r\n              magnitude: 20,\r\n              description: 'Excitement over discoveries'\r\n            }],\r\n            longTermConsequences: [],\r\n            requirements: [],\r\n            legacyModifiers: { preservers: 0.0, adaptors: 0.1, wanderers: 0.2 }\r\n          }\r\n        ]\r\n      },\r\n\r\n      // Legacy Moment Events\r\n      {\r\n        id: 'cultural_schism',\r\n        title: 'Cultural Schism',\r\n        description: 'A fundamental disagreement about mission direction has divided the population.',\r\n        category: 'legacy_moment',\r\n        legacySpecific: 'preservers',\r\n        validPhases: ['travel', 'operation'],\r\n        autoResolutionDelay: 48, // Very long for major decisions\r\n        affectedCohorts: ['leaders', 'general'],\r\n        affectedDynasties: ['Leadership'],\r\n        outcomes: [\r\n          {\r\n            id: 'preserve_tradition',\r\n            title: 'Preserve Traditional Ways',\r\n            description: 'Maintain cultural purity despite challenges',\r\n            resourceChanges: {\r\n              unity: -0.2\r\n            },\r\n            populationEffects: [{\r\n              cohortType: 'leaders',\r\n              effectType: 'morale',\r\n              magnitude: -10,\r\n              description: 'Resistance to change'\r\n            }],\r\n            longTermConsequences: ['Increased resistance to adaptation'],\r\n            requirements: [],\r\n            legacyModifiers: { preservers: 0.3, adaptors: 0.0, wanderers: 0.0 }\r\n          },\r\n          {\r\n            id: 'cultural_adaptation',\r\n            title: 'Allow Cultural Evolution',\r\n            description: 'Permit society to adapt to new circumstances',\r\n            resourceChanges: {\r\n              unity: 0.1\r\n            },\r\n            populationEffects: [{\r\n              cohortType: 'general',\r\n              effectType: 'morale',\r\n              magnitude: 5,\r\n              description: 'Embrace of change'\r\n            }],\r\n            longTermConsequences: ['Permanent cultural shift'],\r\n            requirements: [],\r\n            legacyModifiers: { preservers: -0.2, adaptors: 0.2, wanderers: 0.1 }\r\n          }\r\n        ]\r\n      }\r\n    ];\r\n  }\r\n}\r\n\r\n// Helper Interfaces\r\ninterface EventTemplate {\r\n  id: string;\r\n  title: string;\r\n  description: string;\r\n  category: EventCategoryType;\r\n  legacySpecific: LegacyTypeType | null;\r\n  validPhases: MissionPhaseType[];\r\n  autoResolutionDelay: number; // hours\r\n  affectedCohorts: CohortTypeType[];\r\n  affectedDynasties: string[]; // Specialization names\r\n  outcomes: EventOutcome[];\r\n}\r\n\r\ninterface EventResolution {\r\n  outcome: EventOutcome | null;\r\n  success: boolean;\r\n  message: string;\r\n  effects?: string[];\r\n}","usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\services\\GameEngine.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\services\\HeritageService.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ModifierSynergy' is defined but never used.","line":12,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":12,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ExtendedResources' is defined but never used.","line":22,"column":15,"nodeType":null,"messageId":"unusedVar","endLine":22,"endColumn":32},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'LegacyTypeType' is defined but never used.","line":23,"column":15,"nodeType":null,"messageId":"unusedVar","endLine":23,"endColumn":29},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'evolution' is defined but never used.","line":380,"column":52,"nodeType":null,"messageId":"unusedVar","endLine":380,"endColumn":61},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":380,"column":63,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":380,"endColumn":66,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12245,12248],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12245,12248],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'entry' is defined but never used.","line":380,"column":68,"nodeType":null,"messageId":"unusedVar","endLine":380,"endColumn":73},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'settlement' is defined but never used.","line":385,"column":47,"nodeType":null,"messageId":"unusedVar","endLine":385,"endColumn":57},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":385,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":385,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12433,12436],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12433,12436],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'entry' is defined but never used.","line":385,"column":64,"nodeType":null,"messageId":"unusedVar","endLine":385,"endColumn":69},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":395,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":395,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12760,12763],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12760,12763],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'modifiers' is defined but never used.","line":483,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":483,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'criteria' is defined but never used.","line":484,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":484,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'targetMission' is defined but never used.","line":493,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":493,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'modifier' is defined but never used.","line":550,"column":42,"nodeType":null,"messageId":"unusedVar","endLine":550,"endColumn":50},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'mission' is defined but never used.","line":550,"column":70,"nodeType":null,"messageId":"unusedVar","endLine":550,"endColumn":77},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'modifier' is defined but never used.","line":555,"column":40,"nodeType":null,"messageId":"unusedVar","endLine":555,"endColumn":48},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'modifier' is defined but never used.","line":560,"column":42,"nodeType":null,"messageId":"unusedVar","endLine":560,"endColumn":50},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'mission' is defined but never used.","line":572,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":572,"endColumn":12},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'mod1' is defined but never used.","line":581,"column":41,"nodeType":null,"messageId":"unusedVar","endLine":581,"endColumn":45},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'mod2' is defined but never used.","line":581,"column":65,"nodeType":null,"messageId":"unusedVar","endLine":581,"endColumn":69},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'mod1' is defined but never used.","line":586,"column":42,"nodeType":null,"messageId":"unusedVar","endLine":586,"endColumn":46},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'mod2' is defined but never used.","line":586,"column":66,"nodeType":null,"messageId":"unusedVar","endLine":586,"endColumn":70},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'decision' is defined but never used.","line":601,"column":56,"nodeType":null,"messageId":"unusedVar","endLine":601,"endColumn":64},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'decision' is defined but never used.","line":606,"column":58,"nodeType":null,"messageId":"unusedVar","endLine":606,"endColumn":66},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'decision' is defined but never used.","line":611,"column":53,"nodeType":null,"messageId":"unusedVar","endLine":611,"endColumn":61},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'artifact' is defined but never used.","line":625,"column":56,"nodeType":null,"messageId":"unusedVar","endLine":625,"endColumn":64},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'artifact' is defined but never used.","line":629,"column":58,"nodeType":null,"messageId":"unusedVar","endLine":629,"endColumn":66},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'outcome' is defined but never used.","line":633,"column":57,"nodeType":null,"messageId":"unusedVar","endLine":633,"endColumn":64}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":28,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// services/HeritageService.ts\nimport type {\n  HeritageModifier,\n  HeritageApplicationResult,\n  HeritageSelectionCriteria,\n  HeritageConflict,\n  HeritageTemplate,\n  HeritageLibrary,\n  HeritageRecommendation,\n  HeritageAnalysis,\n  ModifierCombination,\n  ModifierSynergy,\n  ResourceModifier,\n  PopulationModifier,\n  EventModifier,\n  TechnologyModifier,\n  NarrativeElement,\n  HeritageSource,\n  HeritageTier\n} from '../types/heritage';\nimport type { ChronicleEntry, ChronicleDecision, ChronicleArtifact } from '../types/chronicle';\nimport type { ExtendedResources, GenerationalMission } from '../types/generationalMissions';\nimport type { LegacyTypeType } from '../types/enums';\nimport Logger from '../utils/logger';\n\nexport class HeritageService {\n  private static readonly HERITAGE_STORAGE_KEY = 'stellar-legacy-heritage-library';\n  private static modifierTemplates: HeritageTemplate[] = [];\n  private static heritageLibrary: HeritageLibrary | null = null;\n\n  /**\n   * Generate heritage modifiers from a completed chronicle entry\n   */\n  static generateHeritageModifiers(entry: ChronicleEntry): HeritageModifier[] {\n    const modifiers: HeritageModifier[] = [];\n\n    try {\n      // Generate from key decisions\n      entry.keyDecisions.forEach(decision => {\n        if (decision.chronicleWeight >= 0.7) {\n          const modifier = this.createModifierFromDecision(decision, entry);\n          if (modifier) modifiers.push(modifier);\n        }\n      });\n\n      // Generate from artifacts\n      entry.artifacts.forEach(artifact => {\n        const modifier = this.createModifierFromArtifact(artifact, entry);\n        if (modifier) modifiers.push(modifier);\n      });\n\n      // Generate from population outcome\n      if (entry.populationOutcome !== 'survived') {\n        const modifier = this.createModifierFromPopulationOutcome(entry);\n        if (modifier) modifiers.push(modifier);\n      }\n\n      // Generate from legacy evolution\n      entry.legacyEvolution.forEach(evolution => {\n        if (evolution.deviationMagnitude > 0.5) {\n          const modifier = this.createModifierFromLegacyEvolution(evolution, entry);\n          if (modifier) modifiers.push(modifier);\n        }\n      });\n\n      // Generate from settlement results\n      if (entry.settlementResult && entry.settlementResult.influence > 0.3) {\n        const modifier = this.createModifierFromSettlement(entry.settlementResult, entry);\n        if (modifier) modifiers.push(modifier);\n      }\n\n      Logger.info('Generated heritage modifiers', {\n        chronicleEntry: entry.missionId,\n        modifierCount: modifiers.length\n      });\n\n      return modifiers;\n    } catch (error) {\n      Logger.error('Failed to generate heritage modifiers', error);\n      return [];\n    }\n  }\n\n  /**\n   * Apply heritage modifiers to a new mission\n   */\n  static applyHeritageModifiers(\n    modifiers: HeritageModifier[],\n    mission: GenerationalMission\n  ): HeritageApplicationResult {\n    const result: HeritageApplicationResult = {\n      appliedModifiers: [],\n      resourceChanges: {},\n      populationEffects: [],\n      narrativeContext: [],\n      warnings: []\n    };\n\n    try {\n      // Check for conflicts first\n      const conflicts = this.detectConflicts(modifiers);\n      const validModifiers = this.resolveConflicts(modifiers, conflicts);\n\n      // Apply each valid modifier\n      validModifiers.forEach(modifier => {\n        // Apply resource modifiers\n        modifier.resourceModifiers.forEach(resourceMod => {\n          this.applyResourceModifier(resourceMod, mission, result);\n        });\n\n        // Apply population modifiers\n        modifier.populationModifiers.forEach(popMod => {\n          this.applyPopulationModifier(popMod, mission, result);\n        });\n\n        // Collect narrative elements\n        modifier.startingNarrative.forEach(narrative => {\n          result.narrativeContext.push(narrative.text);\n        });\n\n        result.appliedModifiers.push(modifier);\n      });\n\n      // Report any conflicts\n      conflicts.forEach(conflict => {\n        result.warnings.push(`Conflict resolved: ${conflict.resolution}`);\n      });\n\n      Logger.info('Applied heritage modifiers', {\n        missionId: mission.id,\n        appliedCount: result.appliedModifiers.length,\n        conflictCount: conflicts.length\n      });\n\n      return result;\n    } catch (error) {\n      Logger.error('Failed to apply heritage modifiers', error);\n      result.warnings.push('Error applying heritage modifiers');\n      return result;\n    }\n  }\n\n  /**\n   * Analyze available heritage modifiers and provide recommendations\n   */\n  static analyzeHeritageOptions(\n    availableModifiers: HeritageModifier[],\n    targetMission: Partial<GenerationalMission>,\n    criteria: HeritageSelectionCriteria\n  ): HeritageAnalysis {\n    try {\n      // Filter modifiers based on criteria\n      const filteredModifiers = this.filterModifiers(availableModifiers, criteria);\n\n      // Generate recommendations\n      const recommendations = this.generateRecommendations(filteredModifiers, targetMission);\n\n      // Find best combinations\n      const combinations = this.findBestCombinations(filteredModifiers, criteria);\n\n      // Detect warnings\n      const warnings = this.analyzeWarnings(filteredModifiers, targetMission);\n\n      // Generate narrative summary\n      const narrativeSummary = this.generateNarrativeSummary(filteredModifiers);\n\n      return {\n        availableModifiers: filteredModifiers,\n        recommendations: recommendations.slice(0, 5), // Top 5 recommendations\n        bestCombinations: combinations.slice(0, 3), // Top 3 combinations\n        warnings,\n        narrativeSummary\n      };\n    } catch (error) {\n      Logger.error('Failed to analyze heritage options', error);\n      return {\n        availableModifiers: [],\n        recommendations: [],\n        bestCombinations: [],\n        warnings: ['Error analyzing heritage options'],\n        narrativeSummary: 'Unable to analyze heritage options'\n      };\n    }\n  }\n\n  /**\n   * Detect conflicts between heritage modifiers\n   */\n  static detectConflicts(modifiers: HeritageModifier[]): HeritageConflict[] {\n    const conflicts: HeritageConflict[] = [];\n\n    for (let i = 0; i < modifiers.length; i++) {\n      for (let j = i + 1; j < modifiers.length; j++) {\n        const mod1 = modifiers[i];\n        const mod2 = modifiers[j];\n\n        // Check mutual exclusivity\n        if (mod1.mutuallyExclusive.includes(mod2.id)) {\n          conflicts.push({\n            modifier1: mod1.id,\n            modifier2: mod2.id,\n            conflictType: 'mutually_exclusive',\n            severity: 'critical',\n            resolution: `Cannot use ${mod1.name} with ${mod2.name}`\n          });\n        }\n\n        // Check resource conflicts\n        const resourceConflict = this.checkResourceConflicts(mod1, mod2);\n        if (resourceConflict) {\n          conflicts.push(resourceConflict);\n        }\n\n        // Check narrative consistency\n        const narrativeConflict = this.checkNarrativeConflicts(mod1, mod2);\n        if (narrativeConflict) {\n          conflicts.push(narrativeConflict);\n        }\n      }\n    }\n\n    return conflicts;\n  }\n\n  /**\n   * Save heritage library to storage\n   */\n  static async saveHeritageLibrary(library: HeritageLibrary): Promise<void> {\n    try {\n      const serialized = JSON.stringify(library);\n      localStorage.setItem(this.HERITAGE_STORAGE_KEY, serialized);\n      this.heritageLibrary = library;\n\n      Logger.info('Heritage library saved', {\n        modifierCount: library.modifiers.length,\n        templateCount: library.templates.length\n      });\n    } catch (error) {\n      Logger.error('Failed to save heritage library', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Load heritage library from storage\n   */\n  static async loadHeritageLibrary(): Promise<HeritageLibrary> {\n    try {\n      if (this.heritageLibrary) {\n        return this.heritageLibrary;\n      }\n\n      const stored = localStorage.getItem(this.HERITAGE_STORAGE_KEY);\n      if (stored) {\n        this.heritageLibrary = JSON.parse(stored);\n        return this.heritageLibrary!;\n      }\n\n      // Create new library if none exists\n      this.heritageLibrary = this.createEmptyLibrary();\n      return this.heritageLibrary;\n    } catch (error) {\n      Logger.error('Failed to load heritage library', error);\n      return this.createEmptyLibrary();\n    }\n  }\n\n  // Private helper methods\n\n  private static createModifierFromDecision(\n    decision: ChronicleDecision,\n    entry: ChronicleEntry\n  ): HeritageModifier | null {\n    const tier = this.calculateTierFromWeight(decision.chronicleWeight);\n    const source: HeritageSource = {\n      chronicleId: entry.missionId,\n      missionNumber: entry.missionNumber,\n      sourceType: 'decision',\n      specificSource: decision.id,\n      generationContext: `Generation ${decision.generation}, Year ${decision.year}`\n    };\n\n    const modifier: HeritageModifier = {\n      id: this.generateModifierId(),\n      name: `Echo of ${decision.title}`,\n      description: `The consequences of ${decision.title} continue to influence future generations.`,\n      source,\n      tier,\n      resourceModifiers: this.generateResourceModifiersFromDecision(decision),\n      populationModifiers: this.generatePopulationModifiersFromDecision(decision),\n      eventModifiers: this.generateEventModifiersFromDecision(decision),\n      technologyModifiers: [],\n      startingNarrative: this.generateNarrativeFromDecision(decision),\n      availableChoices: [],\n      restrictedActions: [],\n      narrativeReferences: [],\n      applicabilityConditions: [],\n      mutuallyExclusive: [],\n      prerequisites: [],\n      playerRating: 0,\n      usageCount: 0,\n      effectivenessRating: 0\n    };\n\n    return modifier;\n  }\n\n  private static createModifierFromArtifact(\n    artifact: ChronicleArtifact,\n    entry: ChronicleEntry\n  ): HeritageModifier | null {\n    const tier = this.calculateTierFromArtifact(artifact);\n    const source: HeritageSource = {\n      chronicleId: entry.missionId,\n      missionNumber: entry.missionNumber,\n      sourceType: 'artifact',\n      specificSource: artifact.id,\n      generationContext: artifact.origin.circumstances\n    };\n\n    const modifier: HeritageModifier = {\n      id: this.generateModifierId(),\n      name: `Legacy of ${artifact.name}`,\n      description: artifact.description,\n      source,\n      tier,\n      resourceModifiers: this.generateResourceModifiersFromArtifact(artifact),\n      populationModifiers: [],\n      eventModifiers: [],\n      technologyModifiers: this.generateTechnologyModifiersFromArtifact(artifact),\n      startingNarrative: [{ text: artifact.flavorText, references: [], context: 'mission_start', variability: [] }],\n      availableChoices: [],\n      restrictedActions: [],\n      narrativeReferences: [],\n      applicabilityConditions: [],\n      mutuallyExclusive: [],\n      prerequisites: [],\n      playerRating: 0,\n      usageCount: 0,\n      effectivenessRating: 0\n    };\n\n    return modifier;\n  }\n\n  private static createModifierFromPopulationOutcome(entry: ChronicleEntry): HeritageModifier | null {\n    const source: HeritageSource = {\n      chronicleId: entry.missionId,\n      missionNumber: entry.missionNumber,\n      sourceType: 'outcome',\n      specificSource: entry.populationOutcome,\n      generationContext: `Population ${entry.populationOutcome} after ${entry.actualDuration} years`\n    };\n\n    const modifier: HeritageModifier = {\n      id: this.generateModifierId(),\n      name: `Survivors' Legacy`,\n      description: `The ${entry.populationOutcome} population has left its mark on future generations.`,\n      source,\n      tier: this.calculateTierFromPopulationOutcome(entry.populationOutcome),\n      resourceModifiers: [],\n      populationModifiers: this.generatePopulationModifiersFromOutcome(entry.populationOutcome),\n      eventModifiers: [],\n      technologyModifiers: [],\n      startingNarrative: [],\n      availableChoices: [],\n      restrictedActions: [],\n      narrativeReferences: [],\n      applicabilityConditions: [],\n      mutuallyExclusive: [],\n      prerequisites: [],\n      playerRating: 0,\n      usageCount: 0,\n      effectivenessRating: 0\n    };\n\n    return modifier;\n  }\n\n  private static createModifierFromLegacyEvolution(evolution: any, entry: ChronicleEntry): HeritageModifier | null {\n    // Implementation for legacy evolution modifiers\n    return null;\n  }\n\n  private static createModifierFromSettlement(settlement: any, entry: ChronicleEntry): HeritageModifier | null {\n    // Implementation for settlement modifiers\n    return null;\n  }\n\n  private static applyResourceModifier(\n    modifier: ResourceModifier,\n    mission: GenerationalMission,\n    result: HeritageApplicationResult\n  ): void {\n    const currentValue = (mission.resources as any)[modifier.resource] || 0;\n    let change = 0;\n\n    switch (modifier.type) {\n      case 'flat':\n        change = modifier.value;\n        break;\n      case 'percentage':\n        change = currentValue * (modifier.value / 100);\n        break;\n      case 'multiplier':\n        change = currentValue * modifier.value - currentValue;\n        break;\n    }\n\n    result.resourceChanges[modifier.resource] = (result.resourceChanges[modifier.resource] || 0) + change;\n  }\n\n  private static applyPopulationModifier(\n    modifier: PopulationModifier,\n    mission: GenerationalMission,\n    result: HeritageApplicationResult\n  ): void {\n    result.populationEffects.push(modifier);\n    // Actual application to mission would happen in the calling code\n  }\n\n  private static resolveConflicts(\n    modifiers: HeritageModifier[],\n    conflicts: HeritageConflict[]\n  ): HeritageModifier[] {\n    // For now, just remove conflicting modifiers with lower priority\n    const conflictingIds = new Set<string>();\n    conflicts.forEach(conflict => {\n      if (conflict.severity === 'critical') {\n        conflictingIds.add(conflict.modifier2); // Remove the second modifier\n      }\n    });\n\n    return modifiers.filter(mod => !conflictingIds.has(mod.id));\n  }\n\n  private static filterModifiers(\n    modifiers: HeritageModifier[],\n    criteria: HeritageSelectionCriteria\n  ): HeritageModifier[] {\n    let filtered = [...modifiers];\n\n    if (criteria.tierLimits) {\n      // Apply tier limits\n      const tierCounts: Partial<Record<HeritageTier, number>> = {};\n      filtered = filtered.filter(mod => {\n        const currentCount = tierCounts[mod.tier] || 0;\n        const limit = criteria.tierLimits![mod.tier];\n        if (limit && currentCount >= limit) {\n          return false;\n        }\n        tierCounts[mod.tier] = currentCount + 1;\n        return true;\n      });\n    }\n\n    if (criteria.maxModifiers) {\n      filtered = filtered.slice(0, criteria.maxModifiers);\n    }\n\n    return filtered;\n  }\n\n  private static generateRecommendations(\n    modifiers: HeritageModifier[],\n    targetMission: Partial<GenerationalMission>\n  ): HeritageRecommendation[] {\n    return modifiers.map(modifier => ({\n      modifier,\n      relevanceScore: this.calculateRelevanceScore(modifier, targetMission),\n      balanceScore: this.calculateBalanceScore(modifier),\n      narrativeScore: this.calculateNarrativeScore(modifier),\n      playerPreferenceScore: this.calculatePlayerPreferenceScore(modifier),\n      reasoning: this.generateRecommendationReasoning(modifier, targetMission)\n    })).sort((a, b) => {\n      const scoreA = (a.relevanceScore + a.balanceScore + a.narrativeScore + a.playerPreferenceScore) / 4;\n      const scoreB = (b.relevanceScore + b.balanceScore + b.narrativeScore + b.playerPreferenceScore) / 4;\n      return scoreB - scoreA;\n    });\n  }\n\n  private static findBestCombinations(\n    modifiers: HeritageModifier[],\n    criteria: HeritageSelectionCriteria\n  ): ModifierCombination[] {\n    // This would implement a complex algorithm to find synergistic combinations\n    // For now, return empty array\n    return [];\n  }\n\n  private static analyzeWarnings(\n    modifiers: HeritageModifier[],\n    targetMission: Partial<GenerationalMission>\n  ): string[] {\n    const warnings: string[] = [];\n\n    // Check for balance issues\n    const totalPowerLevel = modifiers.reduce((sum, mod) => sum + mod.effectivenessRating, 0);\n    if (totalPowerLevel > 5) {\n      warnings.push('High total modifier power may make the mission too easy');\n    }\n\n    // Check for narrative consistency\n    const legacyTypes = new Set(modifiers.map(mod =>\n      mod.source.specificSource.includes('preservers') ? 'preservers' :\n      mod.source.specificSource.includes('adaptors') ? 'adaptors' : 'wanderers'\n    ));\n\n    if (legacyTypes.size > 2) {\n      warnings.push('Mixed legacy modifiers may create narrative inconsistencies');\n    }\n\n    return warnings;\n  }\n\n  private static generateNarrativeSummary(modifiers: HeritageModifier[]): string {\n    if (modifiers.length === 0) {\n      return 'No heritage modifiers selected. This mission will begin with a clean slate.';\n    }\n\n    const narrativeElements = modifiers.flatMap(mod => mod.startingNarrative.map(n => n.text));\n    return `Your mission begins with the legacy of ${modifiers.length} previous journeys: ${narrativeElements.join(' ')}`;\n  }\n\n  // Utility methods for calculations\n  private static calculateTierFromWeight(weight: number): HeritageTier {\n    if (weight >= 0.9) return 'legendary';\n    if (weight >= 0.8) return 'major';\n    if (weight >= 0.7) return 'moderate';\n    return 'minor';\n  }\n\n  private static calculateTierFromArtifact(artifact: ChronicleArtifact): HeritageTier {\n    if (artifact.type === 'historical') return 'legendary';\n    if (artifact.type === 'technology') return 'major';\n    return 'moderate';\n  }\n\n  private static calculateTierFromPopulationOutcome(outcome: string): HeritageTier {\n    switch (outcome) {\n      case 'thrived': return 'major';\n      case 'transformed': return 'major';\n      case 'survived': return 'minor';\n      case 'diminished': return 'moderate';\n      case 'extinct': return 'legendary';\n      default: return 'minor';\n    }\n  }\n\n  private static calculateRelevanceScore(modifier: HeritageModifier, mission: Partial<GenerationalMission>): number {\n    // Calculate how relevant this modifier is to the target mission\n    return 0.5; // Placeholder\n  }\n\n  private static calculateBalanceScore(modifier: HeritageModifier): number {\n    // Calculate how balanced this modifier is for gameplay\n    return 0.7; // Placeholder\n  }\n\n  private static calculateNarrativeScore(modifier: HeritageModifier): number {\n    // Calculate how well this modifier fits narratively\n    return 0.6; // Placeholder\n  }\n\n  private static calculatePlayerPreferenceScore(modifier: HeritageModifier): number {\n    // Calculate how much the player might like this modifier\n    return modifier.playerRating / 5; // Convert 1-5 rating to 0-1 score\n  }\n\n  private static generateRecommendationReasoning(\n    modifier: HeritageModifier,\n    mission: Partial<GenerationalMission>\n  ): string[] {\n    return [\n      `Based on previous decision: ${modifier.source.specificSource}`,\n      `Tier: ${modifier.tier}`,\n      `Source: ${modifier.source.sourceType}`\n    ];\n  }\n\n  private static checkResourceConflicts(mod1: HeritageModifier, mod2: HeritageModifier): HeritageConflict | null {\n    // Check for resource conflicts between modifiers\n    return null; // Placeholder\n  }\n\n  private static checkNarrativeConflicts(mod1: HeritageModifier, mod2: HeritageModifier): HeritageConflict | null {\n    // Check for narrative conflicts between modifiers\n    return null; // Placeholder\n  }\n\n  private static createEmptyLibrary(): HeritageLibrary {\n    return {\n      modifiers: [],\n      templates: [],\n      playerCustomizations: {},\n      generationHistory: []\n    };\n  }\n\n  // Generation helper methods\n  private static generateResourceModifiersFromDecision(decision: ChronicleDecision): ResourceModifier[] {\n    // Generate resource modifiers based on decision impact\n    return [];\n  }\n\n  private static generatePopulationModifiersFromDecision(decision: ChronicleDecision): PopulationModifier[] {\n    // Generate population modifiers based on decision impact\n    return [];\n  }\n\n  private static generateEventModifiersFromDecision(decision: ChronicleDecision): EventModifier[] {\n    // Generate event modifiers based on decision impact\n    return [];\n  }\n\n  private static generateNarrativeFromDecision(decision: ChronicleDecision): NarrativeElement[] {\n    return [{\n      text: `The memory of ${decision.title} lingers in the collective consciousness.`,\n      references: [decision.id],\n      context: 'mission_start',\n      variability: []\n    }];\n  }\n\n  private static generateResourceModifiersFromArtifact(artifact: ChronicleArtifact): ResourceModifier[] {\n    return [];\n  }\n\n  private static generateTechnologyModifiersFromArtifact(artifact: ChronicleArtifact): TechnologyModifier[] {\n    return [];\n  }\n\n  private static generatePopulationModifiersFromOutcome(outcome: string): PopulationModifier[] {\n    return [];\n  }\n\n  private static generateModifierId(): string {\n    return `heritage_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n  }\n}","usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\services\\LegacyDeckService.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CustomCard' is defined but never used.","line":12,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":12,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CardImpact' is defined but never used.","line":19,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":19,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'LegacyTypeType' is defined but never used.","line":23,"column":15,"nodeType":null,"messageId":"unusedVar","endLine":23,"endColumn":29},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":326,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":326,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9517,9520],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9517,9520],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'artifact' is defined but never used.","line":425,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":425,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'entry' is defined but never used.","line":426,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":426,"endColumn":10},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'discovery' is defined but never used.","line":432,"column":42,"nodeType":null,"messageId":"unusedVar","endLine":432,"endColumn":51},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":432,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":432,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12816,12819],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12816,12819],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'entry' is defined but never used.","line":432,"column":58,"nodeType":null,"messageId":"unusedVar","endLine":432,"endColumn":63},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'evolution' is defined but never used.","line":437,"column":42,"nodeType":null,"messageId":"unusedVar","endLine":437,"endColumn":51},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":437,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":437,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12995,12998],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12995,12998],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'entry' is defined but never used.","line":437,"column":58,"nodeType":null,"messageId":"unusedVar","endLine":437,"endColumn":63},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'entry' is defined but never used.","line":442,"column":50,"nodeType":null,"messageId":"unusedVar","endLine":442,"endColumn":55},{"ruleId":"no-case-declarations","severity":1,"message":"Unexpected lexical declaration in case block.","line":465,"column":11,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":465,"endColumn":85,"suggestions":[{"messageId":"addBrackets","fix":{"range":[13989,14157],"text":"{ const resourceValue = (gameState.resources as any)[condition.target] || 0;\n          return this.evaluateComparison(resourceValue, condition.operator, condition.value); }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":465,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":465,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14035,14038],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14035,14038],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-case-declarations","severity":1,"message":"Unexpected lexical declaration in case block.","line":469,"column":11,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":469,"endColumn":55,"suggestions":[{"messageId":"addBrackets","fix":{"range":[14196,14329],"text":"{ const popValue = gameState.population.total;\n          return this.evaluateComparison(popValue, condition.operator, condition.value); }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":484,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":484,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14668,14671],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14668,14671],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":484,"column":78,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":484,"endColumn":81,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14701,14704],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14701,14704],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":500,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":500,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15312,15315],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15312,15315],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'gameState' is defined but never used.","line":517,"column":58,"nodeType":null,"messageId":"unusedVar","endLine":517,"endColumn":67},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'decision' is defined but never used.","line":750,"column":54,"nodeType":null,"messageId":"unusedVar","endLine":750,"endColumn":62},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":750,"column":84,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":750,"endColumn":87,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[24016,24019],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[24016,24019],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":22,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// services/LegacyDeckService.ts\nimport type {\n  LegacyDeck,\n  LegacyCard,\n  LegacyCardTemplate,\n  CardTriggerResult,\n  CardResolutionResult,\n  DeckAnalytics,\n  DeckBalanceReport,\n  BalanceIssue,\n  CardModification,\n  CustomCard,\n  CurationAction,\n  CardChoice,\n  CardEffect,\n  CardTrigger,\n  CardTier,\n  CardType,\n  CardImpact\n} from '../types/legacyDecks';\nimport type { ChronicleEntry, ChronicleDecision, ChronicleArtifact } from '../types/chronicle';\nimport type { GenerationalMission } from '../types/generationalMissions';\nimport type { LegacyTypeType } from '../types/enums';\nimport Logger from '../utils/logger';\n\nexport class LegacyDeckService {\n  private static readonly DECK_STORAGE_KEY = 'stellar-legacy-decks';\n  private static readonly VERSION = '1.0.0';\n\n  /**\n   * Generate legacy cards from a chronicle entry\n   */\n  static generateCardsFromChronicle(entry: ChronicleEntry): LegacyCardTemplate[] {\n    const templates: LegacyCardTemplate[] = [];\n\n    try {\n      // Generate cards from key decisions\n      entry.keyDecisions.forEach(decision => {\n        if (decision.chronicleWeight >= 0.6) {\n          const template = this.createCardFromDecision(decision, entry);\n          if (template) templates.push(template);\n        }\n      });\n\n      // Generate cards from artifacts\n      entry.artifacts.forEach(artifact => {\n        const template = this.createCardFromArtifact(artifact, entry);\n        if (template) templates.push(template);\n      });\n\n      // Generate cards from discoveries\n      entry.discoveries.forEach(discovery => {\n        if (discovery.significance >= 0.7) {\n          const template = this.createCardFromDiscovery(discovery, entry);\n          if (template) templates.push(template);\n        }\n      });\n\n      // Generate cards from legacy evolution\n      entry.legacyEvolution.forEach(evolution => {\n        if (evolution.deviationMagnitude > 0.5) {\n          const template = this.createCardFromEvolution(evolution, entry);\n          if (template) templates.push(template);\n        }\n      });\n\n      // Generate cards from population outcome\n      if (entry.populationOutcome !== 'survived') {\n        const template = this.createCardFromPopulationOutcome(entry);\n        if (template) templates.push(template);\n      }\n\n      Logger.info('Generated legacy cards from chronicle', {\n        chronicleEntry: entry.missionId,\n        cardCount: templates.length\n      });\n\n      return templates;\n    } catch (error) {\n      Logger.error('Failed to generate cards from chronicle', error);\n      return [];\n    }\n  }\n\n  /**\n   * Check if any cards should trigger based on current game state\n   */\n  static checkCardTriggers(\n    deck: LegacyDeck,\n    gameState: GenerationalMission\n  ): CardTriggerResult[] {\n    const triggeredCards: CardTriggerResult[] = [];\n\n    try {\n      const availableCards = deck.cards.filter(card =>\n        !deck.activeCards.includes(card.id) &&\n        !deck.discardPile.includes(card.id) &&\n        !deck.disabledCards.includes(card.id)\n      );\n\n      availableCards.forEach(card => {\n        const triggerResult = this.evaluateCardTriggers(card, gameState);\n        if (triggerResult.success) {\n          triggeredCards.push(triggerResult);\n        }\n      });\n\n      // Sort by priority and probability\n      triggeredCards.sort((a, b) => {\n        const priorityA = this.calculateCardPriority(a.card, gameState);\n        const priorityB = this.calculateCardPriority(b.card, gameState);\n        return priorityB - priorityA;\n      });\n\n      Logger.info('Card trigger check completed', {\n        missionId: gameState.id,\n        availableCards: availableCards.length,\n        triggeredCards: triggeredCards.length\n      });\n\n      return triggeredCards;\n    } catch (error) {\n      Logger.error('Failed to check card triggers', error);\n      return [];\n    }\n  }\n\n  /**\n   * Resolve a card choice and apply its effects\n   */\n  static resolveCardChoice(\n    card: LegacyCard,\n    choice: CardChoice,\n    gameState: GenerationalMission\n  ): CardResolutionResult {\n    try {\n      const result: CardResolutionResult = {\n        chosenOption: choice,\n        immediateEffects: [],\n        futureEffects: [],\n        narrativeOutcome: choice.outcomeText,\n        legacyReactions: choice.legacyReaction,\n        chronicleUpdate: choice.chronicleConsequence\n      };\n\n      // Apply immediate effects\n      choice.immediateEffects.forEach(effect => {\n        this.applyCardEffect(effect, gameState);\n        result.immediateEffects.push(effect);\n      });\n\n      // Store future effects for later application\n      result.futureEffects = choice.longTermEffects;\n\n      // Update card statistics\n      this.updateCardStatistics(card, choice);\n\n      Logger.info('Card choice resolved', {\n        cardId: card.id,\n        choiceId: choice.id,\n        effectCount: result.immediateEffects.length\n      });\n\n      return result;\n    } catch (error) {\n      Logger.error('Failed to resolve card choice', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Balance deck weights and card probabilities\n   */\n  static balanceDeck(deck: LegacyDeck): LegacyDeck {\n    try {\n      const analytics = this.analyzeDeck(deck);\n      const balancedDeck = { ...deck };\n\n      // Adjust card weights based on usage and player ratings\n      balancedDeck.cards = deck.cards.map(card => {\n        const adjustedCard = { ...card };\n\n        // Reduce weight of overused cards\n        if (card.timesPlayed > analytics.averageUsage * 2) {\n          adjustedCard.weight = Math.max(0.1, card.weight * 0.8);\n        }\n\n        // Increase weight of underused but well-rated cards\n        if (card.timesPlayed < analytics.averageUsage * 0.5 && card.playerRating > 3.5) {\n          adjustedCard.weight = Math.min(1.0, card.weight * 1.2);\n        }\n\n        // Adjust based on player rating\n        const ratingMultiplier = card.playerRating / 3; // 1-5 rating becomes 0.33-1.67 multiplier\n        adjustedCard.weight = Math.max(0.1, Math.min(1.0, card.weight * ratingMultiplier));\n\n        return adjustedCard;\n      });\n\n      // Update deck statistics\n      balancedDeck.balanceRating = this.calculateDeckBalance(balancedDeck);\n\n      Logger.info('Deck balanced', {\n        legacy: deck.legacy,\n        cardCount: deck.cards.length,\n        newBalanceRating: balancedDeck.balanceRating\n      });\n\n      return balancedDeck;\n    } catch (error) {\n      Logger.error('Failed to balance deck', error);\n      return deck;\n    }\n  }\n\n  /**\n   * Analyze deck composition and performance\n   */\n  static analyzeDeck(deck: LegacyDeck): DeckAnalytics {\n    try {\n      const tierDistribution: Record<CardTier, number> = {\n        common: 0,\n        uncommon: 0,\n        rare: 0,\n        epic: 0,\n        legendary: 0\n      };\n\n      const typeDistribution: Record<CardType, number> = {\n        event: 0,\n        bonus: 0,\n        crisis: 0,\n        opportunity: 0,\n        memory: 0,\n        tradition: 0\n      };\n\n      const usageFrequency: Record<string, number> = {};\n      const playerSatisfactionScores: Record<string, number> = {};\n\n      let totalPowerLevel = 0;\n      let totalUsage = 0;\n\n      deck.cards.forEach(card => {\n        tierDistribution[card.tier]++;\n        typeDistribution[card.type]++;\n        totalPowerLevel += card.balanceMetrics?.powerLevel || 0.5;\n        totalUsage += card.timesPlayed;\n\n        usageFrequency[card.id] = card.timesPlayed;\n        playerSatisfactionScores[card.id] = card.playerRating;\n      });\n\n      const averageUsage = totalUsage / deck.cards.length;\n      const averagePowerLevel = totalPowerLevel / deck.cards.length;\n\n      // Detect balance issues\n      const balanceIssues = this.detectBalanceIssues(deck, { averageUsage, averagePowerLevel });\n\n      return {\n        totalCards: deck.cards.length,\n        tierDistribution,\n        typeDistribution,\n        averagePowerLevel,\n        usageFrequency,\n        playerSatisfactionScores,\n        balanceIssues,\n        averageUsage\n      };\n    } catch (error) {\n      Logger.error('Failed to analyze deck', error);\n      return this.getEmptyAnalytics();\n    }\n  }\n\n  /**\n   * Generate a comprehensive deck balance report\n   */\n  static generateBalanceReport(deck: LegacyDeck): DeckBalanceReport {\n    try {\n      const analytics = this.analyzeDeck(deck);\n\n      // Calculate overall balance score\n      const overallScore = this.calculateOverallBalance(analytics);\n\n      // Calculate power curve\n      const powerCurve = this.calculatePowerCurve(deck);\n\n      // Calculate diversity score\n      const diversityScore = this.calculateDiversityScore(analytics);\n\n      // Calculate player engagement score\n      const playerEngagement = this.calculatePlayerEngagement(deck);\n\n      // Generate recommendations\n      const recommendations = this.generateBalanceRecommendations(analytics);\n\n      return {\n        overallScore,\n        powerCurve,\n        diversityScore,\n        playerEngagement,\n        issues: analytics.balanceIssues,\n        recommendations\n      };\n    } catch (error) {\n      Logger.error('Failed to generate balance report', error);\n      return {\n        overallScore: 0.5,\n        powerCurve: [0.2, 0.4, 0.6, 0.8, 1.0],\n        diversityScore: 0.5,\n        playerEngagement: 0.5,\n        issues: [],\n        recommendations: ['Unable to generate recommendations due to error']\n      };\n    }\n  }\n\n  /**\n   * Apply player curation action to a card\n   */\n  static applyCuration(\n    deck: LegacyDeck,\n    cardId: string,\n    action: CurationAction,\n    value?: any\n  ): LegacyDeck {\n    try {\n      const newDeck = { ...deck };\n      const cardIndex = newDeck.cards.findIndex(c => c.id === cardId);\n\n      if (cardIndex === -1) {\n        throw new Error(`Card ${cardId} not found in deck`);\n      }\n\n      switch (action) {\n        case 'rate':\n          if (typeof value === 'number' && value >= 1 && value <= 5) {\n            newDeck.cardRatings[cardId] = value;\n            newDeck.cards[cardIndex].playerRating = value;\n          }\n          break;\n\n        case 'disable':\n          if (!newDeck.disabledCards.includes(cardId)) {\n            newDeck.disabledCards.push(cardId);\n          }\n          break;\n\n        case 'modify':\n          if (value && Array.isArray(value)) {\n            const modifications = value as CardModification[];\n            const modifiedCard = this.applyModifications(newDeck.cards[cardIndex], modifications);\n            newDeck.cards[cardIndex] = modifiedCard;\n          }\n          break;\n\n        case 'favorite':\n          // Increase weight of favorite cards\n          newDeck.cards[cardIndex].weight = Math.min(1.0, newDeck.cards[cardIndex].weight * 1.5);\n          break;\n\n        case 'report':\n          // Log issue for review\n          Logger.info('Card reported by player', { cardId, issue: value });\n          break;\n      }\n\n      Logger.info('Curation applied', { cardId, action, legacy: deck.legacy });\n      return newDeck;\n    } catch (error) {\n      Logger.error('Failed to apply curation', error);\n      return deck;\n    }\n  }\n\n  // Private helper methods\n\n  private static createCardFromDecision(\n    decision: ChronicleDecision,\n    entry: ChronicleEntry\n  ): LegacyCardTemplate | null {\n    const template: LegacyCardTemplate = {\n      id: this.generateCardId(),\n      name: `Echo: ${decision.title}`,\n      templateType: 'decision_echo',\n      generationRules: {\n        minimumDecisionWeight: 0.6,\n        requiredElements: [decision.category],\n        excludedCombinations: [],\n        scalingFactors: { impact: decision.chronicleWeight },\n        rarityCalculation: {\n          baseRarity: this.calculateTierFromWeight(decision.chronicleWeight),\n          impactModifier: decision.chronicleWeight,\n          uniquenessBonus: 0.1,\n          playerPreferenceWeight: 0.2\n        }\n      },\n      effectTemplates: this.generateEffectTemplatesFromDecision(decision),\n      narrativeTemplates: [{\n        title: decision.title,\n        description: decision.description,\n        flavorText: `The echoes of this decision still resonate...`,\n        variables: ['legacy', 'generation', 'outcome'],\n        conditions: [`legacy:${entry.dominantLegacy}`]\n      }],\n      balancingRules: {\n        maxPowerLevel: this.calculateMaxPowerFromDecision(decision),\n        costFormula: 'chronicleWeight * 100',\n        cooldownFormula: '(1 - chronicleWeight) * 50',\n        tierAdjustments: {\n          common: 0.8,\n          uncommon: 0.9,\n          rare: 1.0,\n          epic: 1.2,\n          legendary: 1.5\n        }\n      }\n    };\n\n    return template;\n  }\n\n  private static createCardFromArtifact(\n    artifact: ChronicleArtifact,\n    entry: ChronicleEntry\n  ): LegacyCardTemplate | null {\n    // Implementation for artifact-based cards\n    return null;\n  }\n\n  private static createCardFromDiscovery(discovery: any, entry: ChronicleEntry): LegacyCardTemplate | null {\n    // Implementation for discovery-based cards\n    return null;\n  }\n\n  private static createCardFromEvolution(evolution: any, entry: ChronicleEntry): LegacyCardTemplate | null {\n    // Implementation for evolution-based cards\n    return null;\n  }\n\n  private static createCardFromPopulationOutcome(entry: ChronicleEntry): LegacyCardTemplate | null {\n    // Implementation for population outcome cards\n    return null;\n  }\n\n  private static evaluateCardTriggers(card: LegacyCard, gameState: GenerationalMission): CardTriggerResult {\n    const success = card.triggerConditions.some(trigger => this.evaluateTriggerCondition(trigger, gameState));\n\n    return {\n      success,\n      card,\n      triggeredBy: success ? 'game_state_match' : 'no_trigger',\n      availableChoices: success ? card.choices : [],\n      context: success ? this.generateTriggerContext(card, gameState) : ''\n    };\n  }\n\n  private static evaluateTriggerCondition(trigger: CardTrigger, gameState: GenerationalMission): boolean {\n    try {\n      const condition = trigger.condition;\n\n      switch (condition.type) {\n        case 'resource':\n          const resourceValue = (gameState.resources as any)[condition.target] || 0;\n          return this.evaluateComparison(resourceValue, condition.operator, condition.value);\n\n        case 'population':\n          const popValue = gameState.population.total;\n          return this.evaluateComparison(popValue, condition.operator, condition.value);\n\n        case 'year':\n          return this.evaluateComparison(gameState.currentYear, condition.operator, condition.value);\n\n        default:\n          return false;\n      }\n    } catch (error) {\n      Logger.error('Failed to evaluate trigger condition', error);\n      return false;\n    }\n  }\n\n  private static evaluateComparison(actual: any, operator: string, expected: any): boolean {\n    switch (operator) {\n      case 'equals': return actual === expected;\n      case 'greater': return actual > expected;\n      case 'less': return actual < expected;\n      case 'contains': return String(actual).includes(String(expected));\n      case 'not': return actual !== expected;\n      default: return false;\n    }\n  }\n\n  private static applyCardEffect(effect: CardEffect, gameState: GenerationalMission): void {\n    try {\n      switch (effect.type) {\n        case 'resource':\n          if (gameState.resources && effect.target in gameState.resources) {\n            (gameState.resources as any)[effect.target] += effect.magnitude;\n          }\n          break;\n\n        case 'population':\n          if (effect.target === 'total') {\n            gameState.population.total += effect.magnitude;\n          }\n          break;\n\n        // Add more effect types as needed\n      }\n    } catch (error) {\n      Logger.error('Failed to apply card effect', error);\n    }\n  }\n\n  private static calculateCardPriority(card: LegacyCard, gameState: GenerationalMission): number {\n    // Calculate priority based on multiple factors\n    let priority = card.weight;\n\n    // Increase priority for cards that haven't been played recently\n    if (card.timesPlayed === 0) priority *= 1.5;\n\n    // Increase priority for well-rated cards\n    if (card.playerRating > 3.5) priority *= 1.2;\n\n    // Adjust based on card tier\n    const tierMultiplier = {\n      common: 1.0,\n      uncommon: 1.1,\n      rare: 1.2,\n      epic: 1.3,\n      legendary: 1.4\n    };\n    priority *= tierMultiplier[card.tier];\n\n    return priority;\n  }\n\n  private static updateCardStatistics(card: LegacyCard, choice: CardChoice): void {\n    card.timesPlayed++;\n\n    // Update choice statistics\n    if (!card.playerChoices[choice.id]) {\n      card.playerChoices[choice.id] = 0;\n    }\n    card.playerChoices[choice.id]++;\n\n    // Update effectiveness based on choice outcomes\n    card.effectiveness = this.calculateCardEffectiveness(card);\n  }\n\n  private static calculateCardEffectiveness(card: LegacyCard): number {\n    // Calculate effectiveness based on choice outcomes and player ratings\n    const totalChoices = Object.values(card.playerChoices).reduce((sum, count) => sum + count, 0);\n    if (totalChoices === 0) return 0.5;\n\n    // Simple effectiveness calculation - could be more sophisticated\n    return Math.min(1.0, (card.playerRating / 5) * (totalChoices / (card.timesPlayed || 1)));\n  }\n\n  private static calculateDeckBalance(deck: LegacyDeck): number {\n    const analytics = this.analyzeDeck(deck);\n\n    // Calculate balance based on distribution and player satisfaction\n    const tierBalance = this.calculateTierBalance(analytics.tierDistribution);\n    const typeBalance = this.calculateTypeBalance(analytics.typeDistribution);\n    const satisfactionScore = Object.values(analytics.playerSatisfactionScores)\n      .reduce((sum, rating) => sum + rating, 0) / Object.keys(analytics.playerSatisfactionScores).length;\n\n    return (tierBalance + typeBalance + (satisfactionScore / 5)) / 3;\n  }\n\n  private static calculateTierBalance(distribution: Record<CardTier, number>): number {\n    const total = Object.values(distribution).reduce((sum, count) => sum + count, 0);\n    if (total === 0) return 0;\n\n    // Ideal distribution: more common cards, fewer legendary\n    const ideal = { common: 0.4, uncommon: 0.3, rare: 0.2, epic: 0.08, legendary: 0.02 };\n\n    let deviation = 0;\n    Object.entries(ideal).forEach(([tier, idealRatio]) => {\n      const actualRatio = distribution[tier as CardTier] / total;\n      deviation += Math.abs(actualRatio - idealRatio);\n    });\n\n    return Math.max(0, 1 - deviation);\n  }\n\n  private static calculateTypeBalance(distribution: Record<CardType, number>): number {\n    const total = Object.values(distribution).reduce((sum, count) => sum + count, 0);\n    if (total === 0) return 0;\n\n    // Calculate how evenly distributed the types are\n    const types = Object.keys(distribution).length;\n    const idealRatio = 1 / types;\n\n    let deviation = 0;\n    Object.values(distribution).forEach(count => {\n      const actualRatio = count / total;\n      deviation += Math.abs(actualRatio - idealRatio);\n    });\n\n    return Math.max(0, 1 - deviation);\n  }\n\n  private static detectBalanceIssues(deck: LegacyDeck, metrics: { averageUsage: number; averagePowerLevel: number }): BalanceIssue[] {\n    const issues: BalanceIssue[] = [];\n\n    deck.cards.forEach(card => {\n      // Check for overpowered cards\n      if ((card.balanceMetrics?.powerLevel || 0.5) > 0.9) {\n        issues.push({\n          type: 'overpowered',\n          cardId: card.id,\n          severity: 'major',\n          description: `${card.name} has very high power level`,\n          suggestedFix: 'Reduce effect magnitude or increase cost',\n          automaticFix: true\n        });\n      }\n\n      // Check for underused cards\n      if (card.timesPlayed < metrics.averageUsage * 0.2 && card.playerRating < 2) {\n        issues.push({\n          type: 'underpowered',\n          cardId: card.id,\n          severity: 'moderate',\n          description: `${card.name} is rarely played and poorly rated`,\n          suggestedFix: 'Increase power level or improve triggers',\n          automaticFix: false\n        });\n      }\n\n      // Check for overused cards\n      if (card.timesPlayed > metrics.averageUsage * 3) {\n        issues.push({\n          type: 'too_frequent',\n          cardId: card.id,\n          severity: 'minor',\n          description: `${card.name} appears too frequently`,\n          suggestedFix: 'Reduce trigger probability or add cooldown',\n          automaticFix: true\n        });\n      }\n    });\n\n    return issues;\n  }\n\n  private static calculateOverallBalance(analytics: DeckAnalytics): number {\n    const issueScore = 1 - (analytics.balanceIssues.length / analytics.totalCards);\n    const satisfactionScore = Object.values(analytics.playerSatisfactionScores)\n      .reduce((sum, rating) => sum + rating, 0) / (Object.keys(analytics.playerSatisfactionScores).length * 5);\n\n    return (issueScore + satisfactionScore) / 2;\n  }\n\n  private static calculatePowerCurve(deck: LegacyDeck): number[] {\n    const tierPowers: Record<CardTier, number[]> = {\n      common: [],\n      uncommon: [],\n      rare: [],\n      epic: [],\n      legendary: []\n    };\n\n    deck.cards.forEach(card => {\n      tierPowers[card.tier].push(card.balanceMetrics?.powerLevel || 0.5);\n    });\n\n    return Object.keys(tierPowers).map(tier => {\n      const powers = tierPowers[tier as CardTier];\n      return powers.length > 0 ? powers.reduce((sum, p) => sum + p, 0) / powers.length : 0;\n    });\n  }\n\n  private static calculateDiversityScore(analytics: DeckAnalytics): number {\n    const typeCount = Object.values(analytics.typeDistribution).filter(count => count > 0).length;\n    const maxTypes = Object.keys(analytics.typeDistribution).length;\n    return typeCount / maxTypes;\n  }\n\n  private static calculatePlayerEngagement(deck: LegacyDeck): number {\n    const avgRating = deck.cards.reduce((sum, card) => sum + card.playerRating, 0) / deck.cards.length;\n    return avgRating / 5; // Convert 1-5 rating to 0-1 score\n  }\n\n  private static generateBalanceRecommendations(analytics: DeckAnalytics): string[] {\n    const recommendations: string[] = [];\n\n    if (analytics.balanceIssues.length > analytics.totalCards * 0.2) {\n      recommendations.push('Consider rebalancing multiple cards to improve overall deck health');\n    }\n\n    const avgSatisfaction = Object.values(analytics.playerSatisfactionScores)\n      .reduce((sum, rating) => sum + rating, 0) / Object.keys(analytics.playerSatisfactionScores).length;\n\n    if (avgSatisfaction < 3) {\n      recommendations.push('Player satisfaction is low - review card design and effects');\n    }\n\n    if (analytics.tierDistribution.legendary > analytics.totalCards * 0.1) {\n      recommendations.push('Too many legendary cards may reduce their special feeling');\n    }\n\n    return recommendations;\n  }\n\n  private static applyModifications(card: LegacyCard, modifications: CardModification[]): LegacyCard {\n    const modifiedCard = { ...card };\n\n    modifications.forEach(mod => {\n      switch (mod.type) {\n        case 'effect_magnitude':\n          // Modify effect magnitudes\n          break;\n        case 'trigger_condition':\n          // Modify trigger conditions\n          break;\n        case 'narrative_text':\n          // Modify narrative text\n          break;\n        case 'rarity_adjustment':\n          // Adjust rarity/tier\n          break;\n      }\n    });\n\n    return modifiedCard;\n  }\n\n  // Utility methods\n  private static generateTriggerContext(card: LegacyCard, gameState: GenerationalMission): string {\n    return `${card.title} has been triggered during ${gameState.currentPhase} phase of year ${gameState.currentYear}`;\n  }\n\n  private static calculateTierFromWeight(weight: number): CardTier {\n    if (weight >= 0.95) return 'legendary';\n    if (weight >= 0.85) return 'epic';\n    if (weight >= 0.7) return 'rare';\n    if (weight >= 0.5) return 'uncommon';\n    return 'common';\n  }\n\n  private static calculateMaxPowerFromDecision(decision: ChronicleDecision): number {\n    return Math.min(1.0, decision.chronicleWeight * 1.2);\n  }\n\n  private static generateEffectTemplatesFromDecision(decision: ChronicleDecision): any[] {\n    // Generate effect templates based on decision category and impact\n    return [];\n  }\n\n  private static getEmptyAnalytics(): DeckAnalytics {\n    return {\n      totalCards: 0,\n      tierDistribution: { common: 0, uncommon: 0, rare: 0, epic: 0, legendary: 0 },\n      typeDistribution: { event: 0, bonus: 0, crisis: 0, opportunity: 0, memory: 0, tradition: 0 },\n      averagePowerLevel: 0,\n      usageFrequency: {},\n      playerSatisfactionScores: {},\n      balanceIssues: [],\n      averageUsage: 0\n    };\n  }\n\n  private static generateCardId(): string {\n    return `card_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n  }\n}","usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\services\\LegacyService.ts","messages":[{"ruleId":"no-case-declarations","severity":1,"message":"Unexpected lexical declaration in case block.","line":128,"column":9,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":128,"endColumn":52,"suggestions":[{"messageId":"addBrackets","fix":{"range":[4233,5437],"text":"{ const geneticSuccess = Math.random() > 0.3; // 70% success rate\r\n        return {\r\n          resourceChanges: {\r\n            technology: geneticSuccess ? 200 : -100,\r\n            energy: -500,\r\n            population: geneticSuccess ? 0 : -200, // Failed modifications\r\n            adaptationLevel: geneticSuccess ? 0.1 : 0.05\r\n          },\r\n          populationEffects: [\r\n            {\r\n              cohortType: 'general',\r\n              effectType: 'effectiveness',\r\n              magnitude: geneticSuccess ? 0.15 : -0.1,\r\n              description: geneticSuccess ? 'Enhanced capabilities' : 'Genetic complications'\r\n            }\r\n          ],\r\n          longTermConsequences: geneticSuccess ? [\r\n            'Population gains genetic enhancements',\r\n            'Increased adaptation to space environment'\r\n          ] : [\r\n            'Genetic instability in population',\r\n            'Fear of future modifications',\r\n            'Medical complications'\r\n          ],\r\n          legacySpecificEffects: {\r\n            mutationEvents: geneticSuccess ? 0 : 1,\r\n            enhancementResistance: geneticSuccess ? -5 : 15,\r\n            bodyHorrorRisk: geneticSuccess ? 5 : 20\r\n          }\r\n        }; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"no-case-declarations","severity":1,"message":"Unexpected lexical declaration in case block.","line":160,"column":9,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":160,"endColumn":56,"suggestions":[{"messageId":"addBrackets","fix":{"range":[5475,6580],"text":"{ const cyberneticSuccess = Math.random() > 0.25; // 75% success rate\r\n        return {\r\n          resourceChanges: {\r\n            technology: cyberneticSuccess ? 150 : -50,\r\n            minerals: -300,\r\n            energy: cyberneticSuccess ? 100 : -200,\r\n            adaptationLevel: cyberneticSuccess ? 0.08 : 0.02\r\n          },\r\n          populationEffects: [\r\n            {\r\n              cohortType: 'engineers',\r\n              effectType: 'effectiveness',\r\n              magnitude: cyberneticSuccess ? 0.2 : -0.05,\r\n              description: cyberneticSuccess ? 'Enhanced technical abilities' : 'Interface problems'\r\n            }\r\n          ],\r\n          longTermConsequences: cyberneticSuccess ? [\r\n            'Enhanced human-machine interface',\r\n            'Improved ship system integration'\r\n          ] : [\r\n            'Cybernetic rejection syndrome',\r\n            'Technology dependency issues'\r\n          ],\r\n          legacySpecificEffects: {\r\n            cyberneticIntegration: cyberneticSuccess ? 20 : -10,\r\n            humanityDrift: cyberneticSuccess ? 10 : 5\r\n          }\r\n        }; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"no-case-declarations","severity":1,"message":"Unexpected lexical declaration in case block.","line":190,"column":9,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":190,"endColumn":55,"suggestions":[{"messageId":"addBrackets","fix":{"range":[6618,7730],"text":"{ const biologicalSuccess = Math.random() > 0.4; // 60% success rate\r\n        return {\r\n          resourceChanges: {\r\n            food: biologicalSuccess ? 200 : -100,\r\n            lifeSupport: biologicalSuccess ? 0.1 : -0.05,\r\n            adaptationLevel: biologicalSuccess ? 0.12 : 0.03\r\n          },\r\n          populationEffects: [\r\n            {\r\n              cohortType: 'farmers',\r\n              effectType: 'effectiveness',\r\n              magnitude: biologicalSuccess ? 0.25 : -0.1,\r\n              description: biologicalSuccess ? 'Enhanced biological efficiency' : 'Biological incompatibility'\r\n            }\r\n          ],\r\n          longTermConsequences: biologicalSuccess ? [\r\n            'Improved space adaptation',\r\n            'Reduced resource requirements',\r\n            'Enhanced biological systems'\r\n          ] : [\r\n            'Biological system rejection',\r\n            'Increased medical needs'\r\n          ],\r\n          legacySpecificEffects: {\r\n            biologicalIntegration: biologicalSuccess ? 25 : -15,\r\n            bodyHorrorRisk: biologicalSuccess ? 3 : 15\r\n          }\r\n        }; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"no-case-declarations","severity":1,"message":"Unexpected lexical declaration in case block.","line":257,"column":9,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":257,"endColumn":49,"suggestions":[{"messageId":"addBrackets","fix":{"range":[8968,10376],"text":"{ const raidSuccess = Math.random() > 0.4; // 60% success rate\r\n        const raidSeverity = Math.random(); // How severe the raid is\r\n\r\n        return {\r\n          resourceChanges: {\r\n            credits: raidSuccess ? 1000 + (raidSeverity * 2000) : -500,\r\n            energy: raidSuccess ? 500 : -200,\r\n            food: raidSuccess ? 300 : -100,\r\n            influence: -50, // Reputation damage\r\n            unity: raidSuccess ? 0.05 : -0.1\r\n          },\r\n          populationEffects: [\r\n            {\r\n              cohortType: 'security',\r\n              effectType: 'morale',\r\n              magnitude: raidSuccess ? 10 : -15,\r\n              description: raidSuccess ? 'Successful raid morale boost' : 'Failed raid demoralization'\r\n            }\r\n          ],\r\n          longTermConsequences: raidSuccess ? [\r\n            'Reputation as raiders spreads',\r\n            'Other vessels become more hostile',\r\n            raidSeverity > 0.7 ? 'Severe diplomatic consequences' : 'Minor diplomatic impact'\r\n          ] : [\r\n            'Failed raid weakens position',\r\n            'Potential retaliation from target',\r\n            'Crew questions leadership'\r\n          ],\r\n          legacySpecificEffects: {\r\n            piracyReputation: raidSuccess ? (10 + raidSeverity * 20) : 5,\r\n            moralCode: -(5 + raidSeverity * 10),\r\n            existentialDread: raidSuccess ? -5 : 10\r\n          }\r\n        }; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"no-case-declarations","severity":1,"message":"Unexpected lexical declaration in case block.","line":258,"column":9,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":258,"endColumn":44,"suggestions":[{"messageId":"addBrackets","fix":{"range":[8968,10376],"text":"{ const raidSuccess = Math.random() > 0.4; // 60% success rate\r\n        const raidSeverity = Math.random(); // How severe the raid is\r\n\r\n        return {\r\n          resourceChanges: {\r\n            credits: raidSuccess ? 1000 + (raidSeverity * 2000) : -500,\r\n            energy: raidSuccess ? 500 : -200,\r\n            food: raidSuccess ? 300 : -100,\r\n            influence: -50, // Reputation damage\r\n            unity: raidSuccess ? 0.05 : -0.1\r\n          },\r\n          populationEffects: [\r\n            {\r\n              cohortType: 'security',\r\n              effectType: 'morale',\r\n              magnitude: raidSuccess ? 10 : -15,\r\n              description: raidSuccess ? 'Successful raid morale boost' : 'Failed raid demoralization'\r\n            }\r\n          ],\r\n          longTermConsequences: raidSuccess ? [\r\n            'Reputation as raiders spreads',\r\n            'Other vessels become more hostile',\r\n            raidSeverity > 0.7 ? 'Severe diplomatic consequences' : 'Minor diplomatic impact'\r\n          ] : [\r\n            'Failed raid weakens position',\r\n            'Potential retaliation from target',\r\n            'Crew questions leadership'\r\n          ],\r\n          legacySpecificEffects: {\r\n            piracyReputation: raidSuccess ? (10 + raidSeverity * 20) : 5,\r\n            moralCode: -(5 + raidSeverity * 10),\r\n            existentialDread: raidSuccess ? -5 : 10\r\n          }\r\n        }; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"no-case-declarations","severity":1,"message":"Unexpected lexical declaration in case block.","line":293,"column":9,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":293,"endColumn":94,"suggestions":[{"messageId":"addBrackets","fix":{"range":[10409,11554],"text":"{ const tradeSuccess = Math.random() > (0.3 + wandererMetrics.piracyReputation * 0.01); // Reputation affects trade\r\n\r\n        return {\r\n          resourceChanges: {\r\n            credits: tradeSuccess ? 300 : -100,\r\n            energy: tradeSuccess ? 200 : -50,\r\n            minerals: tradeSuccess ? 150 : -30,\r\n            influence: tradeSuccess ? 10 : -5\r\n          },\r\n          populationEffects: [\r\n            {\r\n              cohortType: 'general',\r\n              effectType: 'morale',\r\n              magnitude: tradeSuccess ? 5 : -5,\r\n              description: tradeSuccess ? 'Successful peaceful exchange' : 'Trade rejection'\r\n            }\r\n          ],\r\n          longTermConsequences: tradeSuccess ? [\r\n            'Improved relations with traders',\r\n            'Trade route opportunities'\r\n          ] : [\r\n            'Decreased trust from trading partners',\r\n            'Limited future trade options'\r\n          ],\r\n          legacySpecificEffects: {\r\n            tradeReputation: tradeSuccess ? 5 : -3,\r\n            moralCode: tradeSuccess ? 2 : -1,\r\n            existentialDread: tradeSuccess ? -2 : 3\r\n          }\r\n        }; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"no-case-declarations","severity":1,"message":"Unexpected lexical declaration in case block.","line":325,"column":9,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":325,"endColumn":44,"suggestions":[{"messageId":"addBrackets","fix":{"range":[11590,12498],"text":"{ const scavengeFind = Math.random();\r\n\r\n        return {\r\n          resourceChanges: {\r\n            minerals: 50 + (scavengeFind * 200),\r\n            energy: 30 + (scavengeFind * 150),\r\n            spareParts: 20 + (scavengeFind * 100),\r\n            fuel: 10 + (scavengeFind * 50)\r\n          },\r\n          populationEffects: [\r\n            {\r\n              cohortType: 'engineers',\r\n              effectType: 'effectiveness',\r\n              magnitude: 0.02,\r\n              description: 'Experience with salvage operations'\r\n            }\r\n          ],\r\n          longTermConsequences: [\r\n            'Improved scavenging capabilities',\r\n            scavengeFind > 0.8 ? 'Discovered valuable technology cache' : ''\r\n          ].filter(Boolean),\r\n          legacySpecificEffects: {\r\n            scavengingSkill: 3,\r\n            resourceConservation: 2,\r\n            existentialDread: -1\r\n          }\r\n        }; }"},"desc":"Add {} brackets around the case block."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// services/LegacyService.ts\r\nimport type {\r\n  GenerationalMission,\r\n  ExtendedResources,\r\n  PopulationEffect\r\n} from '../types/generationalMissions';\r\nimport type { LegacyTypeType } from '../types/enums';\r\n\r\nexport class LegacyService {\r\n  // Core Legacy Mechanics Implementation\r\n\r\n  // Preservers: Stability vs Stagnation\r\n  static processPreserversDialemma(\r\n    mission: GenerationalMission,\r\n    choice: 'tradition' | 'adaptation' | 'compromise'\r\n  ): LegacyDilemmaResult {\r\n    const preserverMetrics = this.getPreserverMetrics(mission);\r\n\r\n    switch (choice) {\r\n      case 'tradition':\r\n        return {\r\n          resourceChanges: {\r\n            unity: 0.1,\r\n            culturalDrift: -0.1,\r\n            morale: preserverMetrics.traditionSupport > 0.6 ? 0.1 : -0.05,\r\n            technology: -50 // Resist technological advancement\r\n          },\r\n          populationEffects: [\r\n            {\r\n              cohortType: 'leaders',\r\n              effectType: 'morale',\r\n              magnitude: preserverMetrics.traditionSupport > 0.6 ? 15 : -10,\r\n              description: 'Response to traditional choice'\r\n            },\r\n            {\r\n              cohortType: 'scholars',\r\n              effectType: 'effectiveness',\r\n              magnitude: -0.05, // Reduced innovation\r\n              description: 'Constrained by traditional methods'\r\n            }\r\n          ],\r\n          longTermConsequences: [\r\n            'Increased resistance to future adaptations',\r\n            'Cultural purity maintained',\r\n            preserverMetrics.traditionSupport < 0.4 ? 'Growing underground adaptation movement' : ''\r\n          ].filter(Boolean),\r\n          legacySpecificEffects: {\r\n            traditionPoints: 20,\r\n            adaptationPressure: 10\r\n          }\r\n        };\r\n\r\n      case 'adaptation':\r\n        return {\r\n          resourceChanges: {\r\n            unity: -0.15,\r\n            culturalDrift: 0.2,\r\n            technology: 100,\r\n            morale: preserverMetrics.adaptationNeed > 0.7 ? 0.05 : -0.1\r\n          },\r\n          populationEffects: [\r\n            {\r\n              cohortType: 'engineers',\r\n              effectType: 'effectiveness',\r\n              magnitude: 0.1,\r\n              description: 'Embracing new methods'\r\n            },\r\n            {\r\n              cohortType: 'general',\r\n              effectType: 'morale',\r\n              magnitude: preserverMetrics.adaptationNeed > 0.7 ? 5 : -15,\r\n              description: 'Cultural disruption response'\r\n            }\r\n          ],\r\n          longTermConsequences: [\r\n            'Permanent cultural shift',\r\n            'Improved adaptability',\r\n            preserverMetrics.traditionSupport > 0.6 ? 'Traditional faction forms resistance' : ''\r\n          ].filter(Boolean),\r\n          legacySpecificEffects: {\r\n            traditionPoints: -15,\r\n            adaptationPressure: -10,\r\n            culturalSchismRisk: preserverMetrics.traditionSupport > 0.6 ? 25 : 5\r\n          }\r\n        };\r\n\r\n      case 'compromise':\r\n        return {\r\n          resourceChanges: {\r\n            unity: -0.05,\r\n            culturalDrift: 0.05,\r\n            technology: 30,\r\n            morale: -0.02 // Some dissatisfaction from both sides\r\n          },\r\n          populationEffects: [\r\n            {\r\n              cohortType: 'leaders',\r\n              effectType: 'morale',\r\n              magnitude: -5,\r\n              description: 'Political compromise stress'\r\n            }\r\n          ],\r\n          longTermConsequences: [\r\n            'Gradual cultural evolution',\r\n            'Delayed decision making in future crises'\r\n          ],\r\n          legacySpecificEffects: {\r\n            traditionPoints: 5,\r\n            adaptationPressure: 5,\r\n            compromiseDebt: 10 // Future decisions become harder\r\n          }\r\n        };\r\n\r\n      default:\r\n        throw new Error(`Invalid Preservers choice: ${choice}`);\r\n    }\r\n  }\r\n\r\n  // Adaptors: Evolution vs Humanity\r\n  static processAdaptorsEvolution(\r\n    mission: GenerationalMission,\r\n    enhancement: 'genetic' | 'cybernetic' | 'biological' | 'reject'\r\n  ): LegacyDilemmaResult {\r\n    const adaptorMetrics = this.getAdaptorMetrics(mission);\r\n\r\n    switch (enhancement) {\r\n      case 'genetic':\r\n        const geneticSuccess = Math.random() > 0.3; // 70% success rate\r\n        return {\r\n          resourceChanges: {\r\n            technology: geneticSuccess ? 200 : -100,\r\n            energy: -500,\r\n            population: geneticSuccess ? 0 : -200, // Failed modifications\r\n            adaptationLevel: geneticSuccess ? 0.1 : 0.05\r\n          },\r\n          populationEffects: [\r\n            {\r\n              cohortType: 'general',\r\n              effectType: 'effectiveness',\r\n              magnitude: geneticSuccess ? 0.15 : -0.1,\r\n              description: geneticSuccess ? 'Enhanced capabilities' : 'Genetic complications'\r\n            }\r\n          ],\r\n          longTermConsequences: geneticSuccess ? [\r\n            'Population gains genetic enhancements',\r\n            'Increased adaptation to space environment'\r\n          ] : [\r\n            'Genetic instability in population',\r\n            'Fear of future modifications',\r\n            'Medical complications'\r\n          ],\r\n          legacySpecificEffects: {\r\n            mutationEvents: geneticSuccess ? 0 : 1,\r\n            enhancementResistance: geneticSuccess ? -5 : 15,\r\n            bodyHorrorRisk: geneticSuccess ? 5 : 20\r\n          }\r\n        };\r\n\r\n      case 'cybernetic':\r\n        const cyberneticSuccess = Math.random() > 0.25; // 75% success rate\r\n        return {\r\n          resourceChanges: {\r\n            technology: cyberneticSuccess ? 150 : -50,\r\n            minerals: -300,\r\n            energy: cyberneticSuccess ? 100 : -200,\r\n            adaptationLevel: cyberneticSuccess ? 0.08 : 0.02\r\n          },\r\n          populationEffects: [\r\n            {\r\n              cohortType: 'engineers',\r\n              effectType: 'effectiveness',\r\n              magnitude: cyberneticSuccess ? 0.2 : -0.05,\r\n              description: cyberneticSuccess ? 'Enhanced technical abilities' : 'Interface problems'\r\n            }\r\n          ],\r\n          longTermConsequences: cyberneticSuccess ? [\r\n            'Enhanced human-machine interface',\r\n            'Improved ship system integration'\r\n          ] : [\r\n            'Cybernetic rejection syndrome',\r\n            'Technology dependency issues'\r\n          ],\r\n          legacySpecificEffects: {\r\n            cyberneticIntegration: cyberneticSuccess ? 20 : -10,\r\n            humanityDrift: cyberneticSuccess ? 10 : 5\r\n          }\r\n        };\r\n\r\n      case 'biological':\r\n        const biologicalSuccess = Math.random() > 0.4; // 60% success rate\r\n        return {\r\n          resourceChanges: {\r\n            food: biologicalSuccess ? 200 : -100,\r\n            lifeSupport: biologicalSuccess ? 0.1 : -0.05,\r\n            adaptationLevel: biologicalSuccess ? 0.12 : 0.03\r\n          },\r\n          populationEffects: [\r\n            {\r\n              cohortType: 'farmers',\r\n              effectType: 'effectiveness',\r\n              magnitude: biologicalSuccess ? 0.25 : -0.1,\r\n              description: biologicalSuccess ? 'Enhanced biological efficiency' : 'Biological incompatibility'\r\n            }\r\n          ],\r\n          longTermConsequences: biologicalSuccess ? [\r\n            'Improved space adaptation',\r\n            'Reduced resource requirements',\r\n            'Enhanced biological systems'\r\n          ] : [\r\n            'Biological system rejection',\r\n            'Increased medical needs'\r\n          ],\r\n          legacySpecificEffects: {\r\n            biologicalIntegration: biologicalSuccess ? 25 : -15,\r\n            bodyHorrorRisk: biologicalSuccess ? 3 : 15\r\n          }\r\n        };\r\n\r\n      case 'reject':\r\n        return {\r\n          resourceChanges: {\r\n            unity: 0.05,\r\n            morale: adaptorMetrics.enhancementPressure > 0.7 ? -0.1 : 0.02\r\n          },\r\n          populationEffects: [\r\n            {\r\n              cohortType: 'general',\r\n              effectType: 'morale',\r\n              magnitude: adaptorMetrics.enhancementPressure > 0.7 ? -10 : 5,\r\n              description: 'Conservative choice response'\r\n            }\r\n          ],\r\n          longTermConsequences: [\r\n            'Delayed adaptation progress',\r\n            adaptorMetrics.enhancementPressure > 0.7 ? 'Rogue enhancement groups may form' : ''\r\n          ].filter(Boolean),\r\n          legacySpecificEffects: {\r\n            enhancementPressure: 15,\r\n            purityFactionStrength: 10\r\n          }\r\n        };\r\n\r\n      default:\r\n        throw new Error(`Invalid Adaptors enhancement: ${enhancement}`);\r\n    }\r\n  }\r\n\r\n  // Wanderers: Freedom vs Extinction\r\n  static processWanderersSurvival(\r\n    mission: GenerationalMission,\r\n    action: 'raid' | 'trade' | 'scavenge' | 'conserve'\r\n  ): LegacyDilemmaResult {\r\n    const wandererMetrics = this.getWandererMetrics(mission);\r\n\r\n    switch (action) {\r\n      case 'raid':\r\n        const raidSuccess = Math.random() > 0.4; // 60% success rate\r\n        const raidSeverity = Math.random(); // How severe the raid is\r\n\r\n        return {\r\n          resourceChanges: {\r\n            credits: raidSuccess ? 1000 + (raidSeverity * 2000) : -500,\r\n            energy: raidSuccess ? 500 : -200,\r\n            food: raidSuccess ? 300 : -100,\r\n            influence: -50, // Reputation damage\r\n            unity: raidSuccess ? 0.05 : -0.1\r\n          },\r\n          populationEffects: [\r\n            {\r\n              cohortType: 'security',\r\n              effectType: 'morale',\r\n              magnitude: raidSuccess ? 10 : -15,\r\n              description: raidSuccess ? 'Successful raid morale boost' : 'Failed raid demoralization'\r\n            }\r\n          ],\r\n          longTermConsequences: raidSuccess ? [\r\n            'Reputation as raiders spreads',\r\n            'Other vessels become more hostile',\r\n            raidSeverity > 0.7 ? 'Severe diplomatic consequences' : 'Minor diplomatic impact'\r\n          ] : [\r\n            'Failed raid weakens position',\r\n            'Potential retaliation from target',\r\n            'Crew questions leadership'\r\n          ],\r\n          legacySpecificEffects: {\r\n            piracyReputation: raidSuccess ? (10 + raidSeverity * 20) : 5,\r\n            moralCode: -(5 + raidSeverity * 10),\r\n            existentialDread: raidSuccess ? -5 : 10\r\n          }\r\n        };\r\n\r\n      case 'trade':\r\n        const tradeSuccess = Math.random() > (0.3 + wandererMetrics.piracyReputation * 0.01); // Reputation affects trade\r\n\r\n        return {\r\n          resourceChanges: {\r\n            credits: tradeSuccess ? 300 : -100,\r\n            energy: tradeSuccess ? 200 : -50,\r\n            minerals: tradeSuccess ? 150 : -30,\r\n            influence: tradeSuccess ? 10 : -5\r\n          },\r\n          populationEffects: [\r\n            {\r\n              cohortType: 'general',\r\n              effectType: 'morale',\r\n              magnitude: tradeSuccess ? 5 : -5,\r\n              description: tradeSuccess ? 'Successful peaceful exchange' : 'Trade rejection'\r\n            }\r\n          ],\r\n          longTermConsequences: tradeSuccess ? [\r\n            'Improved relations with traders',\r\n            'Trade route opportunities'\r\n          ] : [\r\n            'Decreased trust from trading partners',\r\n            'Limited future trade options'\r\n          ],\r\n          legacySpecificEffects: {\r\n            tradeReputation: tradeSuccess ? 5 : -3,\r\n            moralCode: tradeSuccess ? 2 : -1,\r\n            existentialDread: tradeSuccess ? -2 : 3\r\n          }\r\n        };\r\n\r\n      case 'scavenge':\r\n        const scavengeFind = Math.random();\r\n\r\n        return {\r\n          resourceChanges: {\r\n            minerals: 50 + (scavengeFind * 200),\r\n            energy: 30 + (scavengeFind * 150),\r\n            spareParts: 20 + (scavengeFind * 100),\r\n            fuel: 10 + (scavengeFind * 50)\r\n          },\r\n          populationEffects: [\r\n            {\r\n              cohortType: 'engineers',\r\n              effectType: 'effectiveness',\r\n              magnitude: 0.02,\r\n              description: 'Experience with salvage operations'\r\n            }\r\n          ],\r\n          longTermConsequences: [\r\n            'Improved scavenging capabilities',\r\n            scavengeFind > 0.8 ? 'Discovered valuable technology cache' : ''\r\n          ].filter(Boolean),\r\n          legacySpecificEffects: {\r\n            scavengingSkill: 3,\r\n            resourceConservation: 2,\r\n            existentialDread: -1\r\n          }\r\n        };\r\n\r\n      case 'conserve':\r\n        return {\r\n          resourceChanges: {\r\n            fuel: -Math.max(10, mission.resources.fuel * 0.05), // Reduce consumption\r\n            energy: -Math.max(20, mission.resources.energy * 0.03),\r\n            morale: -0.05 // Hardship from conservation\r\n          },\r\n          populationEffects: [\r\n            {\r\n              cohortType: 'general',\r\n              effectType: 'morale',\r\n              magnitude: -8,\r\n              description: 'Conservation hardships'\r\n            }\r\n          ],\r\n          longTermConsequences: [\r\n            'Extended operational range',\r\n            'Improved resource efficiency',\r\n            wandererMetrics.existentialDread > 50 ? 'Growing despair over endless journey' : ''\r\n          ].filter(Boolean),\r\n          legacySpecificEffects: {\r\n            resourceConservation: 5,\r\n            survivalSkills: 3,\r\n            existentialDread: wandererMetrics.existentialDread > 50 ? 8 : 2\r\n          }\r\n        };\r\n\r\n      default:\r\n        throw new Error(`Invalid Wanderers action: ${action}`);\r\n    }\r\n  }\r\n\r\n  // Get Preservers Specific Metrics\r\n  private static getPreserverMetrics(mission: GenerationalMission): PreserverMetrics {\r\n    const culturalDrift = mission.resources.culturalDrift || 0;\r\n\r\n    return {\r\n      traditionSupport: Math.max(0, 1 - culturalDrift - (mission.currentYear / mission.estimatedDuration)),\r\n      adaptationNeed: Math.min(1, culturalDrift + (mission.currentYear / mission.estimatedDuration * 0.5)),\r\n      culturalStress: Math.abs(culturalDrift - 0.3), // Stress when too much or too little change\r\n      generationGap: Math.floor(mission.currentYear / 25) * 0.1\r\n    };\r\n  }\r\n\r\n  // Get Adaptors Specific Metrics\r\n  private static getAdaptorMetrics(mission: GenerationalMission): AdaptorMetrics {\r\n    const adaptationLevel = mission.resources.adaptationLevel || 0;\r\n    const technology = mission.resources.technology || 0;\r\n\r\n    return {\r\n      enhancementPressure: Math.min(1, (mission.currentYear / mission.estimatedDuration) + (adaptationLevel * 0.5)),\r\n      humanityDrift: adaptationLevel,\r\n      enhancementResistance: Math.max(0, 0.5 - adaptationLevel),\r\n      innovationPotential: Math.min(1, technology / 1000)\r\n    };\r\n  }\r\n\r\n  // Get Wanderers Specific Metrics\r\n  private static getWandererMetrics(mission: GenerationalMission): WandererMetrics {\r\n    // These would be stored as legacy-specific resources in a full implementation\r\n    return {\r\n      resourceScarcity: this.calculateResourceScarcity(mission.resources),\r\n      piracyReputation: 20, // Would be tracked over time\r\n      existentialDread: Math.min(100, mission.currentYear / 10), // Increases with time\r\n      fleetCohesion: Math.max(0, 1 - (mission.currentYear / mission.estimatedDuration * 0.3))\r\n    };\r\n  }\r\n\r\n  // Calculate Resource Scarcity\r\n  private static calculateResourceScarcity(resources: ExtendedResources): number {\r\n    const criticalResources = [\r\n      resources.fuel / 1000,\r\n      resources.food / 1000,\r\n      resources.energy / 2000,\r\n      resources.spareParts / 500\r\n    ];\r\n\r\n    const avgScarcity = criticalResources.reduce((sum, val) => sum + Math.min(1, val), 0) / criticalResources.length;\r\n    return Math.max(0, 1 - avgScarcity);\r\n  }\r\n\r\n  // Apply Legacy-Specific Failure Conditions\r\n  static checkLegacyFailureConditions(mission: GenerationalMission): LegacyFailureCheck {\r\n    switch (mission.legacy) {\r\n      case 'preservers':\r\n        return this.checkPreserversFailure(mission);\r\n      case 'adaptors':\r\n        return this.checkAdaptorsFailure(mission);\r\n      case 'wanderers':\r\n        return this.checkWanderersFailure(mission);\r\n      default:\r\n        return { isAtRisk: false, riskLevel: 0, warnings: [] };\r\n    }\r\n  }\r\n\r\n  // Check Preservers Failure: Cultural Collapse\r\n  private static checkPreserversFailure(mission: GenerationalMission): LegacyFailureCheck {\r\n    const culturalDrift = mission.resources.culturalDrift || 0;\r\n    const unity = mission.resources.unity || 0.5;\r\n    const traditionPoints = 50; // Would be tracked in legacy-specific data\r\n\r\n    const riskFactors = [];\r\n    let riskLevel = 0;\r\n\r\n    if (culturalDrift > 0.7) {\r\n      riskFactors.push('Severe cultural drift from baseline');\r\n      riskLevel += 30;\r\n    }\r\n\r\n    if (unity < 0.3) {\r\n      riskFactors.push('Critical loss of social unity');\r\n      riskLevel += 25;\r\n    }\r\n\r\n    if (traditionPoints < 20) {\r\n      riskFactors.push('Tradition points critically low');\r\n      riskLevel += 35;\r\n    }\r\n\r\n    const isAtRisk = riskLevel > 50;\r\n    const warnings = [];\r\n\r\n    if (riskLevel > 30) {\r\n      warnings.push('Cultural collapse warning: Society losing traditional identity');\r\n    }\r\n    if (riskLevel > 60) {\r\n      warnings.push('CRITICAL: Cultural fragmentation imminent');\r\n    }\r\n\r\n    return { isAtRisk, riskLevel, warnings, failureType: 'cultural_collapse' };\r\n  }\r\n\r\n  // Check Adaptors Failure: Humanity Loss\r\n  private static checkAdaptorsFailure(mission: GenerationalMission): LegacyFailureCheck {\r\n    const adaptationLevel = mission.resources.adaptationLevel || 0;\r\n    const unity = mission.resources.unity || 0.5;\r\n    const bodyHorrorEvents = 2; // Would be tracked\r\n\r\n    const riskFactors = [];\r\n    let riskLevel = 0;\r\n\r\n    if (adaptationLevel > 0.8) {\r\n      riskFactors.push('Extreme divergence from baseline humanity');\r\n      riskLevel += 40;\r\n    }\r\n\r\n    if (bodyHorrorEvents > 3) {\r\n      riskFactors.push('Multiple failed enhancement events');\r\n      riskLevel += 30;\r\n    }\r\n\r\n    if (unity < 0.2) {\r\n      riskFactors.push('Population fragmenting into incompatible subspecies');\r\n      riskLevel += 35;\r\n    }\r\n\r\n    const isAtRisk = riskLevel > 50;\r\n    const warnings = [];\r\n\r\n    if (riskLevel > 30) {\r\n      warnings.push('Humanity loss warning: Population becoming unrecognizably altered');\r\n    }\r\n    if (riskLevel > 60) {\r\n      warnings.push('CRITICAL: Imminent speciation event - civil war likely');\r\n    }\r\n\r\n    return { isAtRisk, riskLevel, warnings, failureType: 'humanity_loss' };\r\n  }\r\n\r\n  // Check Wanderers Failure: Fleet Dissolution\r\n  private static checkWanderersFailure(mission: GenerationalMission): LegacyFailureCheck {\r\n    const fuel = mission.resources.fuel || 0;\r\n    const unity = mission.resources.unity || 0.5;\r\n    const existentialDread = 40; // Would be tracked\r\n    const resourceScarcity = this.calculateResourceScarcity(mission.resources);\r\n\r\n    const riskFactors = [];\r\n    let riskLevel = 0;\r\n\r\n    if (fuel < 200) {\r\n      riskFactors.push('Critical fuel shortage threatens fleet mobility');\r\n      riskLevel += 35;\r\n    }\r\n\r\n    if (resourceScarcity > 0.7) {\r\n      riskFactors.push('Severe resource depletion across all categories');\r\n      riskLevel += 30;\r\n    }\r\n\r\n    if (existentialDread > 70) {\r\n      riskFactors.push('Population losing hope in endless journey');\r\n      riskLevel += 25;\r\n    }\r\n\r\n    if (unity < 0.2) {\r\n      riskFactors.push('Fleet ships operating independently');\r\n      riskLevel += 40;\r\n    }\r\n\r\n    const isAtRisk = riskLevel > 50;\r\n    const warnings = [];\r\n\r\n    if (riskLevel > 30) {\r\n      warnings.push('Fleet dissolution warning: Ships may separate permanently');\r\n    }\r\n    if (riskLevel > 60) {\r\n      warnings.push('CRITICAL: Fleet breakup imminent - ships going rogue');\r\n    }\r\n\r\n    return { isAtRisk, riskLevel, warnings, failureType: 'fleet_dissolution' };\r\n  }\r\n\r\n  // Get Legacy-Specific Event Modifiers\r\n  static getLegacyEventModifiers(legacy: LegacyTypeType, eventCategory: string): number {\r\n    const modifiers: Record<LegacyTypeType, Record<string, number>> = {\r\n      preservers: {\r\n        'cultural': 0.3,\r\n        'tradition': 0.4,\r\n        'stability': 0.2,\r\n        'innovation': -0.2,\r\n        'risk': -0.3\r\n      },\r\n      adaptors: {\r\n        'evolution': 0.4,\r\n        'innovation': 0.3,\r\n        'risk': 0.2,\r\n        'stability': -0.2,\r\n        'tradition': -0.4\r\n      },\r\n      wanderers: {\r\n        'survival': 0.4,\r\n        'resource': 0.3,\r\n        'mobility': 0.3,\r\n        'stability': -0.3,\r\n        'long_term': -0.2\r\n      }\r\n    };\r\n\r\n    return modifiers[legacy][eventCategory] || 0;\r\n  }\r\n}\r\n\r\n// Helper Interfaces\r\ninterface LegacyDilemmaResult {\r\n  resourceChanges: Partial<ExtendedResources>;\r\n  populationEffects: PopulationEffect[];\r\n  longTermConsequences: string[];\r\n  legacySpecificEffects: Record<string, number>;\r\n}\r\n\r\ninterface PreserverMetrics {\r\n  traditionSupport: number;\r\n  adaptationNeed: number;\r\n  culturalStress: number;\r\n  generationGap: number;\r\n}\r\n\r\ninterface AdaptorMetrics {\r\n  enhancementPressure: number;\r\n  humanityDrift: number;\r\n  enhancementResistance: number;\r\n  innovationPotential: number;\r\n}\r\n\r\ninterface WandererMetrics {\r\n  resourceScarcity: number;\r\n  piracyReputation: number;\r\n  existentialDread: number;\r\n  fleetCohesion: number;\r\n}\r\n\r\ninterface LegacyFailureCheck {\r\n  isAtRisk: boolean;\r\n  riskLevel: number;\r\n  warnings: string[];\r\n  failureType?: string;\r\n}","usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\services\\MissionService.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":144,"column":66,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":144,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4515,4518],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4515,4518],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":619,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":619,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[19319,19322],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[19319,19322],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-case-declarations","severity":1,"message":"Unexpected lexical declaration in case block.","line":664,"column":11,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":664,"endColumn":69,"suggestions":[{"messageId":"addBrackets","fix":{"range":[20938,21118],"text":"{ const initialPopulation = mission.ship.populationCapacity; // Approximation\r\n          metric.currentValue = (mission.population.total / initialPopulation) * 100;\r\n          break; }"},"desc":"Add {} brackets around the case block."}]},{"ruleId":"no-case-declarations","severity":1,"message":"Unexpected lexical declaration in case block.","line":674,"column":11,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":678,"endColumn":13,"suggestions":[{"messageId":"addBrackets","fix":{"range":[21360,21614],"text":"{ const resourceHealth = Math.min(\r\n            mission.resources.food / 1000,\r\n            mission.resources.energy / 2000,\r\n            mission.resources.hullIntegrity\r\n          );\r\n          metric.currentValue = resourceHealth * 100;\r\n          break; }"},"desc":"Add {} brackets around the case block."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// services/MissionService.ts\r\nimport type {\r\n  GenerationalMission,\r\n  PopulationCohort,\r\n  ExtendedResources,\r\n  GenerationalShip,\r\n  Population,\r\n  SuccessMetric,\r\n  FailureRisk,\r\n  Milestone\r\n} from '../types/generationalMissions';\r\nimport type {\r\n  LegacyTypeType,\r\n  MissionObjectiveType,\r\n  ShipClassType,\r\n  ShipSizeType,\r\n  CohortTypeType\r\n} from '../types/enums';\r\nimport { DynastyService } from './DynastyService';\r\nimport { AutomationService } from './AutomationService';\r\nimport { EventService } from './EventService';\r\nimport { LegacyService } from './LegacyService';\r\nimport Logger from '../utils/logger';\r\n\r\nexport class MissionService {\r\n  // Create New Generational Mission\r\n  static createMission(config: MissionCreationConfig): GenerationalMission {\r\n    const ship = this.createGenerationalShip(config);\r\n    const population = this.createMissionPopulation(config);\r\n    const resources = this.createInitialResources(config);\r\n    const automationConfig = AutomationService.createDefaultAutomationConfig(config.legacy);\r\n\r\n    // Assign council positions\r\n    automationConfig.councilMembers = AutomationService.assignCouncilPositions(\r\n      population.dynasties,\r\n      automationConfig\r\n    );\r\n\r\n    const mission: GenerationalMission = {\r\n      id: `mission_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\r\n      name: config.name,\r\n      legacy: config.legacy,\r\n\r\n      // Mission Parameters\r\n      objective: config.objective,\r\n      targetSystemId: config.targetSystemId,\r\n      estimatedDuration: config.estimatedDuration,\r\n      currentYear: 0,\r\n\r\n      // Ship and Population\r\n      ship,\r\n      population,\r\n\r\n      // Resources and Production\r\n      resources,\r\n      productionRates: this.calculateInitialProduction(population),\r\n\r\n      // Mission Progress\r\n      currentPhase: 'preparation',\r\n      phaseProgress: 0,\r\n      milestones: this.createMissionMilestones(config),\r\n\r\n      // Events and History\r\n      activeEvents: [],\r\n      eventHistory: [],\r\n\r\n      // Automation\r\n      automationConfig,\r\n      lastPlayerInteraction: Date.now(),\r\n\r\n      // Success/Failure Tracking\r\n      successMetrics: this.createSuccessMetrics(config),\r\n      failureRisks: this.createFailureRisks(config),\r\n\r\n      // Victory Conditions\r\n      isCompleted: false,\r\n      successLevel: null,\r\n      finalRewards: {}\r\n    };\r\n\r\n    Logger.info(`Created generational mission: ${mission.name}`, {\r\n      legacy: mission.legacy,\r\n      objective: mission.objective,\r\n      population: mission.population.total\r\n    });\r\n\r\n    return mission;\r\n  }\r\n\r\n  // Create Generational Ship\r\n  private static createGenerationalShip(config: MissionCreationConfig): GenerationalShip {\r\n    return {\r\n      id: `ship_${Date.now()}`,\r\n      name: config.shipName || this.generateShipName(config.legacy),\r\n      class: config.shipClass,\r\n      size: config.shipSize,\r\n      populationCapacity: this.calculatePopulationCapacity(config.shipSize),\r\n      currentPopulation: config.populationSize,\r\n      hullIntegrity: 1.0,\r\n      systemsEfficiency: 0.9,\r\n      legacyModifications: this.getLegacyModifications(config.legacy),\r\n      aiSystems: this.getAISystems(config.legacy),\r\n      automationLevel: 0.8\r\n    };\r\n  }\r\n\r\n  // Generate Ship Name\r\n  private static generateShipName(legacy: LegacyTypeType): string {\r\n    const names = {\r\n      preservers: [\r\n        'Heritage', 'Legacy', 'Tradition', 'Foundation', 'Covenant',\r\n        'Monument', 'Memorial', 'Archive', 'Chronicle', 'Testament'\r\n      ],\r\n      adaptors: [\r\n        'Evolution', 'Synthesis', 'Metamorphosis', 'Genesis', 'Prototype',\r\n        'Mutation', 'Adaptation', 'Catalyst', 'Transformation', 'Emergence'\r\n      ],\r\n      wanderers: [\r\n        'Nomad', 'Drifter', 'Pathfinder', 'Voyager', 'Wanderer',\r\n        'Pioneer', 'Explorer', 'Vagrant', 'Roamer', 'Odyssey'\r\n      ]\r\n    };\r\n\r\n    const legacyNames = names[legacy];\r\n    const prefix = ['GSV', 'SSV', 'CSV'][Math.floor(Math.random() * 3)]; // Generational/Seed/Colony Ship Vessel\r\n    const name = legacyNames[Math.floor(Math.random() * legacyNames.length)];\r\n\r\n    return `${prefix} ${name}`;\r\n  }\r\n\r\n  // Calculate Population Capacity\r\n  private static calculatePopulationCapacity(size: ShipSizeType): number {\r\n    const capacities = {\r\n      medium: 15000,\r\n      large: 30000,\r\n      massive: 50000,\r\n      gigantic: 80000\r\n    };\r\n\r\n    return capacities[size];\r\n  }\r\n\r\n  // Get Legacy Modifications\r\n  private static getLegacyModifications(legacy: LegacyTypeType): any[] {\r\n    // Would return actual SectModification objects in full implementation\r\n    const modifications = {\r\n      preservers: ['Cultural Preservation Protocols', 'Traditional Life Support', 'Heritage Archives'],\r\n      adaptors: ['Biological Integration Systems', 'Genetic Modification Labs', 'Adaptive Life Support'],\r\n      wanderers: ['Modular Fleet Configuration', 'Extended Range Systems', 'Resource Conservation Protocols']\r\n    };\r\n\r\n    return modifications[legacy].map((name, index) => ({\r\n      id: `mod_${legacy}_${index}`,\r\n      name,\r\n      legacy,\r\n      description: `${legacy}-specific modification: ${name}`,\r\n      effects: {},\r\n      unlockRequirements: []\r\n    }));\r\n  }\r\n\r\n  // Get AI Systems\r\n  private static getAISystems(legacy: LegacyTypeType): string[] {\r\n    const systems = {\r\n      preservers: ['Cultural Archive AI', 'Tradition Compliance Monitor', 'Heritage Preservation System'],\r\n      adaptors: ['Evolution Guidance AI', 'Adaptation Controller', 'Enhancement Risk Assessor'],\r\n      wanderers: ['Navigation Coordinator', 'Resource Optimizer', 'Fleet Cohesion Monitor']\r\n    };\r\n\r\n    return systems[legacy];\r\n  }\r\n\r\n  // Create Mission Population\r\n  private static createMissionPopulation(config: MissionCreationConfig): Population {\r\n    const dynasties = DynastyService.generateInitialDynasties(config.legacy, config.populationSize);\r\n    const cohorts = this.createPopulationCohorts(config.populationSize, config.legacy);\r\n\r\n    // Apply dynasty effects to cohorts\r\n    const enhancedCohorts = DynastyService.assignDynasTiesToCohorts(dynasties, cohorts);\r\n\r\n    return {\r\n      total: config.populationSize,\r\n      cohorts: enhancedCohorts,\r\n      dynasties,\r\n\r\n      // Social Metrics\r\n      morale: 0.7,\r\n      unity: 0.8,\r\n      stability: 0.75,\r\n\r\n      // Legacy-Specific Metrics\r\n      legacyLoyalty: 0.9,\r\n      adaptationLevel: config.legacy === 'adaptors' ? 0.2 : 0.05,\r\n      culturalDrift: 0.1,\r\n\r\n      // Demographics\r\n      birthRate: 0.02,\r\n      deathRate: 0.015,\r\n      avgAge: 35\r\n    };\r\n  }\r\n\r\n  // Create Population Cohorts\r\n  private static createPopulationCohorts(populationSize: number, legacy: LegacyTypeType): PopulationCohort[] {\r\n    const distributions = {\r\n      preservers: {\r\n        engineers: 0.15,\r\n        farmers: 0.25,\r\n        scholars: 0.20,\r\n        security: 0.10,\r\n        leaders: 0.05,\r\n        general: 0.25\r\n      },\r\n      adaptors: {\r\n        engineers: 0.20,\r\n        farmers: 0.15,\r\n        scholars: 0.25,\r\n        security: 0.08,\r\n        leaders: 0.07,\r\n        general: 0.25\r\n      },\r\n      wanderers: {\r\n        engineers: 0.18,\r\n        farmers: 0.12,\r\n        scholars: 0.15,\r\n        security: 0.15,\r\n        leaders: 0.08,\r\n        general: 0.32\r\n      }\r\n    };\r\n\r\n    const distribution = distributions[legacy];\r\n    const cohorts: PopulationCohort[] = [];\r\n\r\n    Object.entries(distribution).forEach(([type, percentage]) => {\r\n      cohorts.push({\r\n        type: type as CohortTypeType,\r\n        count: Math.floor(populationSize * percentage),\r\n        effectiveness: 0.7 + Math.random() * 0.2, // 0.7-0.9\r\n        generation: 1,\r\n        specialTraits: [],\r\n        morale: 70 + Math.random() * 20 // 70-90\r\n      });\r\n    });\r\n\r\n    return cohorts;\r\n  }\r\n\r\n  // Create Initial Resources\r\n  private static createInitialResources(config: MissionCreationConfig): ExtendedResources {\r\n    const baseResources = {\r\n      credits: 50000,\r\n      energy: 10000,\r\n      minerals: 5000,\r\n      food: 8000,\r\n      influence: 1000\r\n    };\r\n\r\n    // Scale by population size\r\n    const scaleFactor = config.populationSize / 20000;\r\n\r\n    return {\r\n      // Basic Resources\r\n      credits: Math.floor(baseResources.credits * scaleFactor),\r\n      energy: Math.floor(baseResources.energy * scaleFactor),\r\n      minerals: Math.floor(baseResources.minerals * scaleFactor),\r\n      food: Math.floor(baseResources.food * scaleFactor),\r\n      influence: Math.floor(baseResources.influence * scaleFactor),\r\n\r\n      // Generational Mission Resources\r\n      population: config.populationSize,\r\n      morale: 0.7,\r\n      unity: 0.8,\r\n      knowledge: 1000,\r\n      technology: 500,\r\n\r\n      // Ship Resources\r\n      hullIntegrity: 1.0,\r\n      lifeSupport: 1.0,\r\n      fuel: 5000,\r\n      spareParts: 1000,\r\n\r\n      // Mission-Specific\r\n      missionProgress: 0,\r\n      extractedResources: 0,\r\n      researchData: 0,\r\n      geneticSamples: 0,\r\n\r\n      // Legacy-Specific\r\n      culturalDrift: 0.1,\r\n      adaptationLevel: config.legacy === 'adaptors' ? 0.2 : 0.05\r\n    };\r\n  }\r\n\r\n  // Calculate Initial Production Rates\r\n  private static calculateInitialProduction(\r\n    population: Population\r\n  ): Partial<ExtendedResources> {\r\n    const farmerCount = population.cohorts.find(c => c.type === 'farmers')?.count || 0;\r\n    const engineerCount = population.cohorts.find(c => c.type === 'engineers')?.count || 0;\r\n    const scholarCount = population.cohorts.find(c => c.type === 'scholars')?.count || 0;\r\n\r\n    return {\r\n      food: Math.floor(farmerCount * 0.5),\r\n      energy: Math.floor(engineerCount * 0.3),\r\n      knowledge: Math.floor(scholarCount * 0.2),\r\n      spareParts: Math.floor(engineerCount * 0.1),\r\n      credits: Math.floor(population.total * 0.01) // Base economic activity\r\n    };\r\n  }\r\n\r\n  // Create Mission Milestones\r\n  private static createMissionMilestones(config: MissionCreationConfig): Milestone[] {\r\n    const milestones: Milestone[] = [\r\n      {\r\n        id: 'launch',\r\n        name: 'Mission Launch',\r\n        description: 'Successfully depart from home system',\r\n        phase: 'preparation',\r\n        isCompleted: false,\r\n        completedAt: null,\r\n        rewards: { morale: 0.1, unity: 0.05 }\r\n      },\r\n      {\r\n        id: 'deep_space',\r\n        name: 'Deep Space Navigation',\r\n        description: 'Successfully navigate to deep space',\r\n        phase: 'travel',\r\n        isCompleted: false,\r\n        completedAt: null,\r\n        rewards: { knowledge: 200, technology: 100 }\r\n      }\r\n    ];\r\n\r\n    // Add objective-specific milestones\r\n    switch (config.objective) {\r\n      case 'colonization':\r\n        milestones.push(\r\n          {\r\n            id: 'planet_survey',\r\n            name: 'Planet Survey',\r\n            description: 'Complete detailed survey of target planet',\r\n            phase: 'operation',\r\n            isCompleted: false,\r\n            completedAt: null,\r\n            rewards: { researchData: 1000, knowledge: 500 }\r\n          },\r\n          {\r\n            id: 'colony_established',\r\n            name: 'Colony Established',\r\n            description: 'Successfully establish self-sustaining colony',\r\n            phase: 'operation',\r\n            isCompleted: false,\r\n            completedAt: null,\r\n            rewards: { influence: 2000, credits: 50000 }\r\n          }\r\n        );\r\n        break;\r\n\r\n      case 'mining':\r\n        milestones.push(\r\n          {\r\n            id: 'mining_setup',\r\n            name: 'Mining Operations Setup',\r\n            description: 'Establish mining infrastructure',\r\n            phase: 'operation',\r\n            isCompleted: false,\r\n            completedAt: null,\r\n            rewards: { extractedResources: 5000, minerals: 2000 }\r\n          },\r\n          {\r\n            id: 'resource_quota',\r\n            name: 'Resource Quota Met',\r\n            description: 'Extract target amount of resources',\r\n            phase: 'operation',\r\n            isCompleted: false,\r\n            completedAt: null,\r\n            rewards: { extractedResources: 20000, credits: 100000 }\r\n          }\r\n        );\r\n        break;\r\n\r\n      case 'exploration':\r\n        milestones.push(\r\n          {\r\n            id: 'system_mapping',\r\n            name: 'System Mapping',\r\n            description: 'Complete comprehensive system survey',\r\n            phase: 'operation',\r\n            isCompleted: false,\r\n            completedAt: null,\r\n            rewards: { researchData: 2000, knowledge: 1000 }\r\n          },\r\n          {\r\n            id: 'discovery_made',\r\n            name: 'Major Discovery',\r\n            description: 'Make significant scientific discovery',\r\n            phase: 'operation',\r\n            isCompleted: false,\r\n            completedAt: null,\r\n            rewards: { technology: 1000, influence: 1500 }\r\n          }\r\n        );\r\n        break;\r\n    }\r\n\r\n    return milestones;\r\n  }\r\n\r\n  // Create Success Metrics\r\n  private static createSuccessMetrics(config: MissionCreationConfig): SuccessMetric[] {\r\n    const baseMetrics: SuccessMetric[] = [\r\n      {\r\n        id: 'population_survival',\r\n        name: 'Population Survival',\r\n        currentValue: 100,\r\n        targetValue: 90, // 90% survival rate\r\n        weight: 0.4\r\n      },\r\n      {\r\n        id: 'mission_completion',\r\n        name: 'Mission Objective Completion',\r\n        currentValue: 0,\r\n        targetValue: 100,\r\n        weight: 0.3\r\n      },\r\n      {\r\n        id: 'resource_efficiency',\r\n        name: 'Resource Management',\r\n        currentValue: 100,\r\n        targetValue: 80, // Maintain 80% of starting resources\r\n        weight: 0.2\r\n      },\r\n      {\r\n        id: 'social_cohesion',\r\n        name: 'Social Unity',\r\n        currentValue: 80,\r\n        targetValue: 60, // Maintain social unity above 60%\r\n        weight: 0.1\r\n      }\r\n    ];\r\n\r\n    // Add objective-specific metrics\r\n    switch (config.objective) {\r\n      case 'colonization':\r\n        baseMetrics.push({\r\n          id: 'colony_sustainability',\r\n          name: 'Colony Self-Sufficiency',\r\n          currentValue: 0,\r\n          targetValue: 100,\r\n          weight: 0.25\r\n        });\r\n        break;\r\n\r\n      case 'mining':\r\n        baseMetrics.push({\r\n          id: 'extraction_quota',\r\n          name: 'Resource Extraction Target',\r\n          currentValue: 0,\r\n          targetValue: 100,\r\n          weight: 0.25\r\n        });\r\n        break;\r\n\r\n      case 'exploration':\r\n        baseMetrics.push({\r\n          id: 'discovery_value',\r\n          name: 'Scientific Discovery Value',\r\n          currentValue: 0,\r\n          targetValue: 100,\r\n          weight: 0.25\r\n        });\r\n        break;\r\n    }\r\n\r\n    return baseMetrics;\r\n  }\r\n\r\n  // Create Failure Risks\r\n  private static createFailureRisks(config: MissionCreationConfig): FailureRisk[] {\r\n    const risks: FailureRisk[] = [\r\n      {\r\n        id: 'system_cascade_failure',\r\n        name: 'System Cascade Failure',\r\n        probability: 0.05,\r\n        severity: 0.9,\r\n        mitigation: ['Regular maintenance', 'Redundant systems', 'Emergency protocols'],\r\n        isActive: true\r\n      },\r\n      {\r\n        id: 'population_unrest',\r\n        name: 'Social Uprising',\r\n        probability: 0.15,\r\n        severity: 0.6,\r\n        mitigation: ['Maintain morale', 'Fair resource distribution', 'Cultural programs'],\r\n        isActive: true\r\n      },\r\n      {\r\n        id: 'resource_depletion',\r\n        name: 'Critical Resource Shortage',\r\n        probability: 0.2,\r\n        severity: 0.7,\r\n        mitigation: ['Resource monitoring', 'Recycling systems', 'Emergency reserves'],\r\n        isActive: true\r\n      }\r\n    ];\r\n\r\n    // Add legacy-specific risks\r\n    switch (config.legacy) {\r\n      case 'preservers':\r\n        risks.push({\r\n          id: 'cultural_collapse',\r\n          name: 'Cultural Identity Loss',\r\n          probability: 0.1,\r\n          severity: 0.8,\r\n          mitigation: ['Cultural education', 'Tradition maintenance', 'Elder councils'],\r\n          isActive: true\r\n        });\r\n        break;\r\n\r\n      case 'adaptors':\r\n        risks.push({\r\n          id: 'enhancement_catastrophe',\r\n          name: 'Enhancement Failure Cascade',\r\n          probability: 0.25,\r\n          severity: 0.7,\r\n          mitigation: ['Careful testing', 'Medical monitoring', 'Reversal protocols'],\r\n          isActive: true\r\n        });\r\n        break;\r\n\r\n      case 'wanderers':\r\n        risks.push({\r\n          id: 'fleet_dissolution',\r\n          name: 'Fleet Separation',\r\n          probability: 0.3,\r\n          severity: 0.9,\r\n          mitigation: ['Communication systems', 'Unity programs', 'Resource sharing'],\r\n          isActive: true\r\n        });\r\n        break;\r\n    }\r\n\r\n    return risks;\r\n  }\r\n\r\n  // Process Mission Turn (Time Advancement)\r\n  static processMissionTurn(mission: GenerationalMission, yearsElapsed: number = 1): MissionUpdateResult {\r\n    const updates: string[] = [];\r\n\r\n    // Advance mission time\r\n    mission.currentYear += yearsElapsed;\r\n\r\n    // Process resource generation\r\n    this.processResourceGeneration(mission, yearsElapsed, updates);\r\n\r\n    // Process population changes\r\n    this.processPopulationChanges(mission, yearsElapsed, updates);\r\n\r\n    // Process automation decisions\r\n    const aiDecisions = AutomationService.processAutomatedDecisions(mission, yearsElapsed);\r\n    updates.push(...aiDecisions.map(d => `AI Decision: ${d.decision}`));\r\n\r\n    // Generate events\r\n    const eventChance = 0.3 + (yearsElapsed * 0.1); // Higher chance for longer time periods\r\n    if (Math.random() < eventChance) {\r\n      const event = EventService.generateEvent(mission);\r\n      if (event) {\r\n        mission.activeEvents.push(event);\r\n        updates.push(`New Event: ${event.title}`);\r\n\r\n        // Auto-resolve if not requiring player decision\r\n        if (!event.requiresPlayerDecision && event.autoResolutionDelay <= 0) {\r\n          const resolution = EventService.resolveEventAutomatically(event, mission);\r\n          if (resolution.success) {\r\n            updates.push(`Auto-resolved: ${event.title}`);\r\n            mission.eventHistory.push(event);\r\n            mission.activeEvents = mission.activeEvents.filter(e => e.id !== event.id);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // Check legacy-specific failure conditions\r\n    const failureCheck = LegacyService.checkLegacyFailureConditions(mission);\r\n    if (failureCheck.isAtRisk) {\r\n      updates.push(...failureCheck.warnings);\r\n    }\r\n\r\n    // Update success metrics\r\n    this.updateSuccessMetrics(mission);\r\n\r\n    // Check mission completion\r\n    this.checkMissionCompletion(mission, updates);\r\n\r\n    Logger.info(`Processed mission turn for ${mission.name}`, {\r\n      yearsElapsed,\r\n      currentYear: mission.currentYear,\r\n      updates: updates.length\r\n    });\r\n\r\n    return {\r\n      mission,\r\n      updates,\r\n      requiresPlayerAttention: mission.activeEvents.some(e => e.requiresPlayerDecision) || failureCheck.isAtRisk\r\n    };\r\n  }\r\n\r\n  // Process Resource Generation\r\n  private static processResourceGeneration(\r\n    mission: GenerationalMission,\r\n    yearsElapsed: number,\r\n    updates: string[]\r\n  ): void {\r\n    Object.entries(mission.productionRates).forEach(([resource, rate]) => {\r\n      if (rate !== undefined) {\r\n        const generated = Math.floor(rate * yearsElapsed);\r\n        if (generated > 0) {\r\n          (mission.resources as any)[resource] += generated;\r\n          updates.push(`Generated ${generated} ${resource}`);\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  // Process Population Changes\r\n  private static processPopulationChanges(\r\n    mission: GenerationalMission,\r\n    yearsElapsed: number,\r\n    updates: string[]\r\n  ): void {\r\n    const population = mission.population;\r\n\r\n    // Natural population change\r\n    const birthsPerYear = population.total * population.birthRate;\r\n    const deathsPerYear = population.total * population.deathRate;\r\n    const netChangePerYear = birthsPerYear - deathsPerYear;\r\n    const totalChange = Math.floor(netChangePerYear * yearsElapsed);\r\n\r\n    if (totalChange !== 0) {\r\n      population.total = Math.max(0, population.total + totalChange);\r\n      mission.resources.population = population.total;\r\n      updates.push(`Population ${totalChange > 0 ? 'grew' : 'declined'} by ${Math.abs(totalChange)}`);\r\n    }\r\n\r\n    // Age dynasties\r\n    if (yearsElapsed >= 25) {\r\n      const generationsAdvanced = Math.floor(yearsElapsed / 25);\r\n      for (let i = 0; i < generationsAdvanced; i++) {\r\n        population.dynasties = population.dynasties.map(dynasty =>\r\n          DynastyService.advanceGeneration(dynasty)\r\n        );\r\n      }\r\n      updates.push(`Advanced ${generationsAdvanced} generation(s)`);\r\n    }\r\n  }\r\n\r\n  // Update Success Metrics\r\n  private static updateSuccessMetrics(mission: GenerationalMission): void {\r\n    mission.successMetrics.forEach(metric => {\r\n      switch (metric.id) {\r\n        case 'population_survival':\r\n          // Calculate survival rate based on starting population\r\n          const initialPopulation = mission.ship.populationCapacity; // Approximation\r\n          metric.currentValue = (mission.population.total / initialPopulation) * 100;\r\n          break;\r\n\r\n        case 'mission_completion':\r\n          metric.currentValue = mission.phaseProgress;\r\n          break;\r\n\r\n        case 'resource_efficiency':\r\n          // Simple approximation - would be more sophisticated in production\r\n          const resourceHealth = Math.min(\r\n            mission.resources.food / 1000,\r\n            mission.resources.energy / 2000,\r\n            mission.resources.hullIntegrity\r\n          );\r\n          metric.currentValue = resourceHealth * 100;\r\n          break;\r\n\r\n        case 'social_cohesion':\r\n          metric.currentValue = mission.resources.unity * 100;\r\n          break;\r\n      }\r\n    });\r\n  }\r\n\r\n  // Check Mission Completion\r\n  private static checkMissionCompletion(mission: GenerationalMission, updates: string[]): void {\r\n    if (mission.isCompleted) return;\r\n\r\n    // Check if mission duration exceeded\r\n    if (mission.currentYear >= mission.estimatedDuration) {\r\n      const successScore = this.calculateOverallSuccessScore(mission);\r\n      mission.isCompleted = true;\r\n\r\n      if (successScore >= 0.9) {\r\n        mission.successLevel = 'complete';\r\n      } else if (successScore >= 0.7) {\r\n        mission.successLevel = 'partial';\r\n      } else if (successScore >= 0.4) {\r\n        mission.successLevel = 'pyrrhic';\r\n      } else {\r\n        mission.successLevel = 'failure';\r\n      }\r\n\r\n      updates.push(`Mission completed with ${mission.successLevel} success`);\r\n    }\r\n  }\r\n\r\n  // Calculate Overall Success Score\r\n  private static calculateOverallSuccessScore(mission: GenerationalMission): number {\r\n    return mission.successMetrics.reduce((totalScore, metric) => {\r\n      const achievement = Math.min(1, metric.currentValue / metric.targetValue);\r\n      return totalScore + (achievement * metric.weight);\r\n    }, 0);\r\n  }\r\n}\r\n\r\n// Helper Interfaces\r\ninterface MissionCreationConfig {\r\n  name: string;\r\n  legacy: LegacyTypeType;\r\n  objective: MissionObjectiveType;\r\n  targetSystemId: string;\r\n  estimatedDuration: number; // years\r\n  shipName?: string;\r\n  shipClass: ShipClassType;\r\n  shipSize: ShipSizeType;\r\n  populationSize: number;\r\n}\r\n\r\ninterface MissionUpdateResult {\r\n  mission: GenerationalMission;\r\n  updates: string[];\r\n  requiresPlayerAttention: boolean;\r\n}","usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\services\\NotificationManager.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\services\\PacingService.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'TimeControlState' is defined but never used.","line":10,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'NarrativeFlow' is defined but never used.","line":14,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":14,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AccelerationLimits' is defined but never used.","line":16,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":16,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'PauseReason' is defined but never used.","line":17,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":17,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ResumeCondition' is defined but never used.","line":18,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":18,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ChronicleEntry' is defined but never used.","line":22,"column":26,"nodeType":null,"messageId":"unusedVar","endLine":22,"endColumn":40},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":301,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":301,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9394,9397],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9394,9397],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'progress' is assigned a value but never used.","line":423,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":423,"endColumn":19},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":595,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":595,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[18296,18299],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[18296,18299],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'preferences' is defined but never used.","line":601,"column":41,"nodeType":null,"messageId":"unusedVar","endLine":601,"endColumn":52},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'mission' is defined but never used.","line":642,"column":42,"nodeType":null,"messageId":"unusedVar","endLine":642,"endColumn":49},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'phase' is defined but never used.","line":642,"column":72,"nodeType":null,"messageId":"unusedVar","endLine":642,"endColumn":77},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'mission' is defined but never used.","line":647,"column":56,"nodeType":null,"messageId":"unusedVar","endLine":647,"endColumn":63},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'chronicle' is defined but never used.","line":647,"column":86,"nodeType":null,"messageId":"unusedVar","endLine":647,"endColumn":95},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":652,"column":80,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":652,"endColumn":83,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[20122,20125],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[20122,20125],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":662,"column":71,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":662,"endColumn":74,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[20632,20635],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[20632,20635],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'analysis' is defined but never used.","line":672,"column":69,"nodeType":null,"messageId":"unusedVar","endLine":672,"endColumn":77},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":672,"column":79,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":672,"endColumn":82,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[20926,20929],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[20926,20929],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'mission' is defined but never used.","line":679,"column":48,"nodeType":null,"messageId":"unusedVar","endLine":679,"endColumn":55},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'pacingState' is defined but never used.","line":679,"column":78,"nodeType":null,"messageId":"unusedVar","endLine":679,"endColumn":89},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'mission' is defined but never used.","line":683,"column":47,"nodeType":null,"messageId":"unusedVar","endLine":683,"endColumn":54},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'pacingState' is defined but never used.","line":683,"column":77,"nodeType":null,"messageId":"unusedVar","endLine":683,"endColumn":88},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'mission' is defined but never used.","line":687,"column":51,"nodeType":null,"messageId":"unusedVar","endLine":687,"endColumn":58},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'pacingState' is defined but never used.","line":687,"column":81,"nodeType":null,"messageId":"unusedVar","endLine":687,"endColumn":92},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'mission' is defined but never used.","line":691,"column":49,"nodeType":null,"messageId":"unusedVar","endLine":691,"endColumn":56},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'pacingState' is defined but never used.","line":691,"column":79,"nodeType":null,"messageId":"unusedVar","endLine":691,"endColumn":90},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'currentPhase' is defined but never used.","line":695,"column":47,"nodeType":null,"messageId":"unusedVar","endLine":695,"endColumn":59},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'transition' is defined but never used.","line":701,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":701,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'mission' is defined but never used.","line":702,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":702,"endColumn":12},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'pacingState' is defined but never used.","line":703,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":703,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'condition' is defined but never used.","line":733,"column":46,"nodeType":null,"messageId":"unusedVar","endLine":733,"endColumn":55},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":733,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":733,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[22798,22801],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[22798,22801],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'event' is defined but never used.","line":733,"column":62,"nodeType":null,"messageId":"unusedVar","endLine":733,"endColumn":67},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":733,"column":69,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":733,"endColumn":72,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[22810,22813],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[22810,22813],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'pacingState' is defined but never used.","line":733,"column":74,"nodeType":null,"messageId":"unusedVar","endLine":733,"endColumn":85},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'interactions' is defined but never used.","line":760,"column":44,"nodeType":null,"messageId":"unusedVar","endLine":760,"endColumn":56},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'pacingState' is defined but never used.","line":760,"column":78,"nodeType":null,"messageId":"unusedVar","endLine":760,"endColumn":89},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":760,"column":105,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":760,"endColumn":108,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[23880,23883],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[23880,23883],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'interactions' is defined but never used.","line":765,"column":48,"nodeType":null,"messageId":"unusedVar","endLine":765,"endColumn":60},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'pacingState' is defined but never used.","line":765,"column":82,"nodeType":null,"messageId":"unusedVar","endLine":765,"endColumn":93},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":765,"column":109,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":765,"endColumn":112,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[24061,24064],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[24061,24064],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'level' is defined but never used.","line":770,"column":52,"nodeType":null,"messageId":"unusedVar","endLine":770,"endColumn":57},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'trend' is defined but never used.","line":770,"column":76,"nodeType":null,"messageId":"unusedVar","endLine":770,"endColumn":81},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'factors' is defined but never used.","line":770,"column":91,"nodeType":null,"messageId":"unusedVar","endLine":770,"endColumn":98},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":770,"column":100,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":770,"endColumn":103,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[24240,24243],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[24240,24243],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":770,"column":108,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":770,"endColumn":111,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[24248,24251],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[24248,24251],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":46,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// services/PacingService.ts\nimport type {\n  PacingState,\n  GamePhase,\n  PlannedMilestone,\n  EmergentEvent,\n  InteractionEvent,\n  PhaseTransition,\n  PacingPreferences,\n  TimeControlState,\n  EngagementAnalysis,\n  EngagementLevel,\n  AutomationPolicy,\n  NarrativeFlow,\n  PacingMetrics,\n  AccelerationLimits,\n  PauseReason,\n  ResumeCondition,\n  AdaptiveSettings\n} from '../types/pacing';\nimport type { GenerationalMission } from '../types/generationalMissions';\nimport type { Chronicle, ChronicleEntry } from '../types/chronicle';\nimport Logger from '../utils/logger';\n\nexport class PacingService {\n  private static readonly PACING_STORAGE_KEY = 'stellar-legacy-pacing-state';\n  private static readonly DEFAULT_ACCELERATION = 1.0;\n  private static readonly MAX_ACCELERATION = 10.0;\n  private static readonly MIN_ACCELERATION = 0.1;\n\n  /**\n   * Calculate optimal pacing configuration for a mission\n   */\n  static calculateOptimalPacing(\n    mission: GenerationalMission,\n    preferences: PacingPreferences,\n    chronicle?: Chronicle\n  ): PacingState {\n    try {\n      const currentPhase = this.determineGamePhase(mission);\n      const engagementScore = this.calculateEngagementScore(mission);\n\n      const pacingState: PacingState = {\n        currentPhase,\n        phaseProgress: this.calculatePhaseProgress(mission, currentPhase),\n        phaseStartYear: this.calculatePhaseStartYear(mission, currentPhase),\n\n        // Timing Control\n        timeAcceleration: this.calculateOptimalAcceleration(mission, preferences, engagementScore),\n        eventDensity: this.calculateEventDensity(mission, currentPhase, preferences),\n        interactionDensity: this.calculateInteractionDensity(preferences, engagementScore),\n\n        // Player Engagement\n        lastPlayerInteraction: Date.now(),\n        interactionHistory: [],\n        engagementScore,\n        automationLevel: this.calculateAutomationLevel(preferences, engagementScore),\n\n        // Narrative Flow\n        tensionLevel: this.calculateNarrativeTension(mission, currentPhase),\n        nextMilestone: this.scheduleNextMilestone(mission, currentPhase, chronicle),\n        emergentEventQueue: [],\n\n        // Adaptive Elements\n        playerPreferences: preferences,\n        adaptiveSettings: this.createAdaptiveSettings(preferences),\n        pacingMetrics: this.initializePacingMetrics()\n      };\n\n      Logger.info('Optimal pacing calculated', {\n        missionId: mission.id,\n        phase: currentPhase,\n        acceleration: pacingState.timeAcceleration,\n        engagementScore\n      });\n\n      return pacingState;\n    } catch (error) {\n      Logger.error('Failed to calculate optimal pacing', error);\n      return this.createDefaultPacingState(preferences);\n    }\n  }\n\n  /**\n   * Schedule the next major milestone for the mission\n   */\n  static scheduleNextMilestone(\n    mission: GenerationalMission,\n    currentPhase: GamePhase,\n    chronicle?: Chronicle\n  ): PlannedMilestone | null {\n    try {\n      const milestones = this.generatePhaseMilestones(mission, currentPhase);\n\n      // Add chronicle-influenced milestones\n      if (chronicle) {\n        const chronicleMilestones = this.generateChronicleInfluencedMilestones(mission, chronicle);\n        milestones.push(...chronicleMilestones);\n      }\n\n      // Sort by priority and scheduled year\n      milestones.sort((a, b) => {\n        const priorityDiff = b.priority - a.priority;\n        if (priorityDiff !== 0) return priorityDiff;\n        return a.scheduledYear - b.scheduledYear;\n      });\n\n      const nextMilestone = milestones.find(m => m.scheduledYear > mission.currentYear);\n\n      if (nextMilestone) {\n        Logger.info('Next milestone scheduled', {\n          missionId: mission.id,\n          milestoneId: nextMilestone.id,\n          scheduledYear: nextMilestone.scheduledYear\n        });\n      }\n\n      return nextMilestone || null;\n    } catch (error) {\n      Logger.error('Failed to schedule milestone', error);\n      return null;\n    }\n  }\n\n  /**\n   * Adapt pacing based on player behavior patterns\n   */\n  static adaptToPlayerBehavior(\n    currentState: PacingState,\n    recentInteractions: InteractionEvent[]\n  ): PacingState {\n    try {\n      const adaptedState = { ...currentState };\n\n      // Analyze interaction patterns\n      const analysis = this.analyzeInteractionPatterns(recentInteractions);\n\n      // Adjust time acceleration based on engagement\n      if (analysis.averageEngagement < 0.3) {\n        adaptedState.timeAcceleration = Math.min(\n          adaptedState.timeAcceleration * 1.5,\n          this.MAX_ACCELERATION\n        );\n      } else if (analysis.averageEngagement > 0.8) {\n        adaptedState.timeAcceleration = Math.max(\n          adaptedState.timeAcceleration * 0.8,\n          this.MIN_ACCELERATION\n        );\n      }\n\n      // Adjust event density\n      if (analysis.crisisOverload) {\n        adaptedState.eventDensity *= 0.7;\n      } else if (analysis.boredom) {\n        adaptedState.eventDensity *= 1.3;\n      }\n\n      // Update automation level\n      adaptedState.automationLevel = this.adaptAutomationLevel(\n        adaptedState.automationLevel,\n        analysis\n      );\n\n      // Update adaptive settings\n      adaptedState.adaptiveSettings = this.updateAdaptiveSettings(\n        adaptedState.adaptiveSettings,\n        analysis\n      );\n\n      Logger.info('Pacing adapted to player behavior', {\n        newAcceleration: adaptedState.timeAcceleration,\n        newEventDensity: adaptedState.eventDensity,\n        newAutomationLevel: adaptedState.automationLevel\n      });\n\n      return adaptedState;\n    } catch (error) {\n      Logger.error('Failed to adapt pacing to player behavior', error);\n      return currentState;\n    }\n  }\n\n  /**\n   * Generate emergent events based on current game state\n   */\n  static generateEmergentEvents(\n    mission: GenerationalMission,\n    pacingState: PacingState\n  ): EmergentEvent[] {\n    try {\n      const events: EmergentEvent[] = [];\n\n      // Dynasty-based emergent events\n      const dynastyEvents = this.generateDynastyEmergentEvents(mission, pacingState);\n      events.push(...dynastyEvents);\n\n      // Legacy conflict events\n      const legacyEvents = this.generateLegacyEmergentEvents(mission, pacingState);\n      events.push(...legacyEvents);\n\n      // Population-driven events\n      const populationEvents = this.generatePopulationEmergentEvents(mission, pacingState);\n      events.push(...populationEvents);\n\n      // External events based on mission phase and state\n      const externalEvents = this.generateExternalEmergentEvents(mission, pacingState);\n      events.push(...externalEvents);\n\n      // Sort by priority and urgency\n      events.sort((a, b) => b.priority - a.priority);\n\n      Logger.info('Generated emergent events', {\n        missionId: mission.id,\n        eventCount: events.length,\n        phase: pacingState.currentPhase\n      });\n\n      return events;\n    } catch (error) {\n      Logger.error('Failed to generate emergent events', error);\n      return [];\n    }\n  }\n\n  /**\n   * Check if a phase transition should occur\n   */\n  static checkPhaseTransition(\n    mission: GenerationalMission,\n    pacingState: PacingState\n  ): PhaseTransition | null {\n    try {\n      const transitions = this.getAvailablePhaseTransitions(pacingState.currentPhase);\n\n      for (const transition of transitions) {\n        if (this.evaluateTransitionConditions(transition, mission, pacingState)) {\n          Logger.info('Phase transition triggered', {\n            missionId: mission.id,\n            from: transition.fromPhase,\n            to: transition.toPhase\n          });\n          return transition;\n        }\n      }\n\n      return null;\n    } catch (error) {\n      Logger.error('Failed to check phase transition', error);\n      return null;\n    }\n  }\n\n  /**\n   * Calculate optimal time acceleration based on current state\n   */\n  static calculateTimeAcceleration(\n    mission: GenerationalMission,\n    pacingState: PacingState,\n    preferences: PacingPreferences\n  ): number {\n    try {\n      let acceleration = this.DEFAULT_ACCELERATION;\n\n      // Base acceleration on phase\n      const phaseAcceleration = this.getPhaseBaseAcceleration(pacingState.currentPhase);\n      acceleration *= phaseAcceleration;\n\n      // Adjust for player preferences\n      const preferenceMultiplier = this.getPreferenceAccelerationMultiplier(preferences);\n      acceleration *= preferenceMultiplier;\n\n      // Adjust for engagement level\n      const engagementMultiplier = this.getEngagementAccelerationMultiplier(pacingState.engagementScore);\n      acceleration *= engagementMultiplier;\n\n      // Adjust for active events\n      if (mission.activeEvents.some(e => e.requiresPlayerDecision)) {\n        acceleration = Math.min(acceleration, 0.5); // Slow down for important decisions\n      }\n\n      // Apply limits\n      acceleration = Math.max(this.MIN_ACCELERATION, Math.min(this.MAX_ACCELERATION, acceleration));\n\n      Logger.debug('Time acceleration calculated', {\n        missionId: mission.id,\n        acceleration,\n        factors: { phaseAcceleration, preferenceMultiplier, engagementMultiplier }\n      });\n\n      return acceleration;\n    } catch (error) {\n      Logger.error('Failed to calculate time acceleration', error);\n      return this.DEFAULT_ACCELERATION;\n    }\n  }\n\n  /**\n   * Determine if game should pause for player interaction\n   */\n  static shouldPauseForInteraction(\n    event: any,\n    pacingState: PacingState,\n    automationPolicies: AutomationPolicy[]\n  ): boolean {\n    try {\n      // Always pause for critical decisions\n      if (event.urgency === 'critical' || event.requiresPlayerDecision) {\n        return true;\n      }\n\n      // Check automation policies\n      const applicablePolicy = automationPolicies.find(policy =>\n        policy.category === event.category || policy.category === 'all'\n      );\n\n      if (applicablePolicy) {\n        // Check if automation level allows handling this event\n        if (applicablePolicy.automationLevel >= 0.8 && !applicablePolicy.playerApprovalRequired) {\n          return false;\n        }\n\n        // Check escalation conditions\n        const shouldEscalate = applicablePolicy.escalationConditions.some(condition =>\n          this.evaluateEscalationCondition(condition, event, pacingState)\n        );\n\n        if (shouldEscalate) {\n          return true;\n        }\n      }\n\n      // Default behavior based on engagement\n      if (pacingState.engagementScore < 0.3) {\n        return false; // Player seems disengaged, handle automatically\n      }\n\n      if (pacingState.engagementScore > 0.8) {\n        return true; // Player is highly engaged, involve them in decisions\n      }\n\n      // Medium engagement - pause for moderate+ importance events\n      return event.importance >= 0.6;\n    } catch (error) {\n      Logger.error('Failed to determine if should pause for interaction', error);\n      return true; // Default to pausing for safety\n    }\n  }\n\n  /**\n   * Analyze player engagement and provide recommendations\n   */\n  static analyzePlayerEngagement(\n    interactions: InteractionEvent[],\n    pacingState: PacingState\n  ): EngagementAnalysis {\n    try {\n      if (interactions.length === 0) {\n        return this.getDefaultEngagementAnalysis();\n      }\n\n      const currentLevel = this.classifyEngagementLevel(pacingState.engagementScore);\n      const trend = this.calculateEngagementTrend(interactions);\n      const factors = this.identifyEngagementFactors(interactions, pacingState);\n      const predictions = this.generateEngagementPredictions(interactions, pacingState);\n      const recommendations = this.generateEngagementRecommendations(currentLevel, trend, factors);\n\n      return {\n        currentLevel,\n        trend,\n        factors,\n        predictions,\n        recommendations\n      };\n    } catch (error) {\n      Logger.error('Failed to analyze player engagement', error);\n      return this.getDefaultEngagementAnalysis();\n    }\n  }\n\n  /**\n   * Save pacing state to storage\n   */\n  static async savePacingState(state: PacingState): Promise<void> {\n    try {\n      const serialized = JSON.stringify(state);\n      localStorage.setItem(this.PACING_STORAGE_KEY, serialized);\n\n      Logger.info('Pacing state saved', {\n        phase: state.currentPhase,\n        acceleration: state.timeAcceleration\n      });\n    } catch (error) {\n      Logger.error('Failed to save pacing state', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Load pacing state from storage\n   */\n  static async loadPacingState(): Promise<PacingState | null> {\n    try {\n      const stored = localStorage.getItem(this.PACING_STORAGE_KEY);\n      if (!stored) return null;\n\n      const state = JSON.parse(stored) as PacingState;\n\n      Logger.info('Pacing state loaded', {\n        phase: state.currentPhase,\n        acceleration: state.timeAcceleration\n      });\n\n      return state;\n    } catch (error) {\n      Logger.error('Failed to load pacing state', error);\n      return null;\n    }\n  }\n\n  // Private helper methods\n\n  private static determineGamePhase(mission: GenerationalMission): GamePhase {\n    const progress = mission.phaseProgress / 100;\n    const year = mission.currentYear;\n    const estimatedDuration = mission.estimatedDuration;\n\n    if (year < estimatedDuration * 0.2) return 'early';\n    if (year < estimatedDuration * 0.8) return 'mid';\n    if (year < estimatedDuration * 0.95) return 'late';\n    if (mission.isCompleted) return 'post-mission';\n    return 'arrival';\n  }\n\n  private static calculatePhaseProgress(mission: GenerationalMission, phase: GamePhase): number {\n    const year = mission.currentYear;\n    const total = mission.estimatedDuration;\n\n    switch (phase) {\n      case 'early':\n        return Math.min(1.0, year / (total * 0.2));\n      case 'mid':\n        return Math.min(1.0, (year - total * 0.2) / (total * 0.6));\n      case 'late':\n        return Math.min(1.0, (year - total * 0.8) / (total * 0.15));\n      case 'arrival':\n        return Math.min(1.0, (year - total * 0.95) / (total * 0.05));\n      default:\n        return 1.0;\n    }\n  }\n\n  private static calculatePhaseStartYear(mission: GenerationalMission, phase: GamePhase): number {\n    const total = mission.estimatedDuration;\n\n    switch (phase) {\n      case 'early': return 0;\n      case 'mid': return total * 0.2;\n      case 'late': return total * 0.8;\n      case 'arrival': return total * 0.95;\n      default: return mission.currentYear;\n    }\n  }\n\n  private static calculateEngagementScore(mission: GenerationalMission): number {\n    // Simple engagement calculation based on mission state\n    // In a real implementation, this would consider interaction history\n    let score = 0.5;\n\n    // Increase engagement if there are active events\n    if (mission.activeEvents.length > 0) {\n      score += 0.2;\n    }\n\n    // Increase engagement if population is stable\n    if (mission.population.morale > 70) {\n      score += 0.1;\n    }\n\n    // Decrease engagement if resources are critically low\n    if (mission.resources.food < 100 || mission.resources.energy < 100) {\n      score -= 0.2;\n    }\n\n    return Math.max(0, Math.min(1, score));\n  }\n\n  private static calculateOptimalAcceleration(\n    mission: GenerationalMission,\n    preferences: PacingPreferences,\n    engagementScore: number\n  ): number {\n    let acceleration = this.DEFAULT_ACCELERATION;\n\n    // Adjust based on preferences\n    switch (preferences.preferredSpeed) {\n      case 'slow': acceleration *= 0.5; break;\n      case 'fast': acceleration *= 2.0; break;\n      case 'adaptive': acceleration *= (1.0 + engagementScore); break;\n      default: break; // medium\n    }\n\n    // Slow down if there are urgent events\n    if (mission.activeEvents.some(e => e.requiresPlayerDecision)) {\n      acceleration *= 0.3;\n    }\n\n    return Math.max(this.MIN_ACCELERATION, Math.min(this.MAX_ACCELERATION, acceleration));\n  }\n\n  private static calculateEventDensity(\n    mission: GenerationalMission,\n    phase: GamePhase,\n    preferences: PacingPreferences\n  ): number {\n    let density = 1.0;\n\n    // Adjust based on phase\n    switch (phase) {\n      case 'early': density = 0.8; break;\n      case 'mid': density = 1.2; break;\n      case 'late': density = 1.5; break;\n      case 'arrival': density = 2.0; break;\n      default: density = 1.0; break;\n    }\n\n    // Adjust based on preferences\n    switch (preferences.milestoneFrequency) {\n      case 'sparse': density *= 0.7; break;\n      case 'frequent': density *= 1.4; break;\n      default: break; // moderate\n    }\n\n    return density;\n  }\n\n  private static calculateInteractionDensity(\n    preferences: PacingPreferences,\n    engagementScore: number\n  ): number {\n    let density = 1.0;\n\n    // Adjust based on automation threshold\n    density *= (1.0 - preferences.automationThreshold);\n\n    // Adjust based on engagement\n    density *= (0.5 + engagementScore);\n\n    return Math.max(0.1, Math.min(2.0, density));\n  }\n\n  private static calculateAutomationLevel(\n    preferences: PacingPreferences,\n    engagementScore: number\n  ): number {\n    let automation = preferences.automationThreshold;\n\n    // Increase automation if engagement is low\n    if (engagementScore < 0.3) {\n      automation = Math.min(1.0, automation + 0.3);\n    }\n\n    // Decrease automation if engagement is high\n    if (engagementScore > 0.8) {\n      automation = Math.max(0.0, automation - 0.2);\n    }\n\n    return automation;\n  }\n\n  private static calculateNarrativeTension(mission: GenerationalMission, phase: GamePhase): number {\n    let tension = 0.5;\n\n    // Increase tension based on active crises\n    const crises = mission.activeEvents.filter(e => e.category === 'immediate_crisis').length;\n    tension += crises * 0.2;\n\n    // Adjust based on phase\n    switch (phase) {\n      case 'early': tension *= 0.7; break;\n      case 'mid': tension *= 1.0; break;\n      case 'late': tension *= 1.3; break;\n      case 'arrival': tension *= 1.5; break;\n    }\n\n    // Adjust based on resource scarcity\n    const resourceStress = this.calculateResourceStress(mission);\n    tension += resourceStress * 0.3;\n\n    return Math.max(0, Math.min(1, tension));\n  }\n\n  private static calculateResourceStress(mission: GenerationalMission): number {\n    const resources = mission.resources;\n    const critical = ['food', 'energy', 'fuel'].map(resource =>\n      Math.max(0, 1 - ((resources as any)[resource] / 1000)) // Assuming 1000 is a comfortable level\n    );\n\n    return critical.reduce((sum, stress) => sum + stress, 0) / critical.length;\n  }\n\n  private static createAdaptiveSettings(preferences: PacingPreferences): AdaptiveSettings {\n    return {\n      learningRate: 0.1,\n      sensitivityThreshold: 0.2,\n      stabilityPeriod: 300, // 5 minutes\n      overrideHistory: []\n    };\n  }\n\n  private static initializePacingMetrics(): PacingMetrics {\n    return {\n      averageEngagement: 0.5,\n      interactionFrequency: 1.0,\n      satisfactionRating: 0.5,\n      automationEfficiency: 0.7,\n      narrativeCoherence: 0.8,\n      adaptationSuccess: 0.6\n    };\n  }\n\n  private static createDefaultPacingState(preferences: PacingPreferences): PacingState {\n    return {\n      currentPhase: 'early',\n      phaseProgress: 0,\n      phaseStartYear: 0,\n      timeAcceleration: this.DEFAULT_ACCELERATION,\n      eventDensity: 1.0,\n      interactionDensity: 1.0,\n      lastPlayerInteraction: Date.now(),\n      interactionHistory: [],\n      engagementScore: 0.5,\n      automationLevel: preferences.automationThreshold,\n      tensionLevel: 0.3,\n      nextMilestone: null,\n      emergentEventQueue: [],\n      playerPreferences: preferences,\n      adaptiveSettings: this.createAdaptiveSettings(preferences),\n      pacingMetrics: this.initializePacingMetrics()\n    };\n  }\n\n  private static generatePhaseMilestones(mission: GenerationalMission, phase: GamePhase): PlannedMilestone[] {\n    // Generate phase-appropriate milestones\n    return [];\n  }\n\n  private static generateChronicleInfluencedMilestones(mission: GenerationalMission, chronicle: Chronicle): PlannedMilestone[] {\n    // Generate milestones influenced by chronicle history\n    return [];\n  }\n\n  private static analyzeInteractionPatterns(interactions: InteractionEvent[]): any {\n    const recentInteractions = interactions.slice(-10); // Last 10 interactions\n\n    return {\n      averageEngagement: recentInteractions.reduce((sum, i) => sum + (i.satisfaction || 0.5), 0) / recentInteractions.length,\n      crisisOverload: recentInteractions.filter(i => i.type === 'crisis').length > 5,\n      boredom: recentInteractions.length < 3 && Date.now() - recentInteractions[0]?.timestamp > 300000 // 5 minutes\n    };\n  }\n\n  private static adaptAutomationLevel(currentLevel: number, analysis: any): number {\n    if (analysis.crisisOverload) {\n      return Math.min(1.0, currentLevel + 0.2);\n    }\n    if (analysis.boredom) {\n      return Math.max(0.0, currentLevel - 0.1);\n    }\n    return currentLevel;\n  }\n\n  private static updateAdaptiveSettings(settings: AdaptiveSettings, analysis: any): AdaptiveSettings {\n    return {\n      ...settings,\n      // Update based on analysis\n    };\n  }\n\n  private static generateDynastyEmergentEvents(mission: GenerationalMission, pacingState: PacingState): EmergentEvent[] {\n    return [];\n  }\n\n  private static generateLegacyEmergentEvents(mission: GenerationalMission, pacingState: PacingState): EmergentEvent[] {\n    return [];\n  }\n\n  private static generatePopulationEmergentEvents(mission: GenerationalMission, pacingState: PacingState): EmergentEvent[] {\n    return [];\n  }\n\n  private static generateExternalEmergentEvents(mission: GenerationalMission, pacingState: PacingState): EmergentEvent[] {\n    return [];\n  }\n\n  private static getAvailablePhaseTransitions(currentPhase: GamePhase): PhaseTransition[] {\n    // Return possible transitions from current phase\n    return [];\n  }\n\n  private static evaluateTransitionConditions(\n    transition: PhaseTransition,\n    mission: GenerationalMission,\n    pacingState: PacingState\n  ): boolean {\n    // Evaluate if transition conditions are met\n    return false;\n  }\n\n  private static getPhaseBaseAcceleration(phase: GamePhase): number {\n    switch (phase) {\n      case 'early': return 1.5;\n      case 'mid': return 1.0;\n      case 'late': return 0.8;\n      case 'arrival': return 0.3;\n      default: return 1.0;\n    }\n  }\n\n  private static getPreferenceAccelerationMultiplier(preferences: PacingPreferences): number {\n    switch (preferences.preferredSpeed) {\n      case 'slow': return 0.6;\n      case 'fast': return 1.8;\n      case 'adaptive': return 1.0;\n      default: return 1.0; // medium\n    }\n  }\n\n  private static getEngagementAccelerationMultiplier(engagementScore: number): number {\n    // Lower engagement = higher acceleration to get to interesting parts faster\n    return 2.0 - engagementScore;\n  }\n\n  private static evaluateEscalationCondition(condition: any, event: any, pacingState: PacingState): boolean {\n    // Evaluate specific escalation condition\n    return false;\n  }\n\n  private static classifyEngagementLevel(score: number): EngagementLevel {\n    if (score >= 0.8) return 'very_high';\n    if (score >= 0.6) return 'high';\n    if (score >= 0.4) return 'moderate';\n    if (score >= 0.2) return 'low';\n    return 'very_low';\n  }\n\n  private static calculateEngagementTrend(interactions: InteractionEvent[]): 'increasing' | 'stable' | 'decreasing' {\n    if (interactions.length < 2) return 'stable';\n\n    const recent = interactions.slice(-5);\n    const older = interactions.slice(-10, -5);\n\n    const recentAvg = recent.reduce((sum, i) => sum + (i.satisfaction || 0.5), 0) / recent.length;\n    const olderAvg = older.reduce((sum, i) => sum + (i.satisfaction || 0.5), 0) / older.length;\n\n    if (recentAvg > olderAvg + 0.1) return 'increasing';\n    if (recentAvg < olderAvg - 0.1) return 'decreasing';\n    return 'stable';\n  }\n\n  private static identifyEngagementFactors(interactions: InteractionEvent[], pacingState: PacingState): any[] {\n    // Identify factors affecting engagement\n    return [];\n  }\n\n  private static generateEngagementPredictions(interactions: InteractionEvent[], pacingState: PacingState): any[] {\n    // Generate predictions about future engagement\n    return [];\n  }\n\n  private static generateEngagementRecommendations(level: EngagementLevel, trend: string, factors: any[]): any[] {\n    // Generate recommendations to improve engagement\n    return [];\n  }\n\n  private static getDefaultEngagementAnalysis(): EngagementAnalysis {\n    return {\n      currentLevel: 'moderate',\n      trend: 'stable',\n      factors: [],\n      predictions: [],\n      recommendations: []\n    };\n  }\n}","usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\services\\ResourceService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\services\\ValidationService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\services\\__tests__\\ResourceService.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\services\\__tests__\\ValidationService.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\stores\\__tests__\\useGameStore.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\stores\\useGameStore.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ChronicleDecision' is defined but never used.","line":6,"column":42,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":59},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'HeritageApplicationResult' is defined but never used.","line":7,"column":33,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":58},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'PlannedMilestone' is defined but never used.","line":8,"column":47,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":63},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":202,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":202,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7321,7324],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7321,7324],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":215,"column":32,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":215,"endColumn":35,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7876,7879],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7876,7879],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":228,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":228,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8465,8468],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8465,8468],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":716,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":716,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[27810,27813],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[27810,27813],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":845,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":845,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[33430,33433],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[33430,33433],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":897,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":897,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[35392,35395],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[35392,35395],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'availableHeritageModifiers' is assigned a value but never used.","line":960,"column":33,"nodeType":null,"messageId":"unusedVar","endLine":960,"endColumn":59},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":1040,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":1040,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[40995,40998],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[40995,40998],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// stores/useGameStore.ts\r\nimport { create } from 'zustand';\r\nimport { persist } from 'zustand/middleware';\r\nimport type { GameState, GameData, CrewMember, StarSystem, Planet, Notification, ShipStats, ComponentCost } from '../types/game';\r\nimport type { CulturalEvolution } from '../types/generationalMissions';\r\nimport type { Chronicle, ChronicleEntry, ChronicleDecision } from '../types/chronicle';\r\nimport type { HeritageModifier, HeritageApplicationResult } from '../types/heritage';\r\nimport type { PacingState, PacingPreferences, PlannedMilestone } from '../types/pacing';\r\nimport type { LegacyCard, LegacyDeck, CardTriggerResult } from '../types/legacyDecks';\r\nimport { ChronicleService } from '../services/ChronicleService';\r\nimport { HeritageService } from '../services/HeritageService';\r\nimport { PacingService } from '../services/PacingService';\r\nimport { LegacyDeckService } from '../services/LegacyDeckService';\r\nimport { DecisionTrackingService, type DecisionInput } from '../services/DecisionTrackingService';\r\nimport { GAME_CONSTANTS } from '../constants/gameConstants';\r\nimport type { TabIdType, TradeActionType, LegacyTypeType } from '../types/enums';\r\nimport { TabId } from '../types/enums';\r\nimport { DynastyService } from '../services/DynastyService';\r\nimport { CrewIdGenerator } from '../types/branded';\r\nimport type { CrewMemberId, NotificationId } from '../types/branded';\r\nimport { NotificationManager } from '../services/NotificationManager';\r\nimport { ResourceService } from '../services/ResourceService';\r\nimport { ValidationService } from '../services/ValidationService';\r\nimport gameConfig from '../config/gameConfig';\r\nimport Logger from '../utils/logger';\r\nimport { GameEngine } from '../services/GameEngine';\r\n\r\nconst initialGameData: GameData = {\r\n  resources: {\r\n    credits: 1000,\r\n    energy: 100,\r\n    minerals: 50,\r\n    food: 80,\r\n    influence: 25\r\n  },\r\n  ship: {\r\n    name: \"Pioneer's Dream\",\r\n    hull: \"Light Corvette\",\r\n    components: {\r\n      engine: \"Basic Thruster\",\r\n      cargo: \"Standard Bay\",\r\n      weapons: \"Light Laser\",\r\n      research: \"Basic Scanner\",\r\n      quarters: \"Crew Quarters\"\r\n    },\r\n    stats: {\r\n      speed: 3,\r\n      cargo: 100,\r\n      combat: 2,\r\n      research: 1,\r\n      crewCapacity: 6\r\n    }\r\n  },\r\n  crew: [\r\n    {\r\n      id: CrewIdGenerator.generate(),\r\n      name: \"Captain Elena Voss\",\r\n      role: \"Captain\",\r\n      skills: {engineering: 6, navigation: 8, combat: 7, diplomacy: 9, trade: 5},\r\n      morale: 85,\r\n      background: \"Former military officer turned explorer\",\r\n      age: 35,\r\n      isHeir: false\r\n    },\r\n    {\r\n      id: CrewIdGenerator.generate(),\r\n      name: \"Chief Engineer Marcus Cole\",\r\n      role: \"Engineer\",\r\n      skills: {engineering: 9, navigation: 4, combat: 5, diplomacy: 3, trade: 2},\r\n      morale: 90,\r\n      background: \"Shipyard veteran with decades of experience\",\r\n      age: 28,\r\n      isHeir: false\r\n    },\r\n    {\r\n      id: CrewIdGenerator.generate(),\r\n      name: \"Navigator Zara Chen\",\r\n      role: \"Pilot\",\r\n      skills: {engineering: 3, navigation: 9, combat: 6, diplomacy: 5, trade: 4},\r\n      morale: 80,\r\n      background: \"Ace pilot from the outer colonies\",\r\n      age: 26,\r\n      isHeir: false\r\n    },\r\n    {\r\n      id: CrewIdGenerator.generate(),\r\n      name: \"Trader Kex Thorne\",\r\n      role: \"Diplomat\",\r\n      skills: {engineering: 2, navigation: 3, combat: 4, diplomacy: 8, trade: 9},\r\n      morale: 75,\r\n      background: \"Smooth-talking merchant with connections\",\r\n      age: 32,\r\n      isHeir: false\r\n    }\r\n  ],\r\n  starSystems: [\r\n    {\r\n      name: \"Sol Alpha\",\r\n      status: \"explored\",\r\n      planets: [\r\n        {name: \"Terra Prime\", type: \"Rocky\", resources: [\"minerals\", \"energy\"], developed: true},\r\n        {name: \"Gas Giant Beta\", type: \"Gas Giant\", resources: [\"energy\", \"food\"], developed: false}\r\n      ],\r\n      tradeRoutes: [],\r\n      coordinates: {x: 100, y: 100}\r\n    },\r\n    {\r\n      name: \"Kepler Station\",\r\n      status: \"unexplored\",\r\n      planets: [{name: \"Unknown\", type: \"Unknown\", resources: [\"unknown\"], developed: false}],\r\n      tradeRoutes: [],\r\n      coordinates: {x: 200, y: 150}\r\n    },\r\n    {\r\n      name: \"Vega Outpost\",\r\n      status: \"unexplored\",\r\n      planets: [{name: \"Unknown\", type: \"Unknown\", resources: [\"unknown\"], developed: false}],\r\n      tradeRoutes: [],\r\n      coordinates: {x: 150, y: 250}\r\n    }\r\n  ],\r\n  market: {\r\n    prices: {\r\n      minerals: 15,\r\n      energy: 12,\r\n      food: 8,\r\n      influence: 25\r\n    },\r\n    trends: {\r\n      minerals: \"rising\",\r\n      energy: \"stable\",\r\n      food: \"falling\",\r\n      influence: \"rising\"\r\n    }\r\n  },\r\n  legacy: {\r\n    generation: 1,\r\n    familyName: \"Voss\",\r\n    achievements: [\"First Command\", \"System Explorer\"],\r\n    traits: [\"Natural Leader\", \"Tech Savvy\"],\r\n    reputation: {\r\n      military: 20,\r\n      traders: 15,\r\n      scientists: 10\r\n    }\r\n  },\r\n  shipComponents: {\r\n    hulls: [\r\n      {name: \"Light Corvette\", cost: {credits: 500}, stats: {speed: 3, cargo: 100, combat: 2}},\r\n      {name: \"Heavy Frigate\", cost: {credits: 1500, minerals: 200}, stats: {speed: 2, cargo: 200, combat: 5}},\r\n      {name: \"Exploration Vessel\", cost: {credits: 1200, energy: 150}, stats: {speed: 4, cargo: 150, research: 3}}\r\n    ],\r\n    engines: [\r\n      {name: \"Basic Thruster\", cost: {credits: 200}, stats: {speed: 1}},\r\n      {name: \"Ion Drive\", cost: {credits: 800, energy: 100}, stats: {speed: 3}},\r\n      {name: \"Warp Core\", cost: {credits: 2000, energy: 300, minerals: 100}, stats: {speed: 5}}\r\n    ],\r\n    weapons: [\r\n      {name: \"Light Laser\", cost: {credits: 300}, stats: {combat: 2}},\r\n      {name: \"Pulse Cannon\", cost: {credits: 800, minerals: 50}, stats: {combat: 4}},\r\n      {name: \"Plasma Artillery\", cost: {credits: 1500, minerals: 150, energy: 100}, stats: {combat: 7}}\r\n    ]\r\n  }\r\n};\r\n\r\ninterface GameStore extends GameState {\r\n  // Chronicle System State\r\n  chronicle: Chronicle | null;\r\n  availableHeritageModifiers: HeritageModifier[];\r\n  selectedHeritageModifiers: HeritageModifier[];\r\n\r\n  // Pacing System State\r\n  pacingState: PacingState | null;\r\n  pacingPreferences: PacingPreferences;\r\n\r\n  // Legacy Deck System State\r\n  legacyDecks: Record<LegacyTypeType, LegacyDeck>;\r\n  activeCards: LegacyCard[];\r\n  pendingCardChoices: CardTriggerResult[];\r\n\r\n  // Actions\r\n  initializeGame: () => void;\r\n  switchTab: (tabName: TabIdType) => void;\r\n  updateDisplay: () => void;\r\n  generateResources: () => void;\r\n  trainCrew: () => void;\r\n  boostMorale: () => void;\r\n  recruitCrew: () => void;\r\n  selectSystem: (system: StarSystem) => void;\r\n  exploreSystem: () => void;\r\n  establishColony: () => void;\r\n  switchComponentCategory: (category: keyof typeof initialGameData.shipComponents) => void;\r\n  purchaseComponent: (category: string, componentName: string) => void;\r\n  selectHeir: (heirId: CrewMemberId) => void;\r\n  showNotification: (message: string, type?: Notification['type']) => void;\r\n  clearNotification: (id: NotificationId) => void;\r\n  tradeResource: (resource: 'minerals' | 'energy' | 'food' | 'influence', action: TradeActionType) => void;\r\n\r\n  // Dynasty System Actions\r\n  dynastyAction: (dynastyId: string, action: string) => void;\r\n  legacyAction: (targetLegacy: LegacyTypeType, action: string) => void;\r\n  culturalAction: (action: string, parameters?: any) => void;\r\n  initializeDynasties: (legacy: LegacyTypeType) => void;\r\n\r\n  // Chronicle System Actions\r\n  loadChronicle: () => Promise<void>;\r\n  saveChronicleEntry: (entry: ChronicleEntry) => Promise<void>;\r\n  generateHeritageModifiers: (entry: ChronicleEntry) => Promise<void>;\r\n  selectHeritageModifiers: (modifiers: HeritageModifier[]) => void;\r\n  applyHeritageModifiers: () => Promise<void>;\r\n  exportChronicle: () => string | null;\r\n  recordDecision: (decision: DecisionInput) => void;\r\n\r\n  // Pacing System Actions\r\n  initializePacing: (mission?: any) => Promise<void>;\r\n  updatePacingState: (updates: Partial<PacingState>) => void;\r\n  updatePacingPreferences: (preferences: PacingPreferences) => void;\r\n  pauseTime: () => void;\r\n  resumeTime: () => void;\r\n  forceTimeAcceleration: (acceleration: number) => void;\r\n\r\n  // Legacy Deck Actions\r\n  initializeLegacyDecks: () => Promise<void>;\r\n  checkCardTriggers: () => void;\r\n  triggerCard: (cardId: string) => void;\r\n  resolveCardChoice: (cardId: string, choiceId: string) => void;\r\n  rateCard: (cardId: string, rating: number) => void;\r\n  customizeCard: (cardId: string, modifications: any[]) => void;\r\n\r\n  // Helper methods\r\n  canAffordComponent: (cost: ComponentCost) => boolean;\r\n  generateRandomCrew: () => CrewMember;\r\n  generatePlanets: () => Planet[];\r\n\r\n  // Cleanup\r\n  cleanup: () => void;\r\n\r\n  // Internal state\r\n  resourceIntervalId: number | null;\r\n}\r\n\r\nexport const useGameStore = create<GameStore>()(\r\n  persist(\r\n    (set, get) => ({\r\n      ...initialGameData,\r\n      selectedSystem: null,\r\n      currentComponentCategory: 'hulls',\r\n      resourceGenerationRate: {\r\n        credits: GAME_CONSTANTS.RESOURCE_GENERATION.BASE_RATES.CREDITS,\r\n        energy: GAME_CONSTANTS.RESOURCE_GENERATION.BASE_RATES.ENERGY,\r\n        minerals: GAME_CONSTANTS.RESOURCE_GENERATION.BASE_RATES.MINERALS,\r\n        food: GAME_CONSTANTS.RESOURCE_GENERATION.BASE_RATES.FOOD,\r\n        influence: GAME_CONSTANTS.RESOURCE_GENERATION.BASE_RATES.INFLUENCE\r\n      },\r\n      currentTab: 'dashboard',\r\n      notifications: [],\r\n      resourceIntervalId: null,\r\n\r\n      // Generational Missions State\r\n      generationalMissions: [],\r\n      activeMissions: [],\r\n      selectedMission: null,\r\n      legacyRelations: [],\r\n      playerLegacyAffinity: {\r\n        preservers: 0,\r\n        adaptors: 0,\r\n        wanderers: 0\r\n      },\r\n\r\n      // Dynasty System State\r\n      dynasties: [],\r\n      playerLegacy: 'preservers' as LegacyTypeType,\r\n      currentGeneration: 1,\r\n      culturalEvolution: [\r\n        {\r\n          legacy: 'preservers',\r\n          baselineDeviation: 0,\r\n          majorChanges: [],\r\n          currentTrends: []\r\n        },\r\n        {\r\n          legacy: 'adaptors',\r\n          baselineDeviation: 0,\r\n          majorChanges: [],\r\n          currentTrends: []\r\n        },\r\n        {\r\n          legacy: 'wanderers',\r\n          baselineDeviation: 0,\r\n          majorChanges: [],\r\n          currentTrends: []\r\n        }\r\n      ] as CulturalEvolution[],\r\n\r\n      // Chronicle System State\r\n      chronicle: null,\r\n      availableHeritageModifiers: [],\r\n      selectedHeritageModifiers: [],\r\n\r\n      // Pacing System State\r\n      pacingState: null,\r\n      pacingPreferences: {\r\n        preferredSpeed: 'medium',\r\n        crisisHandling: 'guided',\r\n        milestoneFrequency: 'moderate',\r\n        narrativeStyle: 'concise',\r\n        automationThreshold: 0.3,\r\n        interactionBudget: 2,\r\n        contentPreferences: {\r\n          dynastyFocus: 0.5,\r\n          legacyFocus: 0.5,\r\n          explorationFocus: 0.5,\r\n          culturalFocus: 0.5,\r\n          contentComplexity: 'moderate',\r\n          narrativeDepth: 'moderate',\r\n          choiceConsequences: 'mixed'\r\n        }\r\n      },\r\n\r\n      // Legacy Deck System State\r\n      legacyDecks: {\r\n        preservers: { legacy: 'preservers', cards: [], activeCards: [], discardPile: [], baseCards: [], chronicleCards: [], customCards: [], totalPlays: 0, averageImpact: 0, playerSatisfaction: 0, balanceRating: 0, playerFilters: [], cardRatings: {}, disabledCards: [] },\r\n        adaptors: { legacy: 'adaptors', cards: [], activeCards: [], discardPile: [], baseCards: [], chronicleCards: [], customCards: [], totalPlays: 0, averageImpact: 0, playerSatisfaction: 0, balanceRating: 0, playerFilters: [], cardRatings: {}, disabledCards: [] },\r\n        wanderers: { legacy: 'wanderers', cards: [], activeCards: [], discardPile: [], baseCards: [], chronicleCards: [], customCards: [], totalPlays: 0, averageImpact: 0, playerSatisfaction: 0, balanceRating: 0, playerFilters: [], cardRatings: {}, disabledCards: [] }\r\n      },\r\n      activeCards: [],\r\n      pendingCardChoices: [],\r\n\r\n      initializeGame: () => {\r\n        Logger.info('Initializing game store');\r\n        // Start resource generation\r\n        const generateResources = () => {\r\n          get().generateResources();\r\n        };\r\n        generateResources();\r\n        const intervalId = setInterval(generateResources, gameConfig.intervals.resourceGeneration);\r\n        set({ resourceIntervalId: intervalId });\r\n        Logger.info('Game initialized successfully');\r\n      },\r\n\r\n      switchTab: (tabName: TabIdType) => {\r\n        if (!Object.values(TabId).includes(tabName)) {\r\n          Logger.warn('Invalid tab requested', { tabName });\r\n          return;\r\n        }\r\n        set({ currentTab: tabName });\r\n      },\r\n\r\n      updateDisplay: () => {\r\n        // This will trigger re-renders in React components\r\n        // No need to manually update DOM elements\r\n      },\r\n\r\n      generateResources: () => {\r\n        const { resources, resourceGenerationRate } = get();\r\n        const newResources = ResourceService.generateResources(resources, resourceGenerationRate);\r\n        set({ resources: newResources });\r\n        Logger.resourceChange('all', 0, 'Resource generation tick');\r\n      },\r\n\r\n      trainCrew: () => {\r\n        try {\r\n          const { resources, crew } = get();\r\n          const result = GameEngine.processCrewTraining(resources, crew);\r\n\r\n          if (!result.success) {\r\n            get().showNotification(result.error.message, 'error');\r\n            Logger.error('Crew training failed', result.error);\r\n            return;\r\n          }\r\n\r\n          const { newResources, result: trainingResult } = result.data;\r\n          const { updatedCrew, trainedMember, skill } = trainingResult;\r\n\r\n          set({ resources: newResources, crew: updatedCrew });\r\n          const message = NotificationManager.createCrewMessage('trained', trainedMember.name, `${skill} skill improved`);\r\n          get().showNotification(message, 'success');\r\n          Logger.crewAction('skill_training', trainedMember.name, { skill, newLevel: updatedCrew.find(c => c.id === trainedMember.id)?.skills[skill as keyof typeof trainedMember.skills] });\r\n        } catch (error) {\r\n          Logger.error('Crew training failed', error);\r\n          get().showNotification('An error occurred during crew training.', 'error');\r\n        }\r\n      },\r\n\r\n      boostMorale: () => {\r\n        try {\r\n          const { resources, crew } = get();\r\n          const result = GameEngine.processMoraleBoost(resources, crew);\r\n\r\n          if (!result.success) {\r\n            get().showNotification(result.error.message, 'error');\r\n            Logger.error('Morale boost failed', result.error);\r\n            return;\r\n          }\r\n\r\n          const { newResources, updatedCrew } = result.data;\r\n\r\n          set({ resources: newResources, crew: updatedCrew });\r\n          get().showNotification('Crew morale improved!', 'success');\r\n          Logger.gameAction('morale_boost', { affectedCrew: updatedCrew.length });\r\n        } catch (error) {\r\n          Logger.error('Morale boost failed', error);\r\n          get().showNotification('An error occurred during morale boost.', 'error');\r\n        }\r\n      },\r\n\r\n      recruitCrew: () => {\r\n        try {\r\n          const { resources, crew, ship } = get();\r\n          const result = GameEngine.processCrewRecruitment(resources, crew, ship);\r\n\r\n          if (!result.success) {\r\n            get().showNotification(result.error.message, 'error');\r\n            Logger.error('Crew recruitment failed', result.error);\r\n            return;\r\n          }\r\n\r\n          const { newResources, newCrew } = result.data;\r\n          const updatedCrew = [...crew, newCrew];\r\n\r\n          set({ resources: newResources, crew: updatedCrew });\r\n          const message = NotificationManager.createCrewMessage('recruited', newCrew.name, newCrew.role);\r\n          get().showNotification(message, 'success');\r\n          Logger.crewAction('recruitment', newCrew.name, { role: newCrew.role });\r\n        } catch (error) {\r\n          Logger.error('Crew recruitment failed', error);\r\n          get().showNotification('An error occurred during crew recruitment.', 'error');\r\n        }\r\n      },\r\n\r\n      generateRandomCrew: () => {\r\n        return GameEngine.generateRandomCrew();\r\n      },\r\n\r\n      selectSystem: (system: StarSystem) => {\r\n        if (!system || !system.name) {\r\n          Logger.warn('Invalid system selected', { system });\r\n          return;\r\n        }\r\n        set({ selectedSystem: system });\r\n      },\r\n\r\n      exploreSystem: () => {\r\n        try {\r\n          const { selectedSystem, resources } = get();\r\n          const result = GameEngine.processSystemExploration(resources, selectedSystem);\r\n\r\n          if (!result.success) {\r\n            get().showNotification(result.error.message, 'error');\r\n            Logger.error('System exploration failed', result.error);\r\n            return;\r\n          }\r\n\r\n          const { newResources, planets } = result.data;\r\n\r\n          if (selectedSystem) {\r\n            const updatedSystem = { ...selectedSystem, status: 'explored' as const, planets };\r\n            const updatedSystems = get().starSystems.map(sys =>\r\n              sys.name === selectedSystem.name ? updatedSystem : sys\r\n            );\r\n\r\n            set({ resources: newResources, starSystems: updatedSystems, selectedSystem: updatedSystem });\r\n            const message = NotificationManager.createSystemMessage('explored', selectedSystem.name, `Discovered ${planets.length} planets`);\r\n            get().showNotification(message, 'success');\r\n            Logger.systemEvent('exploration', selectedSystem.name, { planetsDiscovered: planets.length });\r\n          }\r\n        } catch (error) {\r\n          Logger.error('System exploration failed', error);\r\n          get().showNotification('An error occurred during system exploration.', 'error');\r\n        }\r\n      },\r\n\r\n      establishColony: () => {\r\n        try {\r\n          const { selectedSystem, resources, resourceGenerationRate } = get();\r\n          const result = GameEngine.processColonyEstablishment(resources, selectedSystem);\r\n\r\n          if (!result.success) {\r\n            get().showNotification(result.error.message, 'error');\r\n            Logger.error('Colony establishment failed', result.error);\r\n            return;\r\n          }\r\n\r\n          const { newResources, colonyPlanet, newGenerationRate } = result.data;\r\n\r\n          if (selectedSystem) {\r\n            const updatedPlanets = selectedSystem.planets.map(p =>\r\n              p.name === colonyPlanet.name ? { ...p, developed: true } : p\r\n            );\r\n\r\n            const updatedSystem = { ...selectedSystem, planets: updatedPlanets };\r\n            const updatedSystems = get().starSystems.map(sys =>\r\n              sys.name === selectedSystem.name ? updatedSystem : sys\r\n            );\r\n\r\n            set({\r\n              resources: newResources,\r\n              starSystems: updatedSystems,\r\n              selectedSystem: updatedSystem,\r\n              resourceGenerationRate: { ...resourceGenerationRate, ...newGenerationRate }\r\n            });\r\n\r\n            const message = NotificationManager.createSystemMessage('colonized', colonyPlanet.name);\r\n            get().showNotification(message, 'success');\r\n            Logger.systemEvent('colony_established', selectedSystem.name, { planet: colonyPlanet.name });\r\n          }\r\n        } catch (error) {\r\n          Logger.error('Colony establishment failed', error);\r\n          get().showNotification('An error occurred during colony establishment.', 'error');\r\n        }\r\n      },\r\n\r\n      generatePlanets: () => {\r\n        return GameEngine.generatePlanets();\r\n      },\r\n\r\n      switchComponentCategory: (category) => {\r\n        set({ currentComponentCategory: category });\r\n      },\r\n\r\n      canAffordComponent: (cost: ComponentCost) => {\r\n        const { resources } = get();\r\n        return ResourceService.canAfford(resources, cost);\r\n      },\r\n\r\n      purchaseComponent: (category: string, componentName: string) => {\r\n        try {\r\n          const { shipComponents, resources, ship } = get();\r\n          const component = shipComponents[category as keyof typeof shipComponents].find(c => c.name === componentName);\r\n\r\n          if (component && get().canAffordComponent(component.cost)) {\r\n            // Deduct cost using ResourceService\r\n            const newResources = ResourceService.deductCost(resources, component.cost);\r\n\r\n            let updatedShip = { ...ship };\r\n\r\n            if (category === 'hulls') {\r\n              updatedShip = {\r\n                ...updatedShip,\r\n                hull: component.name,\r\n                stats: { ...component.stats } as ShipStats // Hull replaces all stats\r\n              };\r\n            } else {\r\n              const componentType = category.slice(0, -1); // Remove 's' from plural\r\n              updatedShip.components = {\r\n                ...updatedShip.components,\r\n                [componentType]: component.name\r\n              };\r\n\r\n              // Add component stats to ship\r\n              updatedShip.stats = { ...updatedShip.stats };\r\n              Object.entries(component.stats).forEach(([stat, value]) => {\r\n                if (updatedShip.stats[stat as keyof typeof updatedShip.stats] !== undefined) {\r\n                  updatedShip.stats[stat as keyof typeof updatedShip.stats] += value as number;\r\n                }\r\n              });\r\n            }\r\n\r\n            set({ resources: newResources, ship: updatedShip });\r\n            get().showNotification(`Installed ${component.name}!`, 'success');\r\n          }\r\n        } catch (error) {\r\n          Logger.error('Component purchase failed', error);\r\n          get().showNotification('An error occurred during component purchase.', 'error');\r\n        }\r\n      },\r\n\r\n      selectHeir: (heirId: CrewMemberId) => {\r\n        const { crew } = get();\r\n        const targetCrew = crew.find(m => m.id === heirId);\r\n\r\n        if (!targetCrew) {\r\n          Logger.warn('Invalid crew member selected as heir', { heirId });\r\n          get().showNotification('Invalid crew member selected', 'error');\r\n          return;\r\n        }\r\n\r\n        const updatedCrew = crew.map(member => ({ ...member, isHeir: member.id === heirId }));\r\n        set({ crew: updatedCrew });\r\n        const message = NotificationManager.createCrewMessage('promoted', targetCrew.name, 'selected as heir');\r\n        get().showNotification(message, 'success');\r\n      },\r\n\r\n      showNotification: (message: string, type: Notification['type'] = 'info') => {\r\n        const notification = NotificationManager.create(message, type);\r\n        set(state => ({ notifications: [...state.notifications, notification] }));\r\n\r\n        // Auto-remove using NotificationManager\r\n        NotificationManager.autoRemove(notification, get().clearNotification);\r\n      },\r\n\r\n      clearNotification: (id: NotificationId) => {\r\n        set(state => ({\r\n          notifications: state.notifications.filter(n => n.id !== id)\r\n        }));\r\n      },\r\n\r\n      tradeResource: (resource: 'minerals' | 'energy' | 'food' | 'influence', action: TradeActionType) => {\r\n        try {\r\n          // Validate inputs\r\n          const validResources = ['minerals', 'energy', 'food', 'influence'];\r\n          const validActions = ['buy', 'sell'];\r\n\r\n          if (!validResources.includes(resource)) {\r\n            Logger.warn('Invalid resource for trade', { resource });\r\n            get().showNotification('Invalid resource selected', 'error');\r\n            return;\r\n          }\r\n\r\n          if (!validActions.includes(action)) {\r\n            Logger.warn('Invalid trade action', { action });\r\n            get().showNotification('Invalid trade action', 'error');\r\n            return;\r\n          }\r\n\r\n          const { resources, market } = get();\r\n          const price = market.prices[resource];\r\n          const validation = ValidationService.validateTrade(resources, resource, action, price);\r\n\r\n          if (!validation.isValid) {\r\n            get().showNotification(validation.message!, 'error');\r\n            return;\r\n          }\r\n\r\n          const amount = GAME_CONSTANTS.TRADE.DEFAULT_AMOUNT;\r\n          const cost = ResourceService.calculateTradeCost(price, amount);\r\n          const isBuying = action === 'buy';\r\n          const newResources = ResourceService.processTrade(resources, cost, resource, amount, isBuying);\r\n\r\n          set({ resources: newResources });\r\n          const message = NotificationManager.createResourceMessage(isBuying ? 'bought' : 'sold', amount, resource, cost);\r\n          get().showNotification(message, 'success');\r\n          Logger.gameAction('trade', { resource, action: isBuying ? 'buy' : 'sell', amount, cost });\r\n        } catch (error) {\r\n          Logger.error('Resource trade failed', error);\r\n          get().showNotification('An error occurred during resource trade.', 'error');\r\n        }\r\n      },\r\n\r\n      // Dynasty System Actions\r\n      dynastyAction: (dynastyId: string, action: string) => {\r\n        try {\r\n          const { dynasties } = get();\r\n          const dynasty = dynasties.find(d => d.id === dynastyId);\r\n\r\n          if (!dynasty) {\r\n            get().showNotification('Dynasty not found', 'error');\r\n            return;\r\n          }\r\n\r\n          let message = '';\r\n          let updatedDynasties = [...dynasties];\r\n\r\n          switch (action) {\r\n            case 'grant_autonomy':\r\n              message = `Granted autonomy to ${dynasty.name}`;\r\n              // Update dynasty influence or other properties\r\n              updatedDynasties = dynasties.map(d =>\r\n                d.id === dynastyId ? { ...d, influence: Math.min(100, d.influence + 10) } : d\r\n              );\r\n              break;\r\n            case 'assign_mission':\r\n              message = `Assigned special mission to ${dynasty.name}`;\r\n              break;\r\n            case 'promote_member':\r\n              message = `Promoted a member in ${dynasty.name}`;\r\n              break;\r\n            case 'expand_influence':\r\n              message = `Expanded influence for ${dynasty.name}`;\r\n              updatedDynasties = dynasties.map(d =>\r\n                d.id === dynastyId ? { ...d, influence: Math.min(100, d.influence + 5) } : d\r\n              );\r\n              break;\r\n            default:\r\n              message = `Unknown action: ${action}`;\r\n          }\r\n\r\n          set({ dynasties: updatedDynasties });\r\n          get().showNotification(message, 'success');\r\n          Logger.gameAction('dynasty_action', { dynastyId, action });\r\n        } catch (error) {\r\n          Logger.error('Dynasty action failed', error);\r\n          get().showNotification('Dynasty action failed', 'error');\r\n        }\r\n      },\r\n\r\n      legacyAction: (targetLegacy: LegacyTypeType, action: string) => {\r\n        try {\r\n          let message = '';\r\n\r\n          switch (action) {\r\n            case 'improve_relations':\r\n              message = `Attempting to improve relations with ${targetLegacy}`;\r\n              break;\r\n            case 'formal_alliance':\r\n              message = `Proposing formal alliance with ${targetLegacy}`;\r\n              break;\r\n            case 'cultural_exchange':\r\n              message = `Initiating cultural exchange with ${targetLegacy}`;\r\n              break;\r\n            case 'issue_warning':\r\n              message = `Issued warning to ${targetLegacy}`;\r\n              break;\r\n            default:\r\n              message = `Unknown legacy action: ${action}`;\r\n          }\r\n\r\n          get().showNotification(message, 'success');\r\n          Logger.gameAction('legacy_action', { targetLegacy, action });\r\n        } catch (error) {\r\n          Logger.error('Legacy action failed', error);\r\n          get().showNotification('Legacy action failed', 'error');\r\n        }\r\n      },\r\n\r\n      culturalAction: (action: string, parameters?: any) => {\r\n        try {\r\n          let message = '';\r\n\r\n          switch (action) {\r\n            case 'preserve_traditions':\r\n              message = 'Implementing traditional preservation measures';\r\n              break;\r\n            case 'encourage_innovation':\r\n              message = 'Encouraging cultural innovation';\r\n              break;\r\n            case 'cultural_festival':\r\n              message = 'Organizing cultural festival';\r\n              break;\r\n            case 'generational_dialogue':\r\n              message = 'Facilitating generational dialogue';\r\n              break;\r\n            case 'cultural_census':\r\n              message = 'Conducting cultural census';\r\n              break;\r\n            case 'cultural_education':\r\n              message = 'Starting cultural education program';\r\n              break;\r\n            case 'cultural_reform':\r\n              message = 'Implementing cultural reform initiative';\r\n              break;\r\n            case 'cultural_restoration':\r\n              message = 'Attempting cultural restoration';\r\n              break;\r\n            case 'accept_evolution':\r\n              message = 'Accepting cultural evolution as new baseline';\r\n              break;\r\n            default:\r\n              message = `Unknown cultural action: ${action}`;\r\n          }\r\n\r\n          get().showNotification(message, 'success');\r\n          Logger.gameAction('cultural_action', { action, parameters });\r\n        } catch (error) {\r\n          Logger.error('Cultural action failed', error);\r\n          get().showNotification('Cultural action failed', 'error');\r\n        }\r\n      },\r\n\r\n      initializeDynasties: (legacy: LegacyTypeType) => {\r\n        try {\r\n          const dynasties = DynastyService.generateInitialDynasties(legacy, 50000); // 50k population\r\n          set({ dynasties, playerLegacy: legacy });\r\n          get().showNotification(`Initialized ${dynasties.length} dynasties for ${legacy} legacy`, 'success');\r\n          Logger.gameAction('dynasties_initialized', { legacy, count: dynasties.length });\r\n        } catch (error) {\r\n          Logger.error('Dynasty initialization failed', error);\r\n          get().showNotification('Failed to initialize dynasties', 'error');\r\n        }\r\n      },\r\n\r\n      // Chronicle System Actions\r\n      loadChronicle: async () => {\r\n        try {\r\n          const result = await ChronicleService.loadPlayerChronicle();\r\n          if (result.success) {\r\n            set({ chronicle: result.data });\r\n            if (result.data) {\r\n              Logger.info('Chronicle loaded', { entryCount: result.data.entries.length });\r\n            }\r\n          } else {\r\n            Logger.error('Failed to load chronicle', result.error);\r\n            get().showNotification(result.error.message, 'error');\r\n          }\r\n        } catch (error) {\r\n          Logger.error('Failed to load chronicle', error);\r\n          get().showNotification('Failed to load chronicle', 'error');\r\n        }\r\n      },\r\n\r\n      saveChronicleEntry: async (entry: ChronicleEntry) => {\r\n        try {\r\n          const result = await ChronicleService.saveChronicleEntry(entry);\r\n          if (result.success) {\r\n            await get().loadChronicle(); // Reload to get updated chronicle\r\n            get().showNotification('Chronicle entry saved', 'success');\r\n            Logger.info('Chronicle entry saved', { missionId: entry.missionId });\r\n          } else {\r\n            Logger.error('Failed to save chronicle entry', result.error);\r\n            get().showNotification(result.error.message, 'error');\r\n          }\r\n        } catch (error) {\r\n          Logger.error('Failed to save chronicle entry', error);\r\n          get().showNotification('Failed to save chronicle entry', 'error');\r\n        }\r\n      },\r\n\r\n      generateHeritageModifiers: async (entry: ChronicleEntry) => {\r\n        try {\r\n          const result = ChronicleService.generateHeritageModifiers(entry);\r\n          if (result.success) {\r\n            set({ availableHeritageModifiers: result.data });\r\n            get().showNotification(`Generated ${result.data.length} heritage modifiers`, 'success');\r\n            Logger.info('Heritage modifiers generated', { count: result.data.length });\r\n          } else {\r\n            Logger.error('Failed to generate heritage modifiers', result.error);\r\n            get().showNotification(result.error.message, 'error');\r\n          }\r\n        } catch (error) {\r\n          Logger.error('Failed to generate heritage modifiers', error);\r\n          get().showNotification('Failed to generate heritage modifiers', 'error');\r\n        }\r\n      },\r\n\r\n      selectHeritageModifiers: (modifiers: HeritageModifier[]) => {\r\n        set({ selectedHeritageModifiers: modifiers });\r\n        Logger.info('Heritage modifiers selected', { count: modifiers.length });\r\n      },\r\n\r\n      applyHeritageModifiers: async () => {\r\n        try {\r\n          const { selectedHeritageModifiers, selectedMission } = get();\r\n          if (!selectedMission) {\r\n            get().showNotification('No mission selected for heritage application', 'error');\r\n            return;\r\n          }\r\n\r\n          const result = HeritageService.applyHeritageModifiers(selectedHeritageModifiers, selectedMission);\r\n\r\n          // Apply resource changes to current resources\r\n          const currentResources = get().resources;\r\n          const updatedResources = { ...currentResources };\r\n          Object.entries(result.resourceChanges).forEach(([resource, change]) => {\r\n            if (updatedResources[resource as keyof typeof updatedResources] !== undefined) {\r\n              (updatedResources as any)[resource] += change;\r\n            }\r\n          });\r\n\r\n          set({ resources: updatedResources });\r\n          get().showNotification(`Applied ${result.appliedModifiers.length} heritage modifiers`, 'success');\r\n          Logger.info('Heritage modifiers applied', {\r\n            count: result.appliedModifiers.length,\r\n            warnings: result.warnings.length\r\n          });\r\n        } catch (error) {\r\n          Logger.error('Failed to apply heritage modifiers', error);\r\n          get().showNotification('Failed to apply heritage modifiers', 'error');\r\n        }\r\n      },\r\n\r\n      exportChronicle: () => {\r\n        try {\r\n          const { chronicle } = get();\r\n          if (!chronicle) {\r\n            get().showNotification('No chronicle to export', 'error');\r\n            return null;\r\n          }\r\n\r\n          const exportData = ChronicleService.exportChronicle(chronicle);\r\n          Logger.info('Chronicle exported');\r\n          return exportData;\r\n        } catch (error) {\r\n          Logger.error('Failed to export chronicle', error);\r\n          get().showNotification('Failed to export chronicle', 'error');\r\n          return null;\r\n        }\r\n      },\r\n\r\n      recordDecision: (decision: DecisionInput) => {\r\n        try {\r\n          const { selectedMission } = get();\r\n          if (!selectedMission) {\r\n            Logger.warn('Cannot record decision without active mission');\r\n            return;\r\n          }\r\n\r\n          const entry = DecisionTrackingService.recordDecision(decision, selectedMission);\r\n          get().showNotification('Decision recorded in chronicle', 'success');\r\n          Logger.info('Decision recorded', { decisionId: entry.id, title: decision.title });\r\n        } catch (error) {\r\n          Logger.error('Failed to record decision', error);\r\n          get().showNotification('Failed to record decision', 'error');\r\n        }\r\n      },\r\n\r\n      // Pacing System Actions\r\n      initializePacing: async (mission?: any) => {\r\n        try {\r\n          const { pacingPreferences, chronicle } = get();\r\n          const targetMission = mission || get().selectedMission;\r\n\r\n          if (!targetMission) {\r\n            Logger.warn('Cannot initialize pacing without mission');\r\n            return;\r\n          }\r\n\r\n          const pacingState = PacingService.calculateOptimalPacing(\r\n            targetMission,\r\n            pacingPreferences,\r\n            chronicle || undefined\r\n          );\r\n\r\n          set({ pacingState });\r\n          await PacingService.savePacingState(pacingState);\r\n          get().showNotification('Pacing system initialized', 'success');\r\n          Logger.info('Pacing system initialized', { phase: pacingState.currentPhase });\r\n        } catch (error) {\r\n          Logger.error('Failed to initialize pacing', error);\r\n          get().showNotification('Failed to initialize pacing', 'error');\r\n        }\r\n      },\r\n\r\n      updatePacingState: (updates: Partial<PacingState>) => {\r\n        const { pacingState } = get();\r\n        if (!pacingState) return;\r\n\r\n        const newState = { ...pacingState, ...updates };\r\n        set({ pacingState: newState });\r\n        PacingService.savePacingState(newState).catch(error => {\r\n          Logger.error('Failed to save pacing state', error);\r\n        });\r\n      },\r\n\r\n      updatePacingPreferences: (preferences: PacingPreferences) => {\r\n        set({ pacingPreferences: preferences });\r\n        Logger.info('Pacing preferences updated');\r\n      },\r\n\r\n      pauseTime: () => {\r\n        get().updatePacingState({ timeAcceleration: 0 });\r\n        get().showNotification('Time paused', 'info');\r\n      },\r\n\r\n      resumeTime: () => {\r\n        const { pacingPreferences } = get();\r\n        const defaultAcceleration = pacingPreferences.preferredSpeed === 'slow' ? 0.5 :\r\n                                   pacingPreferences.preferredSpeed === 'fast' ? 2.0 : 1.0;\r\n        get().updatePacingState({ timeAcceleration: defaultAcceleration });\r\n        get().showNotification('Time resumed', 'info');\r\n      },\r\n\r\n      forceTimeAcceleration: (acceleration: number) => {\r\n        get().updatePacingState({ timeAcceleration: acceleration });\r\n        get().showNotification(`Time acceleration set to ${acceleration}x`, 'info');\r\n      },\r\n\r\n      // Legacy Deck Actions\r\n      initializeLegacyDecks: async () => {\r\n        try {\r\n          const { playerLegacy, availableHeritageModifiers } = get();\r\n\r\n          // For now, just initialize empty decks\r\n          // In a full implementation, this would load cards from heritage modifiers\r\n          Logger.info('Legacy decks initialized', { legacy: playerLegacy });\r\n          get().showNotification('Legacy decks initialized', 'success');\r\n        } catch (error) {\r\n          Logger.error('Failed to initialize legacy decks', error);\r\n          get().showNotification('Failed to initialize legacy decks', 'error');\r\n        }\r\n      },\r\n\r\n      checkCardTriggers: () => {\r\n        try {\r\n          const { legacyDecks, playerLegacy, selectedMission } = get();\r\n          if (!selectedMission) return;\r\n\r\n          const currentDeck = legacyDecks[playerLegacy];\r\n          const triggers = LegacyDeckService.checkCardTriggers(currentDeck, selectedMission);\r\n\r\n          set({ pendingCardChoices: triggers });\r\n          if (triggers.length > 0) {\r\n            get().showNotification(`${triggers.length} legacy cards triggered`, 'info');\r\n          }\r\n        } catch (error) {\r\n          Logger.error('Failed to check card triggers', error);\r\n        }\r\n      },\r\n\r\n      triggerCard: (cardId: string) => {\r\n        const { pendingCardChoices } = get();\r\n        const trigger = pendingCardChoices.find(t => t.card.id === cardId);\r\n\r\n        if (trigger) {\r\n          set({ activeCards: [...get().activeCards, trigger.card] });\r\n          get().showNotification(`Legacy card activated: ${trigger.card.name}`, 'info');\r\n          Logger.info('Legacy card triggered', { cardId, cardName: trigger.card.name });\r\n        }\r\n      },\r\n\r\n      resolveCardChoice: (cardId: string, choiceId: string) => {\r\n        try {\r\n          const { activeCards, selectedMission } = get();\r\n          const card = activeCards.find(c => c.id === cardId);\r\n          const choice = card?.choices.find(c => c.id === choiceId);\r\n\r\n          if (!card || !choice || !selectedMission) {\r\n            Logger.warn('Invalid card choice resolution', { cardId, choiceId });\r\n            return;\r\n          }\r\n\r\n          const result = LegacyDeckService.resolveCardChoice(card, choice, selectedMission);\r\n\r\n          // Remove card from active cards\r\n          set({ activeCards: activeCards.filter(c => c.id !== cardId) });\r\n\r\n          get().showNotification(`Card resolved: ${result.narrativeOutcome}`, 'success');\r\n          Logger.info('Card choice resolved', { cardId, choiceId, outcome: result.narrativeOutcome });\r\n        } catch (error) {\r\n          Logger.error('Failed to resolve card choice', error);\r\n          get().showNotification('Failed to resolve card choice', 'error');\r\n        }\r\n      },\r\n\r\n      rateCard: (cardId: string, rating: number) => {\r\n        const { legacyDecks, playerLegacy } = get();\r\n        const deck = legacyDecks[playerLegacy];\r\n\r\n        const updatedDeck = LegacyDeckService.applyCuration(deck, cardId, 'rate', rating);\r\n\r\n        set({\r\n          legacyDecks: {\r\n            ...legacyDecks,\r\n            [playerLegacy]: updatedDeck\r\n          }\r\n        });\r\n\r\n        get().showNotification(`Card rated: ${rating}/5`, 'success');\r\n      },\r\n\r\n      customizeCard: (cardId: string, modifications: any[]) => {\r\n        const { legacyDecks, playerLegacy } = get();\r\n        const deck = legacyDecks[playerLegacy];\r\n\r\n        const updatedDeck = LegacyDeckService.applyCuration(deck, cardId, 'modify', modifications);\r\n\r\n        set({\r\n          legacyDecks: {\r\n            ...legacyDecks,\r\n            [playerLegacy]: updatedDeck\r\n          }\r\n        });\r\n\r\n        get().showNotification('Card customized', 'success');\r\n      },\r\n\r\n      cleanup: () => {\r\n        const { resourceIntervalId } = get();\r\n        if (resourceIntervalId) {\r\n          clearInterval(resourceIntervalId);\r\n          set({ resourceIntervalId: null });\r\n          Logger.info('Game store cleanup completed');\r\n        }\r\n      }\r\n    }),\r\n    {\r\n      name: 'stellar-legacy-storage',\r\n      partialize: (state) => ({\r\n        ...state,\r\n        notifications: [], // Don't persist notifications\r\n        resourceIntervalId: null, // Don't persist interval ID\r\n      })\r\n    }\r\n  )\r\n);\r\n\r\n// Cleanup function to clear intervals and prevent memory leaks\r\nexport const cleanupGameStore = () => {\r\n  useGameStore.getState().cleanup();\r\n};","usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\stores\\useGenerationalMissionStore.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":38,"column":63,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":38,"endColumn":66,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1511,1514],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1511,1514],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":39,"column":73,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":39,"endColumn":76,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1599,1602],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1599,1602],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":42,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":42,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1702,1705],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1702,1705],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":107,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":107,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3548,3551],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3548,3551],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":108,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":108,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3595,3598],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3595,3598],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":216,"column":71,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":216,"endColumn":74,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7733,7736],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7733,7736],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":228,"column":67,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":228,"endColumn":70,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8167,8170],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8167,8170],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":271,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":271,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10035,10038],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10035,10038],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":276,"column":53,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":276,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10185,10188],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10185,10188],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// stores/useGenerationalMissionStore.ts\r\nimport { create } from 'zustand';\r\nimport { persist } from 'zustand/middleware';\r\nimport type {\r\n  GenerationalMission,\r\n  LegacyRelation\r\n} from '../types/generationalMissions';\r\nimport type { LegacyTypeType, MissionObjectiveType } from '../types/enums';\r\nimport { MissionService } from '../services/MissionService';\r\nimport { EventService } from '../services/EventService';\r\nimport { LegacyService } from '../services/LegacyService';\r\nimport Logger from '../utils/logger';\r\n\r\ninterface GenerationalMissionStore {\r\n  // State\r\n  missions: GenerationalMission[];\r\n  activeMissions: string[];\r\n  selectedMission: GenerationalMission | null;\r\n  legacyRelations: LegacyRelation[];\r\n  playerLegacyAffinity: Record<LegacyTypeType, number>;\r\n\r\n  // UI State\r\n  selectedEventId: string | null;\r\n  missionCreationConfig: Partial<MissionCreationConfig> | null;\r\n\r\n  // Actions - Mission Management\r\n  createMission: (config: MissionCreationConfig) => void;\r\n  selectMission: (missionId: string | null) => void;\r\n  processMissionTurn: (missionId: string, yearsElapsed?: number) => void;\r\n  completeMission: (missionId: string) => void;\r\n\r\n  // Actions - Event Management\r\n  selectEvent: (eventId: string | null) => void;\r\n  resolveEvent: (missionId: string, eventId: string, outcomeId: string) => void;\r\n  forceEventGeneration: (missionId: string, category?: string) => void;\r\n\r\n  // Actions - Automation Management\r\n  updateAutomationConfig: (missionId: string, config: Partial<any>) => void;\r\n  overrideAIDecision: (missionId: string, decisionId: string, override: any) => void;\r\n\r\n  // Actions - Legacy Management\r\n  processLegacyDilemma: (missionId: string, choice: any) => void;\r\n  updateLegacyRelations: (fromLegacy: LegacyTypeType, toLegacy: LegacyTypeType, change: number) => void;\r\n\r\n  // Utility Actions\r\n  getAllActiveMissions: () => GenerationalMission[];\r\n  getMissionsByObjective: (objective: MissionObjectiveType) => GenerationalMission[];\r\n  getMissionsByLegacy: (legacy: LegacyTypeType) => GenerationalMission[];\r\n}\r\n\r\ninterface MissionCreationConfig {\r\n  name: string;\r\n  legacy: LegacyTypeType;\r\n  objective: MissionObjectiveType;\r\n  targetSystemId: string;\r\n  estimatedDuration: number;\r\n  shipClass: string;\r\n  shipSize: string;\r\n  populationSize: number;\r\n}\r\n\r\nexport const useGenerationalMissionStore = create<GenerationalMissionStore>()(\r\n  persist(\r\n    (set, get) => ({\r\n      // Initial State\r\n      missions: [],\r\n      activeMissions: [],\r\n      selectedMission: null,\r\n      legacyRelations: [\r\n        {\r\n          fromLegacy: 'preservers',\r\n          toLegacy: 'adaptors',\r\n          relationship: -20,\r\n          recentEvents: [],\r\n          tradeAgreements: []\r\n        },\r\n        {\r\n          fromLegacy: 'preservers',\r\n          toLegacy: 'wanderers',\r\n          relationship: 10,\r\n          recentEvents: [],\r\n          tradeAgreements: []\r\n        },\r\n        {\r\n          fromLegacy: 'adaptors',\r\n          toLegacy: 'wanderers',\r\n          relationship: -30,\r\n          recentEvents: [],\r\n          tradeAgreements: []\r\n        }\r\n      ],\r\n      playerLegacyAffinity: {\r\n        preservers: 0,\r\n        adaptors: 0,\r\n        wanderers: 0\r\n      },\r\n\r\n      // UI State\r\n      selectedEventId: null,\r\n      missionCreationConfig: null,\r\n\r\n      // Mission Management Actions\r\n      createMission: (config: MissionCreationConfig) => {\r\n        try {\r\n          const mission = MissionService.createMission({\r\n            ...config,\r\n            shipClass: config.shipClass as any,\r\n            shipSize: config.shipSize as any\r\n          });\r\n\r\n          set(state => ({\r\n            missions: [...state.missions, mission],\r\n            activeMissions: [...state.activeMissions, mission.id],\r\n            selectedMission: mission\r\n          }));\r\n\r\n          // Update legacy affinity\r\n          get().updateLegacyRelations(config.legacy, config.legacy, 10);\r\n\r\n          Logger.info(`Created generational mission: ${mission.name}`, {\r\n            legacy: mission.legacy,\r\n            objective: mission.objective\r\n          });\r\n        } catch (error) {\r\n          Logger.error('Failed to create mission', error);\r\n        }\r\n      },\r\n\r\n      selectMission: (missionId: string | null) => {\r\n        const mission = missionId ? get().missions.find(m => m.id === missionId) || null : null;\r\n        set({ selectedMission: mission, selectedEventId: null });\r\n      },\r\n\r\n      processMissionTurn: (missionId: string, yearsElapsed: number = 1) => {\r\n        const mission = get().missions.find(m => m.id === missionId);\r\n        if (!mission) return;\r\n\r\n        try {\r\n          const result = MissionService.processMissionTurn(mission, yearsElapsed);\r\n\r\n          set(state => ({\r\n            missions: state.missions.map(m => m.id === missionId ? result.mission : m),\r\n            selectedMission: state.selectedMission?.id === missionId ? result.mission : state.selectedMission\r\n          }));\r\n\r\n          // Show notification if requires attention\r\n          if (result.requiresPlayerAttention) {\r\n            // Would integrate with main game notification system\r\n            Logger.info(`Mission ${mission.name} requires player attention`);\r\n          }\r\n\r\n        } catch (error) {\r\n          Logger.error('Failed to process mission turn', error);\r\n        }\r\n      },\r\n\r\n      completeMission: (missionId: string) => {\r\n        const mission = get().missions.find(m => m.id === missionId);\r\n        if (!mission) return;\r\n\r\n        set(state => ({\r\n          activeMissions: state.activeMissions.filter(id => id !== missionId),\r\n          selectedMission: state.selectedMission?.id === missionId ? null : state.selectedMission\r\n        }));\r\n\r\n        // Update legacy affinity based on success\r\n        const affinityChange = mission.successLevel === 'complete' ? 20 :\r\n                              mission.successLevel === 'partial' ? 10 :\r\n                              mission.successLevel === 'pyrrhic' ? 5 : -10;\r\n\r\n        get().updateLegacyRelations(mission.legacy, mission.legacy, affinityChange);\r\n\r\n        Logger.info(`Completed mission: ${mission.name}`, {\r\n          successLevel: mission.successLevel\r\n        });\r\n      },\r\n\r\n      // Event Management Actions\r\n      selectEvent: (eventId: string | null) => {\r\n        set({ selectedEventId: eventId });\r\n      },\r\n\r\n      resolveEvent: (missionId: string, eventId: string, outcomeId: string) => {\r\n        const mission = get().missions.find(m => m.id === missionId);\r\n        const event = mission?.activeEvents.find(e => e.id === eventId);\r\n\r\n        if (!mission || !event) return;\r\n\r\n        try {\r\n          const resolution = EventService.resolveEventWithChoice(event, outcomeId, mission);\r\n\r\n          if (resolution.success) {\r\n            // Move event to history\r\n            mission.eventHistory.push(event);\r\n            mission.activeEvents = mission.activeEvents.filter(e => e.id !== eventId);\r\n\r\n            set(state => ({\r\n              missions: state.missions.map(m => m.id === missionId ? mission : m),\r\n              selectedMission: state.selectedMission?.id === missionId ? mission : state.selectedMission,\r\n              selectedEventId: null\r\n            }));\r\n\r\n            Logger.info(`Resolved event: ${event.title}`, {\r\n              outcome: resolution.outcome?.title\r\n            });\r\n          }\r\n        } catch (error) {\r\n          Logger.error('Failed to resolve event', error);\r\n        }\r\n      },\r\n\r\n      forceEventGeneration: (missionId: string, category?: string) => {\r\n        const mission = get().missions.find(m => m.id === missionId);\r\n        if (!mission) return;\r\n\r\n        const event = EventService.generateEvent(mission, category as any);\r\n        if (event) {\r\n          mission.activeEvents.push(event);\r\n\r\n          set(state => ({\r\n            missions: state.missions.map(m => m.id === missionId ? mission : m),\r\n            selectedMission: state.selectedMission?.id === missionId ? mission : state.selectedMission\r\n          }));\r\n        }\r\n      },\r\n\r\n      // Automation Management Actions\r\n      updateAutomationConfig: (missionId: string, config: Partial<any>) => {\r\n        set(state => ({\r\n          missions: state.missions.map(mission => {\r\n            if (mission.id === missionId) {\r\n              return {\r\n                ...mission,\r\n                automationConfig: { ...mission.automationConfig, ...config }\r\n              };\r\n            }\r\n            return mission;\r\n          })\r\n        }));\r\n      },\r\n\r\n      overrideAIDecision: (targetMissionId: string, decisionId: string, overrideData: unknown) => {\r\n        // Implementation for overriding AI decisions\r\n        Logger.info(`Override AI decision: ${decisionId}`, { targetMissionId, override: overrideData });\r\n      },\r\n\r\n      // Legacy Management Actions\r\n      processLegacyDilemma: (missionId: string, choice: 'tradition' | 'adaptation' | 'compromise' | 'genetic' | 'cybernetic' | 'biological' | 'reject' | 'raid' | 'trade' | 'scavenge' | 'conserve') => {\r\n        const mission = get().missions.find(m => m.id === missionId);\r\n        if (!mission) return;\r\n\r\n        try {\r\n          let result;\r\n          switch (mission.legacy) {\r\n            case 'preservers':\r\n              result = LegacyService.processPreserversDialemma(mission, choice as 'tradition' | 'adaptation' | 'compromise');\r\n              break;\r\n            case 'adaptors':\r\n              result = LegacyService.processAdaptorsEvolution(mission, choice as 'genetic' | 'cybernetic' | 'biological' | 'reject');\r\n              break;\r\n            case 'wanderers':\r\n              result = LegacyService.processWanderersSurvival(mission, choice as 'raid' | 'trade' | 'scavenge' | 'conserve');\r\n              break;\r\n            default:\r\n              return;\r\n          }\r\n\r\n          // Apply results to mission\r\n          Object.entries(result.resourceChanges).forEach(([resource, change]) => {\r\n            if (change !== undefined) {\r\n              (mission.resources as any)[resource] += change;\r\n            }\r\n          });\r\n\r\n          // Apply population effects\r\n          result.populationEffects.forEach((effect: any) => {\r\n            const cohort = mission.population.cohorts.find(c => c.type === effect.cohortType);\r\n            if (cohort) {\r\n              switch (effect.effectType) {\r\n                case 'count':\r\n                  cohort.count = Math.max(0, cohort.count + effect.magnitude);\r\n                  break;\r\n                case 'effectiveness':\r\n                  cohort.effectiveness = Math.max(0, Math.min(1, cohort.effectiveness + effect.magnitude));\r\n                  break;\r\n                case 'morale':\r\n                  cohort.morale = Math.max(0, Math.min(100, cohort.morale + effect.magnitude));\r\n                  break;\r\n              }\r\n            }\r\n          });\r\n\r\n          set(state => ({\r\n            missions: state.missions.map(m => m.id === missionId ? mission : m),\r\n            selectedMission: state.selectedMission?.id === missionId ? mission : state.selectedMission\r\n          }));\r\n\r\n          Logger.info(`Processed legacy dilemma for ${mission.legacy}`, {\r\n            choice,\r\n            consequences: result.longTermConsequences\r\n          });\r\n\r\n        } catch (error) {\r\n          Logger.error('Failed to process legacy dilemma', error);\r\n        }\r\n      },\r\n\r\n      updateLegacyRelations: (fromLegacy: LegacyTypeType, toLegacy: LegacyTypeType, change: number) => {\r\n        set(state => ({\r\n          legacyRelations: state.legacyRelations.map(relation => {\r\n            if (relation.fromLegacy === fromLegacy && relation.toLegacy === toLegacy) {\r\n              return {\r\n                ...relation,\r\n                relationship: Math.max(-100, Math.min(100, relation.relationship + change))\r\n              };\r\n            }\r\n            return relation;\r\n          }),\r\n          playerLegacyAffinity: {\r\n            ...state.playerLegacyAffinity,\r\n            [fromLegacy]: Math.max(-100, Math.min(100, state.playerLegacyAffinity[fromLegacy] + change))\r\n          }\r\n        }));\r\n      },\r\n\r\n      // Utility Actions\r\n      getAllActiveMissions: () => {\r\n        return get().missions.filter(mission => get().activeMissions.includes(mission.id));\r\n      },\r\n\r\n      getMissionsByObjective: (objective: MissionObjectiveType) => {\r\n        return get().missions.filter(mission => mission.objective === objective);\r\n      },\r\n\r\n      getMissionsByLegacy: (legacy: LegacyTypeType) => {\r\n        return get().missions.filter(mission => mission.legacy === legacy);\r\n      }\r\n    }),\r\n    {\r\n      name: 'generational-mission-storage',\r\n      partialize: (state) => ({\r\n        missions: state.missions,\r\n        activeMissions: state.activeMissions,\r\n        legacyRelations: state.legacyRelations,\r\n        playerLegacyAffinity: state.playerLegacyAffinity\r\n        // Don't persist UI state like selectedMission, selectedEventId\r\n      })\r\n    }\r\n  )\r\n);\r\n\r\n// Helper hook for current mission data\r\nexport const useCurrentMission = () => {\r\n  const selectedMission = useGenerationalMissionStore(state => state.selectedMission);\r\n  return selectedMission;\r\n};\r\n\r\n// Helper hook for active events\r\nexport const useActiveEvents = () => {\r\n  const selectedMission = useGenerationalMissionStore(state => state.selectedMission);\r\n  return selectedMission?.activeEvents || [];\r\n};\r\n\r\n// Helper hook for mission status\r\nexport const useMissionStatus = (missionId?: string) => {\r\n  const missions = useGenerationalMissionStore(state => state.missions);\r\n  const activeMissions = useGenerationalMissionStore(state => state.activeMissions);\r\n\r\n  if (!missionId) return null;\r\n\r\n  const mission = missions.find(m => m.id === missionId);\r\n  const isActive = activeMissions.includes(missionId);\r\n\r\n  return {\r\n    mission,\r\n    isActive,\r\n    requiresAttention: mission?.activeEvents.some(e => e.requiresPlayerDecision) || false\r\n  };\r\n};","usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\test\\setup.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\types\\branded.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\types\\chronicle.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'EventCategoryType' is defined but never used.","line":2,"column":49,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":66}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// types/chronicle.ts\nimport type { LegacyTypeType, MissionPhaseType, EventCategoryType } from './enums';\nimport type { ExtendedResources, LegacyRelation } from './generationalMissions';\n\nexport class Chronicle {\n  id!: string;\n  version!: string; // For migration compatibility\n  playerName!: string;\n  createdAt!: Date;\n  lastUpdated!: Date;\n  entries!: ChronicleEntry[];\n  galaxyState!: GalaxyState;\n  playerLegacy!: PlayerLegacyHistory;\n}\n\nexport class ChronicleEntry {\n  missionId!: string;\n  missionName!: string;\n  missionNumber!: number; // Sequential mission counter\n  startedAt!: Date;\n  completedAt!: Date;\n  realDuration!: number; // Real-world hours played\n\n  // Mission Parameters\n  startingLegacy!: LegacyTypeType;\n  targetSystem!: string;\n  estimatedDuration!: number; // Mission years\n  actualDuration!: number; // Actual mission years\n\n  // Mission Outcome\n  successLevel!: SuccessLevel;\n  dominantLegacy!: LegacyTypeType;\n  populationOutcome!: PopulationOutcome;\n  settlementResult!: SettlementResult | null;\n\n  // Player Choices\n  keyDecisions!: ChronicleDecision[];\n  decisionMetrics!: DecisionMetrics;\n\n  // Final State\n  finalResources!: ExtendedResources;\n  finalPopulation!: PopulationSnapshot;\n  culturalState!: CulturalSnapshot;\n  legacyRelationships!: LegacyRelation[];\n\n  // Generated Artifacts\n  artifacts!: ChronicleArtifact[];\n  discoveries!: Discovery[];\n  legacyEvolution!: LegacyEvolution[];\n\n  // Performance Metrics\n  playerEngagement!: EngagementMetrics;\n  aiPerformance!: AIPerformanceSnapshot;\n}\n\nexport type SuccessLevel = 'complete' | 'partial' | 'pyrrhic' | 'failure' | 'abandoned';\nexport type PopulationOutcome = 'thrived' | 'survived' | 'diminished' | 'transformed' | 'extinct';\n\nexport class ChronicleDecision {\n  id!: string;\n  title!: string;\n  description!: string;\n  context!: string;\n  year!: number;\n  generation!: number;\n  phase!: MissionPhaseType;\n\n  // Decision Details\n  category!: DecisionCategory;\n  choice!: string;\n  alternatives!: string[];\n  urgency!: DecisionUrgency;\n  scope!: DecisionScope;\n\n  // Impact Assessment\n  immediateConsequences!: ImmediateConsequence[];\n  predictedLongTermEffects!: string[];\n  actualLongTermEffects!: LongTermEffect[]; // Filled in over time\n\n  // Context References\n  referencedDecisions!: string[]; // IDs of previous decisions this references\n  chronicleWeight!: number; // How much this decision influences future chronicles (0-1)\n  legacyAlignment!: Record<LegacyTypeType, number>; // How much each legacy approved (-1 to 1)\n}\n\nexport type DecisionCategory = 'resource' | 'population' | 'cultural' | 'diplomatic' | 'crisis' | 'exploration' | 'legacy';\nexport type DecisionUrgency = 'immediate' | 'urgent' | 'moderate' | 'routine';\nexport type DecisionScope = 'individual' | 'cohort' | 'dynasty' | 'legacy' | 'civilization';\n\nexport class ImmediateConsequence {\n  type!: 'resource' | 'population' | 'relationship' | 'event';\n  description!: string;\n  magnitude!: number; // -1 to 1, where 1 is very positive\n  affectedTargets!: string[];\n}\n\nexport class LongTermEffect {\n  manifestYear!: number;\n  description!: string;\n  severity!: 'minor' | 'moderate' | 'major' | 'civilization-defining';\n  chainReaction!: boolean; // Did this cause other effects?\n  playerPredicted!: boolean; // Did the player anticipate this?\n}\n\nexport class ChronicleConsequence {\n  type!: 'immediate' | 'delayed' | 'cascade';\n  description!: string;\n  impacts!: ImmediateConsequence[];\n  futureEffects!: LongTermEffect[];\n  severity!: 'minor' | 'moderate' | 'major' | 'civilization-defining';\n}\n\nexport class ChronicleArtifact {\n  id!: string;\n  name!: string;\n  type!: ArtifactType;\n  description!: string;\n  origin!: ArtifactOrigin;\n\n  // Gameplay Effects\n  heritageModifiers!: string[]; // References to HeritageModifier IDs\n  deckCards!: string[]; // References to LegacyCardTemplate IDs\n  unlockConditions!: string[];\n\n  // Narrative Elements\n  flavorText!: string;\n  discoveryNarrative!: string;\n  legacySignificance!: Record<LegacyTypeType, number>;\n}\n\nexport type ArtifactType = 'technology' | 'cultural' | 'genetic' | 'historical' | 'philosophical' | 'artistic';\n\nexport class ArtifactOrigin {\n  sourceDecision!: string | null;\n  sourceEvent!: string | null;\n  sourceGeneration!: number;\n  circumstances!: string;\n}\n\nexport class Discovery {\n  id!: string;\n  name!: string;\n  type!: 'scientific' | 'historical' | 'resource' | 'anomaly' | 'contact';\n  description!: string;\n  location!: string;\n  year!: number;\n  significance!: number; // 0-1, how important this discovery is\n\n  // Impact\n  resourceValue!: Partial<ExtendedResources>;\n  knowledgeValue!: number;\n  culturalImpact!: string[];\n  futureImplications!: string[];\n}\n\nexport class LegacyEvolution {\n  legacy!: LegacyTypeType;\n  originalTraits!: string[];\n  evolvedTraits!: string[];\n  deviationMagnitude!: number; // How far from baseline\n  evolutionTriggers!: string[]; // What caused the evolution\n  stabilityRating!: number; // How stable this evolution is\n}\n\nexport class GalaxyState {\n  exploredSystems!: string[];\n  establishedColonies!: SettlementResult[];\n  knownThreats!: string[];\n  diplomaticRelations!: Record<string, number>;\n  sharedKnowledge!: Discovery[];\n}\n\nexport class PlayerLegacyHistory {\n  preferredLegacy!: LegacyTypeType;\n  legacyExperience!: Record<LegacyTypeType, number>;\n  characteristicChoices!: string[];\n  narrativePreferences!: NarrativePreferences;\n}\n\nexport class NarrativePreferences {\n  preferredComplexity!: 'simple' | 'moderate' | 'complex';\n  decisionSpeed!: 'deliberate' | 'moderate' | 'quick';\n  riskTolerance!: 'conservative' | 'balanced' | 'bold';\n  contentFocus!: ContentFocus;\n}\n\nexport class ContentFocus {\n  exploration!: number; // 0-1\n  diplomacy!: number; // 0-1\n  technology!: number; // 0-1\n  culture!: number; // 0-1\n  survival!: number; // 0-1\n}\n\nexport class SettlementResult {\n  name!: string;\n  location!: string;\n  populationType!: 'pure-human' | 'adapted' | 'hybrid' | 'neo-human';\n  culturalType!: 'preserver' | 'adaptor' | 'wanderer' | 'hybrid';\n  status!: 'thriving' | 'struggling' | 'isolated' | 'lost' | 'transformed';\n  influence!: number; // How much this settlement affects future missions\n  establishedYear!: number;\n  lastContact!: number;\n}\n\nexport class DecisionMetrics {\n  totalDecisions!: number;\n  averageDecisionTime!: number; // seconds\n  consensusRate!: number; // how often player chose popular option\n  innovationRate!: number; // how often player chose unique options\n  legacyConsistency!: Record<LegacyTypeType, number>; // how consistently player follows each legacy\n}\n\nexport class PopulationSnapshot {\n  total!: number;\n  byLegacy!: Record<LegacyTypeType, number>;\n  byCohort!: Record<string, number>;\n  averageAge!: number;\n  morale!: number;\n  unity!: number;\n  culturalDrift!: number;\n}\n\nexport class CulturalSnapshot {\n  dominantValues!: string[];\n  emergentTraditions!: string[];\n  languageEvolution!: string[];\n  artStyles!: string[];\n  religiousBeliefs!: string[];\n  technicalPhilosophies!: string[];\n}\n\nexport class EngagementMetrics {\n  totalPlayTime!: number; // hours\n  activeDecisionTime!: number; // hours spent actively making decisions\n  automationUsage!: number; // percentage of time automated\n  eventsTriggered!: number;\n  eventsResolved!: number;\n  playerInitiatedActions!: number;\n  averageSessionLength!: number; // minutes\n}\n\nexport class AIPerformanceSnapshot {\n  decisionsAutomated!: number;\n  playerOverrides!: number;\n  successfulPredictions!: number;\n  averageConfidence!: number; // 0-1\n  learningProgress!: number; // how well AI adapted to player preferences\n}\n\n// Utility types for validation and processing\nexport interface ChronicleValidationResult {\n  isValid: boolean;\n  errors: string[];\n  warnings: string[];\n}\n\nexport interface ChronicleExportData {\n  chronicle: Chronicle;\n  metadata: {\n    exportedAt: Date;\n    version: string;\n    checksum: string;\n  };\n}\n\nexport interface ChronicleSearchCriteria {\n  legacyFilter?: LegacyTypeType[];\n  successLevelFilter?: SuccessLevel[];\n  timeRangeFilter?: {\n    startDate: Date;\n    endDate: Date;\n  };\n  textSearch?: string;\n  minimumDuration?: number;\n  maximumDuration?: number;\n}\n\nexport interface ChronicleStatistics {\n  totalMissions: number;\n  totalPlayTime: number;\n  successRate: number;\n  favoriteSpaces: string[];\n  mostUsedChoices: string[];\n  legacyDistribution: Record<LegacyTypeType, number>;\n  averageMissionDuration: number;\n  decisionPatterns: Record<string, number>;\n}","usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\types\\enums.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\types\\errors.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":34,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":34,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[899,902],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[899,902],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// types/errors.ts\r\nimport type { ComponentCost } from './game';\r\n\r\nexport class GameOperationError extends Error {\r\n  public readonly operation: string;\r\n  public readonly reason: string;\r\n  public readonly requiredResources?: ComponentCost;\r\n\r\n  constructor(\r\n    operation: string,\r\n    reason: string,\r\n    requiredResources?: ComponentCost\r\n  ) {\r\n    super(`${operation} failed: ${reason}`);\r\n    this.name = 'GameOperationError';\r\n    this.operation = operation;\r\n    this.reason = reason;\r\n    this.requiredResources = requiredResources;\r\n  }\r\n}\r\n\r\nexport type GameOperationResult<T> =\r\n  | { success: true; data: T }\r\n  | { success: false; error: GameOperationError };\r\n\r\nexport interface ValidationResult {\r\n  isValid: boolean;\r\n  message?: string;\r\n}\r\n\r\nexport type GameError = {\r\n  type: 'VALIDATION' | 'RESOURCE' | 'NETWORK' | 'UNKNOWN';\r\n  message: string;\r\n  context?: Record<string, any>;\r\n};","usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\types\\game.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\types\\generationalMissions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\types\\heritage.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\types\\legacyDecks.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":82,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":82,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2459,2462],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2459,2462],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":270,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":270,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7960,7963],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7960,7963],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// types/legacyDecks.ts\nimport type { LegacyTypeType, MissionPhaseType } from './enums';\nimport type { ExtendedResources } from './generationalMissions';\nimport type { LongTermEffect, ChronicleConsequence } from './chronicle';\n\nexport class LegacyDeck {\n  legacy!: LegacyTypeType;\n  cards!: LegacyCard[];\n  activeCards!: string[]; // Cards currently in play\n  discardPile!: string[];\n\n  // Deck Composition\n  baseCards!: string[]; // Always present in this legacy's deck\n  chronicleCards!: string[]; // Added from chronicle history\n  customCards!: string[]; // Player-created or modified\n\n  // Deck Statistics\n  totalPlays!: number;\n  averageImpact!: number;\n  playerSatisfaction!: number;\n  balanceRating!: number;\n\n  // Curation Settings\n  playerFilters!: DeckFilter[];\n  cardRatings!: Record<string, number>;\n  disabledCards!: string[];\n}\n\nexport class LegacyCard {\n  id!: string;\n  name!: string;\n  type!: CardType;\n  legacy!: LegacyTypeType;\n  tier!: CardTier;\n\n  // Card Content\n  title!: string;\n  description!: string;\n  flavorText!: string;\n  artwork!: string | null;\n\n  // Gameplay Mechanics\n  triggerConditions!: CardTrigger[];\n  effects!: CardEffect[];\n  choices!: CardChoice[];\n  duration!: CardDuration;\n\n  // Chronicle Integration\n  originChronicle!: string | null;\n  originSource!: string | null; // Specific decision/outcome that created this\n  generationCreated!: number;\n\n  // Balancing\n  weight!: number; // Likelihood of appearing (0-1)\n  impact!: CardImpact;\n  balanceMetrics!: CardBalanceMetrics;\n\n  // Player Interaction\n  timesPlayed!: number;\n  playerChoices!: Record<string, number>; // Which choices players make\n  playerRating!: number;\n  effectiveness!: number; // How impactful this card has been\n}\n\nexport type CardType = 'event' | 'bonus' | 'crisis' | 'opportunity' | 'memory' | 'tradition';\nexport type CardTier = 'common' | 'uncommon' | 'rare' | 'epic' | 'legendary';\nexport type CardDuration = 'instant' | 'temporary' | 'permanent' | 'generational';\n\nexport class CardTrigger {\n  id!: string;\n  condition!: TriggerCondition;\n  probability!: number; // Base probability (modified by weight)\n  phase!: MissionPhaseType | 'any';\n  prerequisites!: string[];\n  cooldown!: number; // Minimum years between triggers\n}\n\nexport class TriggerCondition {\n  type!: 'resource' | 'population' | 'event' | 'year' | 'decision' | 'relationship';\n  target!: string;\n  operator!: 'equals' | 'greater' | 'less' | 'contains' | 'not';\n  value!: any;\n  description!: string;\n}\n\nexport class CardEffect {\n  id!: string;\n  type!: 'resource' | 'population' | 'relationship' | 'event' | 'narrative';\n  target!: string;\n  magnitude!: number;\n  duration!: CardDuration;\n  description!: string;\n\n  // Advanced Effects\n  scaling!: EffectScaling | null;\n  conditions!: string[];\n  sideEffects!: CardEffect[];\n}\n\nexport class EffectScaling {\n  scalesWith!: string; // What the effect scales with\n  scalingFactor!: number;\n  maximumEffect!: number;\n  description!: string;\n}\n\nexport class CardChoice {\n  id!: string;\n  text!: string;\n  description!: string;\n\n  // Requirements\n  requirements!: ChoiceRequirement[];\n  costs!: Partial<ExtendedResources>;\n\n  // Effects\n  immediateEffects!: CardEffect[];\n  longTermEffects!: LongTermEffect[];\n  chronicleConsequence!: ChronicleConsequence;\n\n  // Narrative\n  outcomeText!: string;\n  legacyReaction!: Record<LegacyTypeType, LegacyReaction>;\n}\n\nexport class ChoiceRequirement {\n  type!: 'resource' | 'population' | 'technology' | 'relationship' | 'legacy';\n  target!: string;\n  condition!: string;\n  description!: string;\n}\n\nexport class LegacyReaction {\n  approval!: number; // -1 to 1\n  relationshipChange!: number;\n  comment!: string;\n}\n\nexport type CardImpact = 'negligible' | 'minor' | 'moderate' | 'major' | 'game-changing';\n\nexport class CardBalanceMetrics {\n  powerLevel!: number; // 0-1, how powerful this card is\n  situationalUseful!: number; // 0-1, how often it's useful\n  playerChoice!: number; // 0-1, how much agency it gives players\n  narrativeWeight!: number; // 0-1, how much it affects story\n  synergies!: string[]; // Cards that work well with this one\n  counters!: string[]; // Cards that conflict with this one\n}\n\n// Deck Management\nexport class DeckFilter {\n  name!: string;\n  type!: 'include' | 'exclude';\n  criteria!: FilterCriteria;\n  isActive!: boolean;\n}\n\nexport class FilterCriteria {\n  cardTypes!: CardType[];\n  tiers!: CardTier[];\n  legacies!: LegacyTypeType[];\n  sources!: string[]; // Chronicle sources\n  impactLevels!: CardImpact[];\n  playerRatingRange!: [number, number];\n  customTags!: string[];\n}\n\n// Card Generation\nexport class LegacyCardTemplate {\n  id!: string;\n  name!: string;\n  templateType!: 'decision_echo' | 'outcome_memory' | 'cultural_tradition' | 'crisis_preparation';\n  generationRules!: CardGenerationRules;\n  effectTemplates!: EffectTemplate[];\n  narrativeTemplates!: NarrativeTemplate[];\n  balancingRules!: BalancingRules;\n}\n\nexport class CardGenerationRules {\n  minimumDecisionWeight!: number;\n  requiredElements!: string[]; // What must be present to generate\n  excludedCombinations!: string[]; // What combinations are forbidden\n  scalingFactors!: Record<string, number>;\n  rarityCalculation!: RarityCalculation;\n}\n\nexport class EffectTemplate {\n  type!: CardEffect['type'];\n  magnitudeFormula!: string; // Formula for calculating effect magnitude\n  durationRules!: Record<string, CardDuration>;\n  scalingRules!: EffectScaling | null;\n}\n\nexport class NarrativeTemplate {\n  title!: string;\n  description!: string;\n  flavorText!: string;\n  variables!: string[]; // Variables to substitute\n  conditions!: string[]; // When this template applies\n}\n\nexport class BalancingRules {\n  maxPowerLevel!: number;\n  costFormula!: string; // How to calculate resource costs\n  cooldownFormula!: string; // How to calculate trigger cooldowns\n  tierAdjustments!: Record<CardTier, number>;\n}\n\nexport class RarityCalculation {\n  baseRarity!: CardTier;\n  impactModifier!: number; // How much impact affects rarity\n  uniquenessBonus!: number; // Bonus for unique circumstances\n  playerPreferenceWeight!: number; // How much player history matters\n}\n\n// Card Interaction System\nexport interface CardTriggerResult {\n  success: boolean;\n  card: LegacyCard;\n  triggeredBy: string; // What caused the trigger\n  availableChoices: CardChoice[];\n  context: string; // Narrative context for the trigger\n}\n\nexport interface CardResolutionResult {\n  chosenOption: CardChoice;\n  immediateEffects: CardEffect[];\n  futureEffects: LongTermEffect[];\n  narrativeOutcome: string;\n  legacyReactions: Record<LegacyTypeType, LegacyReaction>;\n  chronicleUpdate: ChronicleConsequence;\n}\n\n// Deck Balancing and Analytics\nexport class DeckAnalytics {\n  totalCards!: number;\n  tierDistribution!: Record<CardTier, number>;\n  typeDistribution!: Record<CardType, number>;\n  averagePowerLevel!: number;\n  averageUsage!: number;\n  usageFrequency!: Record<string, number>;\n  playerSatisfactionScores!: Record<string, number>;\n  balanceIssues!: BalanceIssue[];\n}\n\nexport class BalanceIssue {\n  type!: 'overpowered' | 'underpowered' | 'too_frequent' | 'too_rare' | 'poor_narrative';\n  cardId!: string;\n  severity!: 'minor' | 'moderate' | 'major' | 'critical';\n  description!: string;\n  suggestedFix!: string;\n  automaticFix!: boolean; // Can this be fixed automatically?\n}\n\nexport interface DeckBalanceReport {\n  overallScore: number; // 0-1, how balanced the deck is\n  powerCurve: number[]; // Power distribution across tiers\n  diversityScore: number; // How diverse the deck composition is\n  playerEngagement: number; // How engaging players find the deck\n  issues: BalanceIssue[];\n  recommendations: string[];\n}\n\n// Player Curation\nexport type CurationAction = 'rate' | 'disable' | 'modify' | 'favorite' | 'report';\n\nexport interface CardModification {\n  type: 'effect_magnitude' | 'trigger_condition' | 'narrative_text' | 'rarity_adjustment';\n  target: string; // What part of the card to modify\n  newValue: any; // New value\n  reason: string; // Why the player made this change\n}\n\nexport interface CustomCard extends LegacyCard {\n  isCustom: true;\n  baseCardId: string; // Original card this is based on\n  modifications: CardModification[];\n  createdBy: string; // Player identifier\n  sharedWithCommunity: boolean;\n}\n\n// Deck Sharing and Community\nexport interface SharedDeck {\n  id: string;\n  name: string;\n  description: string;\n  legacy: LegacyTypeType;\n  cards: (LegacyCard | CustomCard)[];\n  creator: string;\n  createdAt: Date;\n  downloads: number;\n  rating: number;\n  tags: string[];\n}\n\nexport interface CommunityCardRating {\n  cardId: string;\n  ratings: {\n    fun: number; // 1-5\n    balance: number; // 1-5\n    narrative: number; // 1-5\n    uniqueness: number; // 1-5\n  };\n  comments: string[];\n  reportedIssues: string[];\n}","usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\types\\pacing.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MissionPhaseType' is defined but never used.","line":2,"column":15,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":31},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":84,"column":13,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":84,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2452,2455],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2452,2455],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":128,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":128,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4225,4228],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4225,4228],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":129,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":129,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4243,4246],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4243,4246],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":176,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":176,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5843,5846],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5843,5846],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":266,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":266,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8683,8686],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8683,8686],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// types/pacing.ts\nimport type { MissionPhaseType } from './enums';\n\nexport class PacingState {\n  currentPhase!: GamePhase;\n  phaseProgress!: number; // 0-1 through current phase\n  phaseStartYear!: number;\n\n  // Timing Control\n  timeAcceleration!: number; // Multiplier for year progression\n  eventDensity!: number; // Events per year\n  interactionDensity!: number; // Required player interactions per year\n\n  // Player Engagement\n  lastPlayerInteraction!: number; // Game timestamp\n  interactionHistory!: InteractionEvent[];\n  engagementScore!: number; // 0-1, rolling average\n  automationLevel!: number; // How much is automated\n\n  // Narrative Flow\n  tensionLevel!: number; // 0-1, current narrative tension\n  nextMilestone!: PlannedMilestone | null;\n  emergentEventQueue!: EmergentEvent[];\n\n  // Adaptive Elements\n  playerPreferences!: PacingPreferences;\n  adaptiveSettings!: AdaptiveSettings;\n  pacingMetrics!: PacingMetrics;\n}\n\nexport type GamePhase = 'early' | 'mid' | 'late' | 'arrival' | 'post-mission';\n\nexport class InteractionEvent {\n  timestamp!: number;\n  type!: 'decision' | 'exploration' | 'crisis' | 'milestone' | 'configuration';\n  duration!: number; // How long player spent on this\n  complexity!: number; // How complex the interaction was\n  satisfaction!: number | null; // Player rating if available\n}\n\nexport class PlannedMilestone {\n  id!: string;\n  type!: 'authored' | 'emergent';\n  scheduledYear!: number;\n  title!: string;\n  description!: string;\n\n  // Milestone Content\n  content!: MilestoneContent;\n  choices!: MilestoneChoice[];\n  requirements!: string[];\n\n  // Adaptive Scheduling\n  flexibility!: number; // How much the timing can be adjusted\n  priority!: number; // How important this milestone is\n  dependsOn!: string[]; // Other milestones this requires\n}\n\nexport class MilestoneContent {\n  narrative!: string;\n  context!: ContextReference[];\n  visuals!: string[];\n  mood!: 'hopeful' | 'tense' | 'celebratory' | 'somber' | 'mysterious';\n}\n\nexport class ContextReference {\n  type!: 'decision' | 'outcome' | 'character' | 'event';\n  source!: 'current-mission' | 'chronicle' | 'universal';\n  target!: string;\n  description!: string;\n}\n\nexport class MilestoneChoice {\n  id!: string;\n  text!: string;\n  description!: string;\n  consequences!: MilestoneConsequence[];\n  pacingImpact!: PacingImpact;\n}\n\nexport class MilestoneConsequence {\n  type!: 'immediate' | 'long-term' | 'chronicle';\n  description!: string;\n  effects!: any[]; // Flexible effect system\n  narrativeWeight!: number;\n}\n\nexport class PacingImpact {\n  tensionChange!: number; // How this affects narrative tension\n  phaseAcceleration!: number; // How this affects phase progression\n  eventModifier!: number; // How this affects future event frequency\n  engagementExpectation!: number; // Expected player engagement change\n}\n\nexport class PacingPreferences {\n  preferredSpeed!: 'slow' | 'medium' | 'fast' | 'adaptive';\n  crisisHandling!: 'immediate' | 'guided' | 'automated';\n  milestoneFrequency!: 'frequent' | 'moderate' | 'sparse';\n  narrativeStyle!: 'detailed' | 'concise' | 'minimal';\n\n  // Advanced Preferences\n  automationThreshold!: number; // When to increase automation\n  interactionBudget!: number; // Hours per week player expects to spend\n  contentPreferences!: ContentPreferences;\n}\n\nexport class ContentPreferences {\n  dynastyFocus!: number; // 0-1, how much to focus on dynasty content\n  legacyFocus!: number; // 0-1, how much to focus on legacy content\n  explorationFocus!: number; // 0-1, how much to focus on exploration\n  culturalFocus!: number; // 0-1, how much to focus on cultural elements\n\n  contentComplexity!: 'simple' | 'moderate' | 'complex';\n  narrativeDepth!: 'surface' | 'moderate' | 'deep';\n  choiceConsequences!: 'immediate' | 'mixed' | 'long-term';\n}\n\nexport class AdaptiveSettings {\n  learningRate!: number; // How quickly to adapt to player behavior\n  sensitivityThreshold!: number; // How much change triggers adaptation\n  stabilityPeriod!: number; // How long to wait before major changes\n  overrideHistory!: PlayerOverride[]; // Recent player overrides\n}\n\nexport class PlayerOverride {\n  timestamp!: number;\n  type!: 'speed' | 'automation' | 'event_density' | 'milestone_timing';\n  oldValue!: any;\n  newValue!: any;\n  reason!: string; // Why the player made this change\n}\n\nexport class PacingMetrics {\n  averageEngagement!: number; // Rolling average engagement score\n  interactionFrequency!: number; // Interactions per hour\n  satisfactionRating!: number; // Player satisfaction with pacing\n  automationEfficiency!: number; // How well automation works\n  narrativeCoherence!: number; // How well paced the story feels\n  adaptationSuccess!: number; // How well the system adapts to player\n}\n\n// Emergent Event System\nexport class EmergentEvent {\n  id!: string;\n  sourceSystem!: 'dynasty' | 'legacy' | 'population' | 'external';\n  emergenceFactors!: string[]; // What conditions led to this event\n  adaptiveNarrative!: string; // Dynamically generated based on current state\n  priority!: number; // How urgent this event is\n  triggerConditions!: EmergentTriggerCondition[];\n  scheduledYear!: number;\n  flexibility!: number; // How much timing can be adjusted\n}\n\nexport class EmergentTriggerCondition {\n  type!: 'resource' | 'population' | 'relationship' | 'time' | 'random';\n  target!: string;\n  threshold!: number;\n  probability!: number;\n  description!: string;\n}\n\n// Phase Management\nexport class PhaseTransition {\n  fromPhase!: GamePhase;\n  toPhase!: GamePhase;\n  triggerConditions!: PhaseTransitionCondition[];\n  narrative!: string;\n  effects!: PhaseTransitionEffect[];\n  playerNotification!: boolean;\n}\n\nexport class PhaseTransitionCondition {\n  type!: 'year' | 'mission_progress' | 'population' | 'resource' | 'event';\n  target!: string;\n  operator!: 'greater' | 'less' | 'equals' | 'contains';\n  value!: any;\n  weight!: number; // How important this condition is\n}\n\nexport class PhaseTransitionEffect {\n  type!: 'time_acceleration' | 'event_density' | 'automation_level' | 'milestone_schedule';\n  magnitude!: number;\n  duration!: 'permanent' | 'phase' | 'temporary';\n  description!: string;\n}\n\n// Time Management\nexport class TimeControlState {\n  isPaused!: boolean;\n  currentAcceleration!: number;\n  targetAcceleration!: number;\n  accelerationLimits!: AccelerationLimits;\n  pauseReasons!: PauseReason[];\n  resumeConditions!: ResumeCondition[];\n}\n\nexport class AccelerationLimits {\n  minimum!: number;\n  maximum!: number;\n  crisisLimit!: number; // Max acceleration during crisis\n  playerOverrideLimit!: number; // Max when player takes control\n  automationLimit!: number; // Max during automation\n}\n\nexport class PauseReason {\n  type!: 'player_decision' | 'crisis' | 'milestone' | 'error' | 'manual';\n  description!: string;\n  priority!: number;\n  timestamp!: number;\n  autoResumable!: boolean;\n}\n\nexport class ResumeCondition {\n  type!: 'player_action' | 'time_elapsed' | 'condition_met' | 'automatic';\n  description!: string;\n  checkInterval!: number; // How often to check this condition\n  expiresAt!: number | null; // When this condition expires\n}\n\n// Player Engagement Tracking\nexport class EngagementAnalysis {\n  currentLevel!: EngagementLevel;\n  trend!: 'increasing' | 'stable' | 'decreasing';\n  factors!: EngagementFactor[];\n  predictions!: EngagementPrediction[];\n  recommendations!: EngagementRecommendation[];\n}\n\nexport type EngagementLevel = 'very_low' | 'low' | 'moderate' | 'high' | 'very_high';\n\nexport class EngagementFactor {\n  type!: 'positive' | 'negative' | 'neutral';\n  factor!: string;\n  weight!: number; // How much this affects engagement\n  description!: string;\n  trend!: 'increasing' | 'stable' | 'decreasing';\n}\n\nexport class EngagementPrediction {\n  timeframe!: number; // Minutes into the future\n  predictedLevel!: EngagementLevel;\n  confidence!: number; // 0-1, how confident in this prediction\n  factors!: string[]; // What factors this prediction is based on\n}\n\nexport class EngagementRecommendation {\n  type!: 'pacing' | 'content' | 'automation' | 'milestone';\n  priority!: 'low' | 'medium' | 'high' | 'critical';\n  action!: string;\n  expectedEffect!: string;\n  risks!: string[];\n  timeToEffect!: number; // How long until this takes effect\n}\n\n// Automation and AI Control\nexport class AutomationPolicy {\n  category!: string; // What type of decisions this covers\n  automationLevel!: number; // 0-1, how much to automate\n  playerApprovalRequired!: boolean;\n  escalationConditions!: EscalationCondition[];\n  fallbackBehavior!: string; // What to do if automation fails\n}\n\nexport class EscalationCondition {\n  type!: 'resource_threshold' | 'population_crisis' | 'external_threat' | 'uncertainty';\n  threshold!: any;\n  response!: 'pause' | 'notify' | 'reduce_automation' | 'emergency_protocol';\n  description!: string;\n}\n\n// Narrative Flow Management\nexport class NarrativeFlow {\n  currentArc!: NarrativeArc;\n  tension!: TensionCurve;\n  themes!: ActiveTheme[];\n  pacingBeats!: PacingBeat[];\n  coherenceScore!: number; // 0-1, how coherent the narrative feels\n}\n\nexport class NarrativeArc {\n  id!: string;\n  name!: string;\n  startYear!: number;\n  estimatedEndYear!: number;\n  themes!: string[];\n  keyMoments!: string[];\n  resolution!: string | null;\n}\n\nexport class TensionCurve {\n  currentLevel!: number; // 0-1\n  targetLevel!: number; // Where tension should be\n  peakMoments!: number[]; // Years where tension should peak\n  relaxationPeriods!: number[]; // Years where tension should drop\n  rateCurve!: number[]; // How tension changes over time\n}\n\nexport class ActiveTheme {\n  name!: string;\n  weight!: number; // How prominent this theme is\n  introduction!: number; // Year introduced\n  development!: string[]; // How it's being developed\n  resolution!: string | null; // How it might be resolved\n}\n\nexport class PacingBeat {\n  year!: number;\n  type!: 'action' | 'reflection' | 'revelation' | 'transition' | 'climax';\n  intensity!: number; // 0-1\n  duration!: number; // How long this beat lasts\n  followUp!: string | null; // What happens next\n}","usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\utils\\logger.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":18,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":18,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[353,356],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[353,356],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":24,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":24,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[504,507],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[504,507],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":30,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":30,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[652,655],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[652,655],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":36,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":36,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[810,813],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[810,813],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":42,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":42,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[967,970],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[967,970],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":50,"column":62,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":50,"endColumn":65,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1270,1273],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1270,1273],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":54,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":54,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1411,1414],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1411,1414],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":62,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":62,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1691,1694],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1691,1694],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// utils/logger.ts\r\nconst LogLevel = {\r\n  DEBUG: 0,\r\n  INFO: 1,\r\n  WARN: 2,\r\n  ERROR: 3\r\n} as const;\r\n\r\ntype LogLevelType = typeof LogLevel[keyof typeof LogLevel];\r\n\r\nclass Logger {\r\n  private static level: LogLevelType = LogLevel.INFO;\r\n\r\n  static setLevel(level: LogLevelType) {\r\n    this.level = level;\r\n  }\r\n\r\n  static debug(message: string, data?: any) {\r\n    if (this.level <= LogLevel.DEBUG) {\r\n      console.debug(`[DEBUG] ${message}`, data);\r\n    }\r\n  }\r\n\r\n  static info(message: string, data?: any) {\r\n    if (this.level <= LogLevel.INFO) {\r\n      console.info(`[INFO] ${message}`, data);\r\n    }\r\n  }\r\n\r\n  static warn(message: string, data?: any) {\r\n    if (this.level <= LogLevel.WARN) {\r\n      console.warn(`[WARN] ${message}`, data);\r\n    }\r\n  }\r\n\r\n  static error(message: string, error?: Error | any) {\r\n    if (this.level <= LogLevel.ERROR) {\r\n      console.error(`[ERROR] ${message}`, error);\r\n    }\r\n  }\r\n\r\n  static gameAction(action: string, data?: any) {\r\n    this.info(`Game Action: ${action}`, data);\r\n  }\r\n\r\n  static resourceChange(resource: string, amount: number, reason: string) {\r\n    this.debug(`Resource Change: ${resource} ${amount > 0 ? '+' : ''}${amount} (${reason})`);\r\n  }\r\n\r\n  static crewAction(action: string, crewName: string, data?: any) {\r\n    this.info(`Crew Action: ${action} by ${crewName}`, data);\r\n  }\r\n\r\n  static systemEvent(event: string, systemName: string, data?: any) {\r\n    this.info(`System Event: ${event} in ${systemName}`, data);\r\n  }\r\n\r\n  static performance(metric: string, value: number, unit: string = '') {\r\n    this.debug(`Performance: ${metric} = ${value}${unit}`);\r\n  }\r\n\r\n  static uiEvent(event: string, component: string, data?: any) {\r\n    this.debug(`UI Event: ${event} in ${component}`, data);\r\n  }\r\n}\r\n\r\nexport default Logger;\r\nexport { LogLevel };","usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\utils\\performance.ts","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useMemo received a function whose dependencies are unknown. Pass an inline function instead.","line":46,"column":10,"nodeType":"Identifier","endLine":46,"endColumn":17},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useMemo has a missing dependency: 'obj'. Either include it or remove the dependency array.","line":99,"column":29,"nodeType":"ArrayExpression","endLine":99,"endColumn":50,"suggestions":[{"desc":"Update the dependencies array to be: [obj]","fix":{"range":[2340,2361],"text":"[obj]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useMemo has a complex expression in the dependency array. Extract it to a separate variable so it can be statically checked.","line":99,"column":30,"nodeType":"CallExpression","endLine":99,"endColumn":49},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useMemo has a missing dependency: 'arr'. Either include it or remove the dependency array.","line":106,"column":29,"nodeType":"ArrayExpression","endLine":106,"endColumn":50,"suggestions":[{"desc":"Update the dependencies array to be: [arr]","fix":{"range":[2499,2520],"text":"[arr]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useMemo has a complex expression in the dependency array. Extract it to a separate variable so it can be statically checked.","line":106,"column":30,"nodeType":"CallExpression","endLine":106,"endColumn":49},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useMemo has a missing dependency: 'options'. Either include it or remove the dependency array.","line":300,"column":5,"nodeType":"ArrayExpression","endLine":300,"endColumn":86,"suggestions":[{"desc":"Update the dependencies array to be: [items, scrollTop, options]","fix":{"range":[7442,7523],"text":"[items, scrollTop, options]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// utils/performance.ts\n/**\n * Performance optimization utilities for React components and expensive operations\n */\n\nimport React, { useMemo, useRef, useCallback, useState } from 'react';\n\n/**\n * Simple memoization function for expensive calculations\n */\nexport function memoize<TArgs extends unknown[], TReturn>(\n  fn: (...args: TArgs) => TReturn,\n  cacheSize: number = 100\n): (...args: TArgs) => TReturn {\n  const cache = new Map<string, TReturn>();\n\n  return (...args: TArgs): TReturn => {\n    const key = JSON.stringify(args);\n\n    if (cache.has(key)) {\n      return cache.get(key)!;\n    }\n\n    const result = fn(...args);\n\n    // Implement LRU cache by clearing oldest entries\n    if (cache.size >= cacheSize) {\n      const firstKey = cache.keys().next().value;\n      if (firstKey !== undefined) {\n        cache.delete(firstKey);\n      }\n    }\n\n    cache.set(key, result);\n    return result;\n  };\n}\n\n/**\n * Hook for memoizing expensive calculations with dependency tracking\n */\nexport function useExpensiveCalculation<T>(\n  calculation: () => T,\n  dependencies: React.DependencyList\n): T {\n  return useMemo(calculation, dependencies);\n}\n\n/**\n * Hook for debouncing function calls to prevent excessive re-renders\n */\nexport function useDebounce<T extends (...args: unknown[]) => unknown>(\n  callback: T,\n  delay: number\n): T {\n  const timeoutRef = useRef<number | undefined>(undefined);\n\n  return useCallback(\n    ((...args) => {\n      if (timeoutRef.current) {\n        clearTimeout(timeoutRef.current);\n      }\n\n      timeoutRef.current = setTimeout(() => {\n        callback(...args);\n      }, delay);\n    }) as T,\n    [callback, delay]\n  );\n}\n\n/**\n * Hook for throttling function calls to limit execution frequency\n */\nexport function useThrottle<T extends (...args: unknown[]) => unknown>(\n  callback: T,\n  limit: number\n): T {\n  const inThrottle = useRef(false);\n\n  return useCallback(\n    ((...args) => {\n      if (!inThrottle.current) {\n        callback(...args);\n        inThrottle.current = true;\n        setTimeout(() => {\n          inThrottle.current = false;\n        }, limit);\n      }\n    }) as T,\n    [callback, limit]\n  );\n}\n\n/**\n * Hook for creating stable object references to prevent unnecessary re-renders\n */\nexport function useStableObject<T extends Record<string, unknown>>(obj: T): T {\n  return useMemo(() => obj, [JSON.stringify(obj)]);\n}\n\n/**\n * Hook for creating stable array references\n */\nexport function useStableArray<T>(arr: T[]): T[] {\n  return useMemo(() => arr, [JSON.stringify(arr)]);\n}\n\n/**\n * Performance measurement utility\n */\nexport class PerformanceMonitor {\n  private static measurements = new Map<string, number[]>();\n\n  static start(label: string): void {\n    if (typeof performance !== 'undefined') {\n      performance.mark(`${label}-start`);\n    }\n  }\n\n  static end(label: string): number | null {\n    if (typeof performance === 'undefined') {\n      return null;\n    }\n\n    const startMark = `${label}-start`;\n    const endMark = `${label}-end`;\n\n    performance.mark(endMark);\n\n    try {\n      performance.measure(label, startMark, endMark);\n      const measure = performance.getEntriesByName(label, 'measure')[0];\n      const duration = measure.duration;\n\n      // Store measurement for analysis\n      if (!this.measurements.has(label)) {\n        this.measurements.set(label, []);\n      }\n      this.measurements.get(label)!.push(duration);\n\n      // Clean up marks\n      performance.clearMarks(startMark);\n      performance.clearMarks(endMark);\n      performance.clearMeasures(label);\n\n      return duration;\n    } catch (error) {\n      console.warn('Performance measurement failed:', error);\n      return null;\n    }\n  }\n\n  static getAverageTime(label: string): number | null {\n    const measurements = this.measurements.get(label);\n    if (!measurements || measurements.length === 0) {\n      return null;\n    }\n\n    const sum = measurements.reduce((acc, val) => acc + val, 0);\n    return sum / measurements.length;\n  }\n\n  static getStats(label: string): {\n    count: number;\n    average: number;\n    min: number;\n    max: number;\n  } | null {\n    const measurements = this.measurements.get(label);\n    if (!measurements || measurements.length === 0) {\n      return null;\n    }\n\n    return {\n      count: measurements.length,\n      average: measurements.reduce((acc, val) => acc + val, 0) / measurements.length,\n      min: Math.min(...measurements),\n      max: Math.max(...measurements),\n    };\n  }\n\n  static clearStats(label?: string): void {\n    if (label) {\n      this.measurements.delete(label);\n    } else {\n      this.measurements.clear();\n    }\n  }\n}\n\n/**\n * React hook for performance monitoring\n */\nexport function usePerformanceMonitor(label: string, enabled: boolean = true) {\n  const start = useCallback(() => {\n    if (enabled) {\n      PerformanceMonitor.start(label);\n    }\n  }, [label, enabled]);\n\n  const end = useCallback(() => {\n    if (enabled) {\n      return PerformanceMonitor.end(label);\n    }\n    return null;\n  }, [label, enabled]);\n\n  const getStats = useCallback(() => {\n    return PerformanceMonitor.getStats(label);\n  }, [label]);\n\n  return { start, end, getStats };\n}\n\n/**\n * Higher-order component for automatic performance monitoring\n */\nexport function withPerformanceMonitoring<TProps extends Record<string, unknown>>(\n  Component: React.ComponentType<TProps>,\n  componentName?: string\n): React.ComponentType<TProps> {\n  const WrappedComponent: React.FC<TProps> = (props: TProps) => {\n    const name = componentName || Component.displayName || Component.name || 'Anonymous';\n    const { start, end } = usePerformanceMonitor(`component-${name}`);\n\n    React.useLayoutEffect(() => {\n      start();\n      return () => {\n        end();\n      };\n    });\n\n    return React.createElement(Component, props);\n  };\n\n  WrappedComponent.displayName = `withPerformanceMonitoring(${\n    componentName || Component.displayName || Component.name || 'Anonymous'\n  })`;\n\n  return WrappedComponent;\n}\n\n/**\n * Virtual scrolling utilities for large lists\n */\nexport interface VirtualScrollOptions {\n  itemHeight: number;\n  containerHeight: number;\n  overscan?: number;\n}\n\nexport function calculateVirtualScrollItems<T>(\n  items: T[],\n  scrollTop: number,\n  options: VirtualScrollOptions\n): {\n  startIndex: number;\n  endIndex: number;\n  visibleItems: T[];\n  totalHeight: number;\n  offsetY: number;\n} {\n  const { itemHeight, containerHeight, overscan = 5 } = options;\n  const totalHeight = items.length * itemHeight;\n\n  const startIndex = Math.max(0, Math.floor(scrollTop / itemHeight) - overscan);\n  const visibleCount = Math.ceil(containerHeight / itemHeight);\n  const endIndex = Math.min(items.length - 1, startIndex + visibleCount + overscan);\n\n  const visibleItems = items.slice(startIndex, endIndex + 1);\n  const offsetY = startIndex * itemHeight;\n\n  return {\n    startIndex,\n    endIndex,\n    visibleItems,\n    totalHeight,\n    offsetY,\n  };\n}\n\n/**\n * React hook for virtual scrolling\n */\nexport function useVirtualScroll<T>(\n  items: T[],\n  options: VirtualScrollOptions\n) {\n  const containerRef = useRef<HTMLDivElement>(null);\n  const [scrollTop, setScrollTop] = useState(0);\n\n  const handleScroll = useThrottle((...args: unknown[]) => {\n    const event = args[0] as React.UIEvent<HTMLDivElement>;\n    setScrollTop(event.currentTarget.scrollTop);\n  }, 16); // ~60fps\n\n  const virtualItems = useMemo(\n    () => calculateVirtualScrollItems(items, scrollTop, options),\n    [items, scrollTop, options.itemHeight, options.containerHeight, options.overscan]\n  );\n\n  return {\n    containerRef,\n    handleScroll,\n    ...virtualItems,\n  };\n}","usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\utils\\result.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":32,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":32,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[853,856],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[853,856],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":33,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":33,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[910,913],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[910,913],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// utils/result.ts\n/**\n * Result type for consistent error handling across the application\n * Eliminates the need for throwing exceptions and provides type-safe error handling\n */\n\nexport type Result<T, E = ServiceError> =\n  | { success: true; data: T }\n  | { success: false; error: E };\n\n/**\n * Custom error class for service-layer errors\n */\nexport class ServiceError extends Error {\n  public readonly code: string;\n  public readonly context?: Record<string, unknown>;\n  public readonly innerError?: Error;\n\n  constructor(\n    message: string,\n    code: string,\n    context?: Record<string, unknown>,\n    innerError?: Error\n  ) {\n    super(message);\n    this.name = 'ServiceError';\n    this.code = code;\n    this.context = context;\n    this.innerError = innerError;\n\n    // Maintain proper stack trace in Node.js environments\n    if (typeof (Error as any).captureStackTrace === 'function') {\n      (Error as any).captureStackTrace(this, ServiceError);\n    }\n  }\n\n  /**\n   * Convert to plain object for logging/serialization\n   */\n  toObject(): Record<string, unknown> {\n    return {\n      name: this.name,\n      message: this.message,\n      code: this.code,\n      context: this.context,\n      stack: this.stack,\n      innerError: this.innerError?.message,\n    };\n  }\n}\n\n/**\n * Pre-defined error codes for common scenarios\n */\nexport const ERROR_CODES = {\n  // Validation errors\n  INVALID_INPUT: 'INVALID_INPUT',\n  REQUIRED_FIELD: 'REQUIRED_FIELD',\n  INVALID_FORMAT: 'INVALID_FORMAT',\n\n  // Chronicle errors\n  CHRONICLE_NOT_FOUND: 'CHRONICLE_NOT_FOUND',\n  INVALID_CHRONICLE_ENTRY: 'INVALID_CHRONICLE_ENTRY',\n  CHRONICLE_GENERATION_FAILED: 'CHRONICLE_GENERATION_FAILED',\n\n  // Heritage errors\n  HERITAGE_MODIFIER_CONFLICT: 'HERITAGE_MODIFIER_CONFLICT',\n  HERITAGE_GENERATION_FAILED: 'HERITAGE_GENERATION_FAILED',\n  INVALID_HERITAGE_SELECTION: 'INVALID_HERITAGE_SELECTION',\n\n  // Legacy Deck errors\n  CARD_NOT_FOUND: 'CARD_NOT_FOUND',\n  DECK_GENERATION_FAILED: 'DECK_GENERATION_FAILED',\n  INVALID_CARD_TRIGGER: 'INVALID_CARD_TRIGGER',\n\n  // Pacing errors\n  INVALID_PACING_STATE: 'INVALID_PACING_STATE',\n  PACING_UPDATE_FAILED: 'PACING_UPDATE_FAILED',\n\n  // Generic errors\n  UNKNOWN_ERROR: 'UNKNOWN_ERROR',\n  OPERATION_FAILED: 'OPERATION_FAILED',\n  NOT_IMPLEMENTED: 'NOT_IMPLEMENTED',\n} as const;\n\n/**\n * Helper functions for creating Results\n */\nexport const ResultHelpers = {\n  /**\n   * Create a successful result\n   */\n  success: <T>(data: T): Result<T> => ({\n    success: true,\n    data,\n  }),\n\n  /**\n   * Create a failed result with ServiceError\n   */\n  error: <T>(\n    message: string,\n    code: string,\n    context?: Record<string, unknown>,\n    innerError?: Error\n  ): Result<T> => ({\n    success: false,\n    error: new ServiceError(message, code, context, innerError),\n  }),\n\n  /**\n   * Create a failed result with existing error\n   */\n  errorWithCause: <T>(error: ServiceError): Result<T> => ({\n    success: false,\n    error,\n  }),\n\n  /**\n   * Convert a potentially throwing function to return a Result\n   */\n  fromThrowable: <T>(fn: () => T, context?: Record<string, unknown>): Result<T> => {\n    try {\n      const data = fn();\n      return ResultHelpers.success(data);\n    } catch (error) {\n      const serviceError = error instanceof ServiceError\n        ? error\n        : new ServiceError(\n            'Operation failed',\n            ERROR_CODES.OPERATION_FAILED,\n            context,\n            error instanceof Error ? error : new Error(String(error))\n          );\n\n      return ResultHelpers.errorWithCause(serviceError);\n    }\n  },\n\n  /**\n   * Convert a Promise to return a Result\n   */\n  fromPromise: async <T>(\n    promise: Promise<T>,\n    context?: Record<string, unknown>\n  ): Promise<Result<T>> => {\n    try {\n      const data = await promise;\n      return ResultHelpers.success(data);\n    } catch (error) {\n      const serviceError = error instanceof ServiceError\n        ? error\n        : new ServiceError(\n            'Async operation failed',\n            ERROR_CODES.OPERATION_FAILED,\n            context,\n            error instanceof Error ? error : new Error(String(error))\n          );\n\n      return ResultHelpers.errorWithCause(serviceError);\n    }\n  },\n};\n\n/**\n * Type guards for Result types\n */\nexport const isSuccess = <T, E>(result: Result<T, E>): result is { success: true; data: T } => {\n  return result.success;\n};\n\nexport const isError = <T, E>(result: Result<T, E>): result is { success: false; error: E } => {\n  return !result.success;\n};\n\n/**\n * Result utility functions\n */\nexport const ResultUtils = {\n  /**\n   * Map over the data in a successful result\n   */\n  map: <T, U, E = ServiceError>(\n    result: Result<T, E>,\n    mapFn: (data: T) => U\n  ): Result<U, E> => {\n    if (isSuccess(result)) {\n      return ResultHelpers.success(mapFn(result.data)) as Result<U, E>;\n    }\n    return result as Result<U, E>;\n  },\n\n  /**\n   * FlatMap for chaining Results\n   */\n  flatMap: <T, U, E = ServiceError>(\n    result: Result<T, E>,\n    mapFn: (data: T) => Result<U, E>\n  ): Result<U, E> => {\n    if (isSuccess(result)) {\n      return mapFn(result.data);\n    }\n    return result as Result<U, E>;\n  },\n\n  /**\n   * Combine multiple Results - fails if any fail\n   */\n  combine: <T extends readonly unknown[]>(\n    results: { [K in keyof T]: Result<T[K], ServiceError> }\n  ): Result<T, ServiceError> => {\n    const data: unknown[] = [];\n\n    for (const result of results) {\n      if (isError(result)) {\n        return result;\n      }\n      data.push(result.data);\n    }\n\n    return ResultHelpers.success(data as unknown as T);\n  },\n\n  /**\n   * Get data or throw error\n   */\n  unwrap: <T, E extends Error>(result: Result<T, E>): T => {\n    if (isSuccess(result)) {\n      return result.data;\n    }\n    throw result.error;\n  },\n\n  /**\n   * Get data or return default value\n   */\n  unwrapOr: <T, E>(result: Result<T, E>, defaultValue: T): T => {\n    if (isSuccess(result)) {\n      return result.data;\n    }\n    return defaultValue;\n  },\n};\n\n/**\n * Async Result utilities\n */\nexport const AsyncResultUtils = {\n  /**\n   * Map over async Result\n   */\n  map: async <T, U>(\n    result: Promise<Result<T, ServiceError>>,\n    mapFn: (data: T) => U | Promise<U>\n  ): Promise<Result<U, ServiceError>> => {\n    const resolved = await result;\n    if (isSuccess(resolved)) {\n      const mapped = await mapFn(resolved.data);\n      return ResultHelpers.success(mapped);\n    }\n    return resolved as Result<U, ServiceError>;\n  },\n\n  /**\n   * FlatMap for async Results\n   */\n  flatMap: async <T, U, E>(\n    result: Promise<Result<T, E>>,\n    mapFn: (data: T) => Promise<Result<U, E>>\n  ): Promise<Result<U, E>> => {\n    const resolved = await result;\n    if (isSuccess(resolved)) {\n      return await mapFn(resolved.data);\n    }\n    return resolved;\n  },\n};","usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\utils\\terminalBorders.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\utils\\validation.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ValidationRule' is defined but never used.","line":15,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":15,"endColumn":25},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":200,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":200,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5317,5320],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5317,5320],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":200,"column":70,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":200,"endColumn":73,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5363,5366],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5363,5366],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// utils/validation.ts\nimport { ServiceError, ERROR_CODES } from './result';\nimport type { ChronicleEntry, ChronicleDecision } from '../types/chronicle';\nimport type { HeritageModifier } from '../types/heritage';\nimport type { LegacyCard } from '../types/legacyDecks';\nimport type { PacingState } from '../types/pacing';\n\n/**\n * Type guards and validation utilities for runtime type checking\n */\n\n/**\n * Base validation interface\n */\ninterface ValidationRule<T> {\n  validate: (value: unknown) => value is T;\n  errorMessage: string;\n}\n\n/**\n * Common validation utilities\n */\nexport const ValidationUtils = {\n  /**\n   * Check if value is a non-empty string\n   */\n  isNonEmptyString: (value: unknown): value is string => {\n    return typeof value === 'string' && value.trim().length > 0;\n  },\n\n  /**\n   * Check if value is a positive number\n   */\n  isPositiveNumber: (value: unknown): value is number => {\n    return typeof value === 'number' && value > 0 && !isNaN(value);\n  },\n\n  /**\n   * Check if value is a non-negative number\n   */\n  isNonNegativeNumber: (value: unknown): value is number => {\n    return typeof value === 'number' && value >= 0 && !isNaN(value);\n  },\n\n  /**\n   * Check if value is within range\n   */\n  isInRange: (value: unknown, min: number, max: number): value is number => {\n    return typeof value === 'number' && value >= min && value <= max && !isNaN(value);\n  },\n\n  /**\n   * Check if value is a valid date\n   */\n  isValidDate: (value: unknown): value is Date => {\n    return value instanceof Date && !isNaN(value.getTime());\n  },\n\n  /**\n   * Check if value is an array with minimum length\n   */\n  isArrayWithMinLength: <T>(value: unknown, minLength: number): value is T[] => {\n    return Array.isArray(value) && value.length >= minLength;\n  },\n\n  /**\n   * Check if object has required properties\n   */\n  hasRequiredProperties: (\n    value: unknown,\n    properties: string[]\n  ): value is Record<string, unknown> => {\n    if (typeof value !== 'object' || value === null) {\n      return false;\n    }\n\n    const obj = value as Record<string, unknown>;\n    return properties.every(prop => prop in obj && obj[prop] !== undefined);\n  },\n};\n\n/**\n * Domain-specific validators\n */\nexport const DomainValidators = {\n  /**\n   * Validate ChronicleEntry\n   */\n  chronicleEntry: (value: unknown): value is ChronicleEntry => {\n    if (!ValidationUtils.hasRequiredProperties(value, [\n      'missionId',\n      'missionName',\n      'missionNumber',\n      'startedAt',\n      'completedAt',\n    ])) {\n      return false;\n    }\n\n    const entry = value as unknown as ChronicleEntry;\n\n    return (\n      ValidationUtils.isNonEmptyString(entry.missionId) &&\n      ValidationUtils.isNonEmptyString(entry.missionName) &&\n      ValidationUtils.isPositiveNumber(entry.missionNumber) &&\n      ValidationUtils.isValidDate(entry.startedAt) &&\n      ValidationUtils.isValidDate(entry.completedAt)\n    );\n  },\n\n  /**\n   * Validate ChronicleDecision\n   */\n  chronicleDecision: (value: unknown): value is ChronicleDecision => {\n    if (!ValidationUtils.hasRequiredProperties(value, [\n      'id',\n      'title',\n      'description',\n      'category',\n      'urgency',\n      'scope',\n    ])) {\n      return false;\n    }\n\n    const decision = value as unknown as ChronicleDecision;\n\n    return (\n      ValidationUtils.isNonEmptyString(decision.id) &&\n      ValidationUtils.isNonEmptyString(decision.title) &&\n      ValidationUtils.isNonEmptyString(decision.description)\n    );\n  },\n\n  /**\n   * Validate HeritageModifier\n   */\n  heritageModifier: (value: unknown): value is HeritageModifier => {\n    if (!ValidationUtils.hasRequiredProperties(value, [\n      'id',\n      'name',\n      'source',\n      'tier',\n    ])) {\n      return false;\n    }\n\n    const modifier = value as unknown as HeritageModifier;\n\n    return (\n      ValidationUtils.isNonEmptyString(modifier.id) &&\n      ValidationUtils.isNonEmptyString(modifier.name) &&\n      ['mission_success', 'decision_consequence', 'cultural_evolution', 'artifact_discovery'].includes(String(modifier.source)) &&\n      ['minor', 'moderate', 'major', 'legendary'].includes(modifier.tier)\n    );\n  },\n\n  /**\n   * Validate LegacyCard\n   */\n  legacyCard: (value: unknown): value is LegacyCard => {\n    if (!ValidationUtils.hasRequiredProperties(value, [\n      'id',\n      'name',\n      'type',\n      'legacy',\n      'tier',\n    ])) {\n      return false;\n    }\n\n    const card = value as unknown as LegacyCard;\n\n    return (\n      ValidationUtils.isNonEmptyString(card.id) &&\n      ValidationUtils.isNonEmptyString(card.name) &&\n      ['event', 'bonus', 'crisis', 'opportunity', 'memory', 'tradition'].includes(card.type) &&\n      ['preservers', 'adaptors', 'wanderers'].includes(card.legacy) &&\n      ['common', 'uncommon', 'rare', 'epic', 'legendary'].includes(card.tier)\n    );\n  },\n\n  /**\n   * Validate PacingState\n   */\n  pacingState: (value: unknown): value is PacingState => {\n    if (!ValidationUtils.hasRequiredProperties(value, [\n      'currentPhase',\n      'timeAcceleration',\n      'paused',\n    ])) {\n      return false;\n    }\n\n    const state = value as unknown as PacingState;\n\n    return (\n      ['early_game', 'mid_game', 'late_game', 'end_game'].includes(state.currentPhase) &&\n      ValidationUtils.isPositiveNumber(state.timeAcceleration) &&\n      typeof (state as any).paused === 'boolean' || typeof (state as any).isPaused === 'boolean'\n    );\n  },\n};\n\n/**\n * Validation helper that throws ServiceError on failure\n */\nexport const validate = {\n  /**\n   * Require a value to be non-null/undefined\n   */\n  required: <T>(value: T | null | undefined, fieldName: string): T => {\n    if (value === null || value === undefined) {\n      throw new ServiceError(\n        `${fieldName} is required`,\n        ERROR_CODES.REQUIRED_FIELD,\n        { fieldName, value }\n      );\n    }\n    return value;\n  },\n\n  /**\n   * Validate against a type guard\n   */\n  against: <T>(\n    value: unknown,\n    guard: (value: unknown) => value is T,\n    fieldName: string,\n    expectedType: string\n  ): T => {\n    if (!guard(value)) {\n      throw new ServiceError(\n        `${fieldName} must be a valid ${expectedType}`,\n        ERROR_CODES.INVALID_FORMAT,\n        { fieldName, value, expectedType }\n      );\n    }\n    return value;\n  },\n\n  /**\n   * Validate string length\n   */\n  stringLength: (\n    value: string,\n    fieldName: string,\n    minLength: number = 1,\n    maxLength: number = 1000\n  ): string => {\n    if (value.length < minLength || value.length > maxLength) {\n      throw new ServiceError(\n        `${fieldName} must be between ${minLength} and ${maxLength} characters`,\n        ERROR_CODES.INVALID_FORMAT,\n        { fieldName, value, minLength, maxLength, actualLength: value.length }\n      );\n    }\n    return value;\n  },\n\n  /**\n   * Validate number range\n   */\n  numberRange: (\n    value: number,\n    fieldName: string,\n    min: number = Number.MIN_SAFE_INTEGER,\n    max: number = Number.MAX_SAFE_INTEGER\n  ): number => {\n    if (value < min || value > max) {\n      throw new ServiceError(\n        `${fieldName} must be between ${min} and ${max}`,\n        ERROR_CODES.INVALID_FORMAT,\n        { fieldName, value, min, max }\n      );\n    }\n    return value;\n  },\n\n  /**\n   * Validate array length\n   */\n  arrayLength: <T>(\n    value: T[],\n    fieldName: string,\n    minLength: number = 0,\n    maxLength: number = Number.MAX_SAFE_INTEGER\n  ): T[] => {\n    if (value.length < minLength || value.length > maxLength) {\n      throw new ServiceError(\n        `${fieldName} must contain between ${minLength} and ${maxLength} items`,\n        ERROR_CODES.INVALID_FORMAT,\n        { fieldName, minLength, maxLength, actualLength: value.length }\n      );\n    }\n    return value;\n  },\n\n  /**\n   * Validate enum value\n   */\n  enumValue: <T extends string>(\n    value: string,\n    fieldName: string,\n    allowedValues: readonly T[]\n  ): T => {\n    if (!allowedValues.includes(value as T)) {\n      throw new ServiceError(\n        `${fieldName} must be one of: ${allowedValues.join(', ')}`,\n        ERROR_CODES.INVALID_FORMAT,\n        { fieldName, value, allowedValues }\n      );\n    }\n    return value as T;\n  },\n\n  /**\n   * Validate ChronicleEntry with detailed error reporting\n   */\n  chronicleEntry: (value: unknown): ChronicleEntry => {\n    return validate.against(\n      value,\n      DomainValidators.chronicleEntry,\n      'chronicleEntry',\n      'ChronicleEntry'\n    );\n  },\n\n  /**\n   * Validate ChronicleDecision with detailed error reporting\n   */\n  chronicleDecision: (value: unknown): ChronicleDecision => {\n    return validate.against(\n      value,\n      DomainValidators.chronicleDecision,\n      'chronicleDecision',\n      'ChronicleDecision'\n    );\n  },\n\n  /**\n   * Validate HeritageModifier with detailed error reporting\n   */\n  heritageModifier: (value: unknown): HeritageModifier => {\n    return validate.against(\n      value,\n      DomainValidators.heritageModifier,\n      'heritageModifier',\n      'HeritageModifier'\n    );\n  },\n\n  /**\n   * Validate LegacyCard with detailed error reporting\n   */\n  legacyCard: (value: unknown): LegacyCard => {\n    return validate.against(\n      value,\n      DomainValidators.legacyCard,\n      'legacyCard',\n      'LegacyCard'\n    );\n  },\n\n  /**\n   * Validate PacingState with detailed error reporting\n   */\n  pacingState: (value: unknown): PacingState => {\n    return validate.against(\n      value,\n      DomainValidators.pacingState,\n      'pacingState',\n      'PacingState'\n    );\n  },\n};\n\n/**\n * Sanitization utilities for user input\n */\nexport const sanitize = {\n  /**\n   * Sanitize text input\n   */\n  text: (input: string, maxLength: number = 1000): string => {\n    return input\n      .replace(/[<>]/g, '') // Remove HTML tags\n      .trim()\n      .slice(0, maxLength);\n  },\n\n  /**\n   * Sanitize filename\n   */\n  filename: (name: string, maxLength: number = 255): string => {\n    return name\n      .replace(/[^a-zA-Z0-9_-]/g, '')\n      .slice(0, maxLength);\n  },\n\n  /**\n   * Sanitize numeric input\n   */\n  number: (input: string): number => {\n    const cleaned = input.replace(/[^0-9.-]/g, '');\n    const parsed = parseFloat(cleaned);\n    return isNaN(parsed) ? 0 : parsed;\n  },\n\n  /**\n   * Sanitize array of strings\n   */\n  stringArray: (input: unknown[], maxLength: number = 100): string[] => {\n    return input\n      .filter((item): item is string => typeof item === 'string')\n      .map(str => sanitize.text(str))\n      .slice(0, maxLength);\n  },\n};\n\n/**\n * Export commonly used validators for convenience\n */\nexport const { chronicleEntry, chronicleDecision, heritageModifier, legacyCard, pacingState } = validate;","usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\src\\vite-env.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\tailwind.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\test\\smoke.test.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\test\\smoke.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\vite.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"H:\\WebHatchery\\game_apps\\stellar_legacy\\frontend\\vitest.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]